{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Fun with migasfree \u00b6 Alberto Gac\u00edas Copyright (C) 2013 - 2020","title":"**Fun with migasfree**{: .part}"},{"location":"#fun-with-migasfree","text":"Alberto Gac\u00edas Copyright (C) 2013 - 2020","title":"Fun with migasfree"},{"location":"sobre/","text":"Sobre este libro \u00b6 Licencia y Copyright \u00b6 Fun with migasfree Copyright (C) 2013 - 2020 Alberto Gac\u00edas and contributors. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled \"GNU Free Documentation License\". Presentaci\u00f3n \u00b6 Hola. Soy Alberto Gac\u00edas. Bienvenidos al primer cap\u00edtulo de \"Alberto Gac\u00edas presenta diversi\u00f3n con migasfree\". Durante las pr\u00f3ximas p\u00e1ginas, usted y yo vamos a explorar el din\u00e1mico mundo de la migasfreelog\u00eda 1 . \u00bfQu\u00e9 es migasfree en cuatro palabras? \u00b6 Un gestor de despliegues . Me atrevo incluso con s\u00f3lo una palabra: Desplegador . Migasfree se ocupa principalmente del proceso de la liberaci\u00f3n de software y de la posterior auditor\u00eda de los cambios producidos en los equipos como consecuencia de esa liberaci\u00f3n. Es una de las herramientas que estamos utilizando con \u00e9xito en AZLinux , el proyecto de migraci\u00f3n a escritorio libre del Ayuntamiento de Zaragoza . Este software se ha hecho indispensable en nuestro d\u00eda a d\u00eda, y creo que es una buena soluci\u00f3n para personalizar y administrar escritorios de forma eficaz. \u00bfPara qu\u00e9 sirve migasfree? \u00b6 Para administrar ordenadores de forma centralizada. Desplegar actualizaciones seg\u00fan calendarios y caracter\u00edsticas de ordenadores y usuarios. Controlar y personalizar cada ordenador, manteniendo \u00edntegros tus sistemas. Auditar hardware y software. Este libro te introducir\u00e1 en el uso de migasfree y lo escribo a medida que mejoramos el software, con lo que, si te lo descargaste hace tiempo, quiz\u00e1s ya est\u00e9 obsoleto. Tenlo en cuenta. A qui\u00e9n va dirigido \u00b6 Este libro puede serte \u00fatil si eres administrador de escritorios (y/o servidores) y quieres personalizar y administrar de forma eficaz tus equipos, manteniendo la integridad de los sistemas. Estructura \u00b6 Parte 1. Introducci\u00f3n \u00b6 En esta primera parte, repasaremos la Gesti\u00f3n de la Configuraci\u00f3n del Software. Conocer los aspectos b\u00e1sicos de este proceso de la Ingenier\u00eda del Software te dar\u00e1 una visi\u00f3n de conjunto que considero esencial porque es, precisamente aqu\u00ed, donde se integra migasfree. Te explicar\u00e9 las dificultades que un administrador de escritorios va a encontrarse y c\u00f3mo se pueden sortear de forma sencilla, bas\u00e1ndome en la experiencia adquirida en AZLinux. Podr\u00e1s conocer la historia, caracter\u00edsticas y componentes que utiliza migasfree. Parte 2. Primeros Pasos \u00b6 Aqu\u00ed te ense\u00f1ar\u00e9 a instalar y probar un servidor y cliente migasfree, con la configuraci\u00f3n m\u00ednima, para que puedas verlos en funcionamiento cuanto antes. Parte 3. Gu\u00eda de uso \u00b6 Te permitir\u00e1 conocer tanto el cliente como el servidor migasfree m\u00e1s en detalle. Parte 4. Puesta en producci\u00f3n \u00b6 Se tratar\u00e1n los aspectos a tener en cuenta si quieres utilizar migasfree en un entorno de producci\u00f3n, as\u00ed como las FAQs y la resoluci\u00f3n de problemas. Ajustes \u00b6 Detalla los ajustes necesarios para configurar correctamente tanto el servidor migasfree como los clientes. Empaquetado \u00b6 Contiene intrucciones para empaquetar migasfree en cualquier distribuci\u00f3n. Anexos \u00b6 Contiene la API de migasfree, la bibliograf\u00eda, referencias y licencia de este libro. Agradecimientos \u00b6 Detr\u00e1s de cada proyecto hay personas que lo hacen posible, manteniendo, animando, corrigiendo, colaborando, apoyando... Deseo expresar en primer lugar mi gratitud a Eduardo Romero. Me dio el est\u00edmulo necesario para liberar la primera versi\u00f3n de migasfree, haciendo visible este proyecto en Internet. Tambi\u00e9n aport\u00f3 la primera y \u00fanica donaci\u00f3n que ha recibido migasfree (aunque fuera por una apuesta perdida, no se lo tuve en cuenta y fue muy bien recibida). A Jose Antonio Chavarr\u00eda, compa\u00f1ero de fatigas (y alegr\u00edas), tambi\u00e9n me siento agradecido. Ha sido y es piedra angular en migasfree. Ha mejorado sustancialmente el proyecto reescribiendo el c\u00f3digo spaguetti a buen c\u00f3digo 2 , aportando ideas y soluciones. Me tranquiliza cuando quiero correr en exceso, y es el guardi\u00e1n de la simplicidad de migasfree. A Jes\u00fas Gonz\u00e1lez por su empe\u00f1o en crear equipos de trabajo donde las personas nos sentimos a gusto trabajando. Y a todo el grupo de Asistencia a Usuarios del Ayuntamiento de Zaragoza, especialmente al equipo de Software Libre. Disfruto trabajando con ellos y me hacen re\u00edr a diario. Grupo de Software Libre del Ayuntamiento de Zaragoza (a\u00f1o 2013) Acerca de m\u00ed \u00b6 De joven me atra\u00eda la programaci\u00f3n. Estudi\u00e9 electr\u00f3nica, y all\u00ed me ense\u00f1aron a programar en c\u00f3digo m\u00e1quina el microcontrolador 8751. A\u00fan me gusta cacharrear con transistores, condensadores, circuitos integrados, leds... y ense\u00f1ar lo poco que recuerdo de todo aquello a Jes\u00fas. A los dos nos gusta jugar con arduino scratch y s4a . Trabaj\u00e9 como electr\u00f3nico mis primeros a\u00f1os laborales y, poco despu\u00e9s, con el boom de la inform\u00e1tica personal, empec\u00e9 a desarrollar aplicaciones de todo tipo. Actualmente trabajo como t\u00e9cnico inform\u00e1tico en el equipo de Software Libre del Ayuntamiento de Zaragoza desarrollando y manteniendo AZLinux, el escritorio libre que usamos los trabajadores municipales. Parte de mi tiempo libre lo dedico a desarrollar migasfree. Me encanta mirar el cielo en las noches de verano de Pe\u00f1iscola, la cerveza, las migas y los huevos rotos. Tambi\u00e9n me gusta escuchar m\u00fasica, el olor a tierra mojada y que me hagan re\u00edr con cualquier tontada. Amo a Patricia, y a Jes\u00fas, nuestro hijo. Nota del autor \u00b6 Algunos han criticado a las personas que entregamos parte de nuestro tiempo en producir software libre. El argumento se basa en que nuestra aportaci\u00f3n hace que se eliminen puestos de trabajo o que algunas empresas no pueden hacer negocio por competencia desleal. Dicen estar hartos de gente que \"trabajamos gratis\" y que les \"quitamos\" el sustento. No puedo estar de acuerdo. En primer lugar porque el software libre no es un asunto econ\u00f3mico sino que, sencillamente, lo que plantea es una cuesti\u00f3n de libertad . Pienso que los modelos de negocio obsoletos deben adaptarse y evolucionar hacia nuevas formas de generar riqueza, creando nuevas relaciones entre productor y consumidor. Los modelos de negocios basados en software libre a menudo nos indican el camino a seguir, ya que est\u00e1n estableciendo estas nuevas relaciones y obteniendo la confianza y el reconocimiento del consumidor, y no precisamente por cuestiones econ\u00f3micas. \u00bfNo desean esto las empresas para s\u00ed? En cuanto a que producir algo que otros obtienen gratis no genera puestos de trabajo, pienso que es falso. S\u00f3lo hace falta fijarse en como las tecnolog\u00edas de interconexi\u00f3n, protocolos y servicios de accesibilidad de la red Internet ha generado, y seguir\u00e1 generando, infinidad de puestos de trabajo. Estoy convencido que Internet no ser\u00eda ni siquiera una sombra de lo que es si estas tecnolog\u00edas se hubieran patentado, cerrado y/o explotado econ\u00f3micamente. Creo que el movimiento del software libre es, junto con otros, una esperanza para que el Conocimiento vuelva a ser producido por la sociedad y para la sociedad, en contraposici\u00f3n al Conocimiento creado, comercializado y controlado por determinadas organizaciones y que, en ocasiones, causa un perjuicio a la sociedad. Enlaces \u00b6 Versi\u00f3n en HTML . Versi\u00f3n en PDF . Ejemplos usados en el libro . C\u00f3digo fuente . Proyecto migasfree . Twitter: @migasfree , @albertogacias . Recordando a Sheldon Cooper en \"Fun with Flags\" en la serie The Big Bang Theory. \u21a9 Proceso conocido muy localmente como chavarrizaci\u00f3n . \u21a9","title":"Sobre este libro"},{"location":"sobre/#sobre-este-libro","text":"","title":"Sobre este libro"},{"location":"sobre/#licencia-y-copyright","text":"Fun with migasfree Copyright (C) 2013 - 2020 Alberto Gac\u00edas and contributors. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the section entitled \"GNU Free Documentation License\".","title":"Licencia y Copyright"},{"location":"sobre/#presentacion","text":"Hola. Soy Alberto Gac\u00edas. Bienvenidos al primer cap\u00edtulo de \"Alberto Gac\u00edas presenta diversi\u00f3n con migasfree\". Durante las pr\u00f3ximas p\u00e1ginas, usted y yo vamos a explorar el din\u00e1mico mundo de la migasfreelog\u00eda 1 .","title":"Presentaci\u00f3n"},{"location":"sobre/#que-es-migasfree-en-cuatro-palabras","text":"Un gestor de despliegues . Me atrevo incluso con s\u00f3lo una palabra: Desplegador . Migasfree se ocupa principalmente del proceso de la liberaci\u00f3n de software y de la posterior auditor\u00eda de los cambios producidos en los equipos como consecuencia de esa liberaci\u00f3n. Es una de las herramientas que estamos utilizando con \u00e9xito en AZLinux , el proyecto de migraci\u00f3n a escritorio libre del Ayuntamiento de Zaragoza . Este software se ha hecho indispensable en nuestro d\u00eda a d\u00eda, y creo que es una buena soluci\u00f3n para personalizar y administrar escritorios de forma eficaz.","title":"\u00bfQu\u00e9 es migasfree en cuatro palabras?"},{"location":"sobre/#para-que-sirve-migasfree","text":"Para administrar ordenadores de forma centralizada. Desplegar actualizaciones seg\u00fan calendarios y caracter\u00edsticas de ordenadores y usuarios. Controlar y personalizar cada ordenador, manteniendo \u00edntegros tus sistemas. Auditar hardware y software. Este libro te introducir\u00e1 en el uso de migasfree y lo escribo a medida que mejoramos el software, con lo que, si te lo descargaste hace tiempo, quiz\u00e1s ya est\u00e9 obsoleto. Tenlo en cuenta.","title":"\u00bfPara qu\u00e9 sirve migasfree?"},{"location":"sobre/#a-quien-va-dirigido","text":"Este libro puede serte \u00fatil si eres administrador de escritorios (y/o servidores) y quieres personalizar y administrar de forma eficaz tus equipos, manteniendo la integridad de los sistemas.","title":"A qui\u00e9n va dirigido"},{"location":"sobre/#estructura","text":"","title":"Estructura"},{"location":"sobre/#parte-1-introduccion","text":"En esta primera parte, repasaremos la Gesti\u00f3n de la Configuraci\u00f3n del Software. Conocer los aspectos b\u00e1sicos de este proceso de la Ingenier\u00eda del Software te dar\u00e1 una visi\u00f3n de conjunto que considero esencial porque es, precisamente aqu\u00ed, donde se integra migasfree. Te explicar\u00e9 las dificultades que un administrador de escritorios va a encontrarse y c\u00f3mo se pueden sortear de forma sencilla, bas\u00e1ndome en la experiencia adquirida en AZLinux. Podr\u00e1s conocer la historia, caracter\u00edsticas y componentes que utiliza migasfree.","title":"Parte 1. Introducci\u00f3n"},{"location":"sobre/#parte-2-primeros-pasos","text":"Aqu\u00ed te ense\u00f1ar\u00e9 a instalar y probar un servidor y cliente migasfree, con la configuraci\u00f3n m\u00ednima, para que puedas verlos en funcionamiento cuanto antes.","title":"Parte 2. Primeros Pasos"},{"location":"sobre/#parte-3-guia-de-uso","text":"Te permitir\u00e1 conocer tanto el cliente como el servidor migasfree m\u00e1s en detalle.","title":"Parte 3. Gu\u00eda de uso"},{"location":"sobre/#parte-4-puesta-en-produccion","text":"Se tratar\u00e1n los aspectos a tener en cuenta si quieres utilizar migasfree en un entorno de producci\u00f3n, as\u00ed como las FAQs y la resoluci\u00f3n de problemas.","title":"Parte 4. Puesta en producci\u00f3n"},{"location":"sobre/#ajustes","text":"Detalla los ajustes necesarios para configurar correctamente tanto el servidor migasfree como los clientes.","title":"Ajustes"},{"location":"sobre/#empaquetado","text":"Contiene intrucciones para empaquetar migasfree en cualquier distribuci\u00f3n.","title":"Empaquetado"},{"location":"sobre/#anexos","text":"Contiene la API de migasfree, la bibliograf\u00eda, referencias y licencia de este libro.","title":"Anexos"},{"location":"sobre/#agradecimientos","text":"Detr\u00e1s de cada proyecto hay personas que lo hacen posible, manteniendo, animando, corrigiendo, colaborando, apoyando... Deseo expresar en primer lugar mi gratitud a Eduardo Romero. Me dio el est\u00edmulo necesario para liberar la primera versi\u00f3n de migasfree, haciendo visible este proyecto en Internet. Tambi\u00e9n aport\u00f3 la primera y \u00fanica donaci\u00f3n que ha recibido migasfree (aunque fuera por una apuesta perdida, no se lo tuve en cuenta y fue muy bien recibida). A Jose Antonio Chavarr\u00eda, compa\u00f1ero de fatigas (y alegr\u00edas), tambi\u00e9n me siento agradecido. Ha sido y es piedra angular en migasfree. Ha mejorado sustancialmente el proyecto reescribiendo el c\u00f3digo spaguetti a buen c\u00f3digo 2 , aportando ideas y soluciones. Me tranquiliza cuando quiero correr en exceso, y es el guardi\u00e1n de la simplicidad de migasfree. A Jes\u00fas Gonz\u00e1lez por su empe\u00f1o en crear equipos de trabajo donde las personas nos sentimos a gusto trabajando. Y a todo el grupo de Asistencia a Usuarios del Ayuntamiento de Zaragoza, especialmente al equipo de Software Libre. Disfruto trabajando con ellos y me hacen re\u00edr a diario. Grupo de Software Libre del Ayuntamiento de Zaragoza (a\u00f1o 2013)","title":"Agradecimientos"},{"location":"sobre/#acerca-de-mi","text":"De joven me atra\u00eda la programaci\u00f3n. Estudi\u00e9 electr\u00f3nica, y all\u00ed me ense\u00f1aron a programar en c\u00f3digo m\u00e1quina el microcontrolador 8751. A\u00fan me gusta cacharrear con transistores, condensadores, circuitos integrados, leds... y ense\u00f1ar lo poco que recuerdo de todo aquello a Jes\u00fas. A los dos nos gusta jugar con arduino scratch y s4a . Trabaj\u00e9 como electr\u00f3nico mis primeros a\u00f1os laborales y, poco despu\u00e9s, con el boom de la inform\u00e1tica personal, empec\u00e9 a desarrollar aplicaciones de todo tipo. Actualmente trabajo como t\u00e9cnico inform\u00e1tico en el equipo de Software Libre del Ayuntamiento de Zaragoza desarrollando y manteniendo AZLinux, el escritorio libre que usamos los trabajadores municipales. Parte de mi tiempo libre lo dedico a desarrollar migasfree. Me encanta mirar el cielo en las noches de verano de Pe\u00f1iscola, la cerveza, las migas y los huevos rotos. Tambi\u00e9n me gusta escuchar m\u00fasica, el olor a tierra mojada y que me hagan re\u00edr con cualquier tontada. Amo a Patricia, y a Jes\u00fas, nuestro hijo.","title":"Acerca de m\u00ed"},{"location":"sobre/#nota-del-autor","text":"Algunos han criticado a las personas que entregamos parte de nuestro tiempo en producir software libre. El argumento se basa en que nuestra aportaci\u00f3n hace que se eliminen puestos de trabajo o que algunas empresas no pueden hacer negocio por competencia desleal. Dicen estar hartos de gente que \"trabajamos gratis\" y que les \"quitamos\" el sustento. No puedo estar de acuerdo. En primer lugar porque el software libre no es un asunto econ\u00f3mico sino que, sencillamente, lo que plantea es una cuesti\u00f3n de libertad . Pienso que los modelos de negocio obsoletos deben adaptarse y evolucionar hacia nuevas formas de generar riqueza, creando nuevas relaciones entre productor y consumidor. Los modelos de negocios basados en software libre a menudo nos indican el camino a seguir, ya que est\u00e1n estableciendo estas nuevas relaciones y obteniendo la confianza y el reconocimiento del consumidor, y no precisamente por cuestiones econ\u00f3micas. \u00bfNo desean esto las empresas para s\u00ed? En cuanto a que producir algo que otros obtienen gratis no genera puestos de trabajo, pienso que es falso. S\u00f3lo hace falta fijarse en como las tecnolog\u00edas de interconexi\u00f3n, protocolos y servicios de accesibilidad de la red Internet ha generado, y seguir\u00e1 generando, infinidad de puestos de trabajo. Estoy convencido que Internet no ser\u00eda ni siquiera una sombra de lo que es si estas tecnolog\u00edas se hubieran patentado, cerrado y/o explotado econ\u00f3micamente. Creo que el movimiento del software libre es, junto con otros, una esperanza para que el Conocimiento vuelva a ser producido por la sociedad y para la sociedad, en contraposici\u00f3n al Conocimiento creado, comercializado y controlado por determinadas organizaciones y que, en ocasiones, causa un perjuicio a la sociedad.","title":"Nota del autor"},{"location":"sobre/#enlaces","text":"Versi\u00f3n en HTML . Versi\u00f3n en PDF . Ejemplos usados en el libro . C\u00f3digo fuente . Proyecto migasfree . Twitter: @migasfree , @albertogacias . Recordando a Sheldon Cooper en \"Fun with Flags\" en la serie The Big Bang Theory. \u21a9 Proceso conocido muy localmente como chavarrizaci\u00f3n . \u21a9","title":"Enlaces"},{"location":"part1/admin/","text":"Administrando escritorios \u00b6 En todo lo que nos rodea y en todo lo que nos mueve, debemos advertir que interviene en algo la casualidad. -- Anatole France. En el cap\u00edtulo anterior, hemos hablado de la GCS y de c\u00f3mo las distribuciones GNU/Linux utilizan el sistema de paqueter\u00eda para garantizar la integridad frente al cambio. Si tienes un equipo dom\u00e9stico, todos los cambios producidos y liberados por los distintos proyectos y que hayan sido empaquetados y liberados por tu distribuci\u00f3n GNU/Linux, ser\u00e1n instalados convenientemente con el simple hecho de dar la orden al gestor de paquetes para que actualice tu sistema. Ahora bien, en una organizaci\u00f3n donde se requiera administrar los escritorios esto no es suficiente, veamos el porqu\u00e9. La personalizaci\u00f3n \u00b6 La primera dificultad importante a la que se va a enfrentar un administrador, va a ser la de la personalizaci\u00f3n. Imagina que tienes que migrar y administrar 1000 equipos a GNU/Linux y que tienes en tu red un servicio NTP, requiri\u00e9ndose que todos tus escritorios est\u00e9n con la hora sincronizada con este servicio. Vas a tener que personalizar el cliente NTP en todos tus escritorios. Una manera que se suele utilizar es instalar en un equipo una distribuci\u00f3n GNU/Linux desde un DVD, editar el fichero de configuraci\u00f3n del cliente NTP y configurar la IP (o el nombre DNS) del servidor donde se encuentra el servcio NTP. Despu\u00e9s, puedes crear una imagen del disco duro con un sistema de clonado como pueda ser Clonezilla y clonar uno a uno los equipos usando dicha imagen. Con este m\u00e9todo, la personalizaci\u00f3n inicial reside en dicha imagen, pero sigamos imaginando... Un d\u00eda, a mitad de migraci\u00f3n, recibes un correo y lees: \"Alberto: El servicio NTP dejar\u00e1 de dar servicio a partir del d\u00eda 10. En su lugar vamos a disponer de un nuevo servicio, llamado QueHoraEs, que es mucho mejor porque...\" En este momento, ya estar\u00e1s pensando en los 400 equipos que tienes migrados y te echar\u00e1s las manos a la cabeza porque es evidente que este sistema de personalizaci\u00f3n no es adecuado. nota La personalizaci\u00f3n inicial es muy sencilla de realizar, pero un cambio en la personalizaci\u00f3n puede darse en cualquier momento, y tienes que estar preparado para poder realizarlo. Gestores de Sistemas \u00b6 Afortunadamente, existen unas herramientas denominadas Gestores de Sistemas ( Systems Management Systems ), que pueden ayudarnos en la administraci\u00f3n de los escritorios. Algunos de estos Gestores de Sistemas se centran en la adquisici\u00f3n del estado de los equipos como Nagios , y otros permiten automatizar tareas mediante la ejecuci\u00f3n de c\u00f3digo en los equipos de manera centralizada como Zenworks , Landscape , chef , puppet , cfengine , ansible . Los Gestores de Sistemas est\u00e1n muy influidos por las iniciativas realizadas en los sistemas de gesti\u00f3n de redes de telecomunicaciones, pudiendo realizar una o un conjunto de las siguientes tareas: Inventario hardware. Monitoreado de disponibilidad de servidores y mediciones. Inventario e instalaci\u00f3n de software. Gesti\u00f3n de antivirus y anti-malware. Monitoreado de las actividades de los usuarios. Monitoreado de la capacidad de los sistemas. Gesti\u00f3n de seguridad. Gesti\u00f3n de almacenamiento. Monitoreado de la utilizaci\u00f3n y capacidades de la red. Estas tareas podemos clasificarlas de acuerdo a FCAPS , un modelo y marco de trabajo de red de la gesti\u00f3n de telecomunicaciones de ISO para la gesti\u00f3n de redes. FCAPS es un acr\u00f3nimo de Fault, Configuration, Accounting, Performance, Security (Falla, Configuraci\u00f3n, Contabilidad, Desempe\u00f1o, Seguridad), que son las categor\u00edas en las cuales el modelo ISO define las tareas de gesti\u00f3n de redes. Fault (Fallas): Es un evento que tiene un significado negativo. Su objetivo es reconocer, aislar , corregir y registrar fallos. Puede utilizar an\u00e1lisis de tendencias para predecir errores. Cuando se detecta un fallo o evento, se env\u00eda una notificaci\u00f3n. Configuration (Configuraci\u00f3n): En el proceso de gesti\u00f3n de la configuraci\u00f3n, las operaciones diarias son monitoreadas y controladas. Los objetivos de la gesti\u00f3n de la configuraci\u00f3n son: Recolectar informaci\u00f3n. Modificar la configuraci\u00f3n. Generaci\u00f3n de reportes Gesti\u00f3n de cambios. Los cambios de Hardware y Software son controlados por este proceso: Actualizaci\u00f3n, Instalaci\u00f3n y eliminaci\u00f3n de programas. Actualizaci\u00f3n, Instalaci\u00f3n y eliminaci\u00f3n de equipamiento (impresoras, scaners, memoria, etc.) Este proceso debe tener en cuenta: Permitir acceso r\u00e1pido a la informaci\u00f3n de la configuraci\u00f3n. Facilitar la configuraci\u00f3n remota de los dispositivos. Proporcionar un inventario actualizado de Software y Hardware. Simplificaci\u00f3n de la configuraci\u00f3n de dispositivos. El seguimiento de cambios a la configuraci\u00f3n. Accounting (Contabilidad): Su objetivo es reunir las estad\u00edsticas de los usuarios. Performance (Desempe\u00f1o). Recolentando y analizando los datos de rendimiento, el estado general de los sistemas pueden ser monitorizado. Las tendencias pueden avisar de fallos de capacidad o de cuestiones relacionadas con la fiabilidad de los sistemas, antes de que en estos ocurran. Umbrales de rendimiento pueden ser establecidos para lanzar alarmas que ser\u00edan controladas por la gesti\u00f3n de fallos habitual. Las alarmas se pueden clasificar atendiendo al grado de severidad. Security (Seguridad). Se encarga de controlar el acceso a recursos de red. La seguridad de los datos puede ser conseguida con la autenticaci\u00f3n, cifrado y permisos, principalmente. nota Migasfreee atendiendo a FCAPS, tiene capacidades de Faults, Configuration y Accounting. Un ejemplo de funcionamiento t\u00edpico de un Gestor de Sistemas que incorpore tareas de Configuration usar\u00eda un lenguaje que especificar\u00eda a qu\u00e9 estado se quiere llevar a los equipos, no c\u00f3mo llegar a ese estado. En nuestro caso, ser\u00eda algo parecido a esto: aseg\u00farate de que el paquete ntp-client est\u00e1 desinstalado, aseg\u00farate de que el paquete quehoraes-client est\u00e1 instalado, aseg\u00farate de que el fichero de configuraci\u00f3n de quehoraes-client es el mismo que el que est\u00e1 en el servidor. Peri\u00f3dicamente, los clientes se conectar\u00edan al servidor para obtener este c\u00f3digo que ser\u00e1 ejecutado mediante el int\u00e9rprete propio del Gestor de Sistemas instalado en el cliente. Este sistema permite automatizar aquellas tareas que realizan a menudo los administradores de sistemas, y aunque algunos Gestores de Sistemas se las ingenian para llevar un control de versiones, mantienen una base de datos independiente a la de los backends de los gestores de paquetes, dejando en entredicho todo lo relativo a la integridad de los sistemas. Empaquetando la personalizaci\u00f3n \u00b6 En AZLinux usamos otro m\u00e9todo: empaquetamos siempre la personalizaci\u00f3n. Para el caso del cliente \u201cQueHoraEs\u201d, crear\u00edamos el paquete azl-quehoraes-client 1 con la siguiente informaci\u00f3n: Dependencias: quehoraes-client Obsoletos: ntp-client En el script de postinstalaci\u00f3n escribir\u00edamos el siguiente c\u00f3digo: En el fichero de configuraci\u00f3n del cliente QueHoraes, modificar el valor de la entrada \u201cserver=\u201d por la IP del servidor QueHoraEs \u00a1Listo! Con esto queda garantizada la integridad frente al cambio de la personalizaci\u00f3n, aprovech\u00e1ndonos de la integridad que nos proporciona el sistema de paqueter\u00eda de nuestra distribuci\u00f3n GNU/Linux. Una vez empaquetada nuestra personalizaci\u00f3n, se hace relativamente sencillo realizar cualquier cambio posterior en ella. Pero crear un paquete desde cero para personalizar una distribuci\u00f3n GNU/Linux no es tan f\u00e1cil, no tanto por la creaci\u00f3n del paquete en s\u00ed, sino porque la personalizaci\u00f3n requiere de los conocimientos suficientes sobre el sistema GNU/Linux y sobre la propia aplicaci\u00f3n que se personaliza. nota Empaquetar la personalizaci\u00f3n nos asegura la integridad de los sistemas frente a sus cambios. Date cuenta que no es necesario ning\u00fan Gestor de Sistemas para instalar dicha personalizaci\u00f3n. S\u00f3lo necesitas el Gestor de Paquetes, y \u00e9ste siempre lo tienes disponible en cualquier distribuci\u00f3n GNU/Linux. Niveles de personalizaci\u00f3n \u00b6 Las aplicaciones suelen incorporar dos niveles de personalizaci\u00f3n: La del usuario. La del sistema (para todos los usuarios del sistema). La personalizaci\u00f3n del usuario es prioritaria a la del sistema, siempre y cuando esta \u00faltima no sea obligatoria. Es conveniente conocer si la aplicaci\u00f3n que vas a configurar incorpora la personalizaci\u00f3n a nivel de sistema, ya que \u00e9sta es la que se tendr\u00e1 que configurar. En los casos en que las aplicaciones s\u00f3lo tengan la configuraci\u00f3n a nivel de usuario, o en los casos en los que se requiera, tendr\u00e1s que recorrer todos los usuarios para aplicar la personalizaci\u00f3n a cada uno de ellos. La liberaci\u00f3n \u00b6 Es el segundo problema importante con el que vas a tener que lidiar. Por un lado, debes independizarte de los repositorios p\u00fablicos de tu distribuci\u00f3n GNU/Linux, por el simple motivo de que no puedes permitir que el control de los cambios que se instalar\u00e1n en tus m\u00e1quinas, lo tenga tu distribuci\u00f3n GNU/Linux en vez de tu organizaci\u00f3n. \u00bfImaginas que habr\u00eda pasado en AZLinux cuando OpenSuSE sustituy\u00f3 OpenOffice por LibreOffice? Cuando los usuarios hubieran encendido las m\u00e1quinas a las 8:00 de la ma\u00f1ana, se iniciar\u00eda la actualizaci\u00f3n a LibreOffice autom\u00e1ticamente pudi\u00e9ndose producir muchas incidencias. \u00bfFuncionar\u00eda todo? \u00bfNo es mejor probar LibreOffice en tu organizaci\u00f3n antes de que se instale en todos tus equipos? Tener la posibilidad de deshacer un cambio que se haya determinado como no deseado es importante. Tienes que decidir por ti mismo el software que deben tener tus usuarios y, por tanto, debes tener los gestores de paquetes configurados contra tus propios repositorios de paquetes y gestionarlos de alguna manera. Adem\u00e1s, es conveniente que puedas planificar a qui\u00e9n y cu\u00e1ndo se deben liberar dichos cambios. Imagina nuevamente el ejemplo de la sustituci\u00f3n de OpenOffice por LibreOffice. Estar\u00edamos hablando de una actualizaci\u00f3n de cerca de 500 MB por equipo que, multiplicado por todos los equipos de una organizaci\u00f3n, podr\u00eda resultar en mucho tr\u00e1fico de red. Una ventaja de planificar la liberaci\u00f3n es que permite distribuir poco a poco los cambios, de tal manera que, si hay errores, afectar\u00e1 inicialmente a muy pocos equipos, permitiendo actuar de manera m\u00e1s relajada para corregir cualquier incidencia. Por todo esto, y como los repositorios est\u00e1ndar de las distribuciones no tienen ning\u00fan mecanismo de planificaci\u00f3n de la liberaci\u00f3n, es por lo que decidimos desarrollar migasfree, extendiendo el concepto de repositorio de paquetes al concepto de despliegue: repositorio de paquetes din\u00e1mico y planificable. Despliegue Migasfree \u00b6 Un despliegue de migasfree es, simplemente, un repositorio est\u00e1ndar m\u00e1s la capacidad de poder especificar, de forma centralizada, cu\u00e1ndo y qui\u00e9n accede a ese repositorio. Veamos como act\u00faa migasfree en lo relativo a los repositorios: Los cambios que se quieren liberar son empaquetados y subidos a un servidor migasfree. Se crea un despliegue con los paquetes subidos y se establece a qui\u00e9n (atributos de usuario + equipo) y en qu\u00e9 momento se deben aplicar dichos cambios. El servidor migasfree crea un repositorio f\u00edsico (id\u00e9ntico al de cualquier distribuci\u00f3n GNU/Linux) con dichos paquetes, utilizando las herramientas est\u00e1ndar de creaci\u00f3n de repositorios ( createrepo para paqueter\u00eda RPM o dpkg-scanpackages para paqueter\u00eda Debian). Cuando un cliente migasfree se conecta al servidor env\u00eda sus atributos al servidor. El servidor consulta los despliegues para determinar, en funci\u00f3n de esos atributos enviados, la lista de los repositorios f\u00edsicos que tiene el cliente a su disposici\u00f3n y se los env\u00eda al cliente. El cliente migasfree configura la lista de los repositorios f\u00edsicos recibidos desde el servidor en el Gestor de Paquetes. A continuaci\u00f3n, el cliente migasfree da instrucciones al Gestor de Paquetes para que se produzca la eliminaci\u00f3n, instalaci\u00f3n y actualizaci\u00f3n de los paquetes desde los repositorios f\u00edsicos. La GCS en tu organizaci\u00f3n \u00b6 En el cap\u00edtulo anterior, hemos visto el proceso de la GCS en los distintos proyectos de software libre y tambi\u00e9n en las distribuciones GNU/Linux. Pues bien, en una organizaci\u00f3n tambi\u00e9n debe realizarse el proceso de la GCS. Proceso GCS en tu organizaci\u00f3n con migasfree Un usuario hace una petici\u00f3n de cambio. Un desarrollador programa el cambio de la configuraci\u00f3n software dentro de un paquete y lo sube a un servidor migasfree. La liberaci\u00f3n es realizada por el servidor migasfree a los ordenadores requeridos. En AZLinux realizamos nuestra propia GCS y vemos como, de nuevo, se repiten las mismas actividades: petici\u00f3n de cambio, cambio y liberaci\u00f3n. Usamos dos tipos de peticiones de cambio: Peticiones de cambio Actualizaci\u00f3n de aplicaciones . Si por ejemplo recibimos una petici\u00f3n para actualizar Mozilla Firefox, descargamos desde los repositorios de la distribuci\u00f3n la versi\u00f3n deseada. La probamos en laboratorio registrando cualquier informaci\u00f3n relevante en la petici\u00f3n de cambio. Finalmente, si todo es correcto, se liberan los paquetes a trav\u00e9s de un despliegue migasfree planificando su distribuci\u00f3n (ver A en el diagrama 'Peticiones de cambio'). Personalizaci\u00f3n de aplicaciones . Se produce por ejemplo cuando llega una petici\u00f3n de cambio para a\u00f1adir un motor de b\u00fasqueda de sin\u00f3nimos a Mozilla Firefox. Introducimos entonces en un paquete propio de AZLinux (azl-firefox) el c\u00f3digo que instala dicho motor de b\u00fasqueda y liberamos dicho paquete en un despliegue de migasfree planificando su distribuci\u00f3n (ver B en el diagrama 'Peticiones de cambio'). Las herramientas que usamos actualmente en cada actividad son: En la petici\u00f3n de cambio: Gestor de proyectos: Redmine En el cambio: Editor de textos: Geany IDE: PyCharm Sistema de control de versiones: GitLab Gestor de proyectos: Redmine En la liberaci\u00f3n: Gestor de sistemas: Migasfree Gestor de proyectos: Redmine nota Migasfree nos proporciona, de manera centralizada, conocer el estado, no s\u00f3lo del servidor migasfree, sino de cada uno de los equipos registrados en el servidor, converti\u00e9ndose en una herramienta ideal para hacer una auditor\u00eda tanto de software como de hardware. Beneficios \u00b6 Los principales beneficios que obtendr\u00e1 tu empresa, como resultado de aplicar una GCS, ser\u00edan: Reducci\u00f3n del coste de los servicios de desarrollo y mantenimiento. Optimizaci\u00f3n del uso de los recursos. Y para ti, como administrador: Dispondr\u00e1s de equipos m\u00e1s estables. Vas a pasar de ser un administrador que se echa las manos a la cabeza ante cualquier cambio a ser un administrador favorecedor del cambio, ya que dispones de las herramientas para hacer el seguimento y control de los cambios. Y, en \u00faltima instancia, vas a mejorar sustancialmente la resoluci\u00f3n de incidencias. En AZLinux empleamos como nombre de paquete el prefijo \"azl-\" m\u00e1s el nombre del paquete que queremos personalizar. \u21a9","title":"Administrando escritorios"},{"location":"part1/admin/#administrando-escritorios","text":"En todo lo que nos rodea y en todo lo que nos mueve, debemos advertir que interviene en algo la casualidad. -- Anatole France. En el cap\u00edtulo anterior, hemos hablado de la GCS y de c\u00f3mo las distribuciones GNU/Linux utilizan el sistema de paqueter\u00eda para garantizar la integridad frente al cambio. Si tienes un equipo dom\u00e9stico, todos los cambios producidos y liberados por los distintos proyectos y que hayan sido empaquetados y liberados por tu distribuci\u00f3n GNU/Linux, ser\u00e1n instalados convenientemente con el simple hecho de dar la orden al gestor de paquetes para que actualice tu sistema. Ahora bien, en una organizaci\u00f3n donde se requiera administrar los escritorios esto no es suficiente, veamos el porqu\u00e9.","title":"Administrando escritorios"},{"location":"part1/admin/#la-personalizacion","text":"La primera dificultad importante a la que se va a enfrentar un administrador, va a ser la de la personalizaci\u00f3n. Imagina que tienes que migrar y administrar 1000 equipos a GNU/Linux y que tienes en tu red un servicio NTP, requiri\u00e9ndose que todos tus escritorios est\u00e9n con la hora sincronizada con este servicio. Vas a tener que personalizar el cliente NTP en todos tus escritorios. Una manera que se suele utilizar es instalar en un equipo una distribuci\u00f3n GNU/Linux desde un DVD, editar el fichero de configuraci\u00f3n del cliente NTP y configurar la IP (o el nombre DNS) del servidor donde se encuentra el servcio NTP. Despu\u00e9s, puedes crear una imagen del disco duro con un sistema de clonado como pueda ser Clonezilla y clonar uno a uno los equipos usando dicha imagen. Con este m\u00e9todo, la personalizaci\u00f3n inicial reside en dicha imagen, pero sigamos imaginando... Un d\u00eda, a mitad de migraci\u00f3n, recibes un correo y lees: \"Alberto: El servicio NTP dejar\u00e1 de dar servicio a partir del d\u00eda 10. En su lugar vamos a disponer de un nuevo servicio, llamado QueHoraEs, que es mucho mejor porque...\" En este momento, ya estar\u00e1s pensando en los 400 equipos que tienes migrados y te echar\u00e1s las manos a la cabeza porque es evidente que este sistema de personalizaci\u00f3n no es adecuado. nota La personalizaci\u00f3n inicial es muy sencilla de realizar, pero un cambio en la personalizaci\u00f3n puede darse en cualquier momento, y tienes que estar preparado para poder realizarlo.","title":"La personalizaci\u00f3n"},{"location":"part1/admin/#gestores-de-sistemas","text":"Afortunadamente, existen unas herramientas denominadas Gestores de Sistemas ( Systems Management Systems ), que pueden ayudarnos en la administraci\u00f3n de los escritorios. Algunos de estos Gestores de Sistemas se centran en la adquisici\u00f3n del estado de los equipos como Nagios , y otros permiten automatizar tareas mediante la ejecuci\u00f3n de c\u00f3digo en los equipos de manera centralizada como Zenworks , Landscape , chef , puppet , cfengine , ansible . Los Gestores de Sistemas est\u00e1n muy influidos por las iniciativas realizadas en los sistemas de gesti\u00f3n de redes de telecomunicaciones, pudiendo realizar una o un conjunto de las siguientes tareas: Inventario hardware. Monitoreado de disponibilidad de servidores y mediciones. Inventario e instalaci\u00f3n de software. Gesti\u00f3n de antivirus y anti-malware. Monitoreado de las actividades de los usuarios. Monitoreado de la capacidad de los sistemas. Gesti\u00f3n de seguridad. Gesti\u00f3n de almacenamiento. Monitoreado de la utilizaci\u00f3n y capacidades de la red. Estas tareas podemos clasificarlas de acuerdo a FCAPS , un modelo y marco de trabajo de red de la gesti\u00f3n de telecomunicaciones de ISO para la gesti\u00f3n de redes. FCAPS es un acr\u00f3nimo de Fault, Configuration, Accounting, Performance, Security (Falla, Configuraci\u00f3n, Contabilidad, Desempe\u00f1o, Seguridad), que son las categor\u00edas en las cuales el modelo ISO define las tareas de gesti\u00f3n de redes. Fault (Fallas): Es un evento que tiene un significado negativo. Su objetivo es reconocer, aislar , corregir y registrar fallos. Puede utilizar an\u00e1lisis de tendencias para predecir errores. Cuando se detecta un fallo o evento, se env\u00eda una notificaci\u00f3n. Configuration (Configuraci\u00f3n): En el proceso de gesti\u00f3n de la configuraci\u00f3n, las operaciones diarias son monitoreadas y controladas. Los objetivos de la gesti\u00f3n de la configuraci\u00f3n son: Recolectar informaci\u00f3n. Modificar la configuraci\u00f3n. Generaci\u00f3n de reportes Gesti\u00f3n de cambios. Los cambios de Hardware y Software son controlados por este proceso: Actualizaci\u00f3n, Instalaci\u00f3n y eliminaci\u00f3n de programas. Actualizaci\u00f3n, Instalaci\u00f3n y eliminaci\u00f3n de equipamiento (impresoras, scaners, memoria, etc.) Este proceso debe tener en cuenta: Permitir acceso r\u00e1pido a la informaci\u00f3n de la configuraci\u00f3n. Facilitar la configuraci\u00f3n remota de los dispositivos. Proporcionar un inventario actualizado de Software y Hardware. Simplificaci\u00f3n de la configuraci\u00f3n de dispositivos. El seguimiento de cambios a la configuraci\u00f3n. Accounting (Contabilidad): Su objetivo es reunir las estad\u00edsticas de los usuarios. Performance (Desempe\u00f1o). Recolentando y analizando los datos de rendimiento, el estado general de los sistemas pueden ser monitorizado. Las tendencias pueden avisar de fallos de capacidad o de cuestiones relacionadas con la fiabilidad de los sistemas, antes de que en estos ocurran. Umbrales de rendimiento pueden ser establecidos para lanzar alarmas que ser\u00edan controladas por la gesti\u00f3n de fallos habitual. Las alarmas se pueden clasificar atendiendo al grado de severidad. Security (Seguridad). Se encarga de controlar el acceso a recursos de red. La seguridad de los datos puede ser conseguida con la autenticaci\u00f3n, cifrado y permisos, principalmente. nota Migasfreee atendiendo a FCAPS, tiene capacidades de Faults, Configuration y Accounting. Un ejemplo de funcionamiento t\u00edpico de un Gestor de Sistemas que incorpore tareas de Configuration usar\u00eda un lenguaje que especificar\u00eda a qu\u00e9 estado se quiere llevar a los equipos, no c\u00f3mo llegar a ese estado. En nuestro caso, ser\u00eda algo parecido a esto: aseg\u00farate de que el paquete ntp-client est\u00e1 desinstalado, aseg\u00farate de que el paquete quehoraes-client est\u00e1 instalado, aseg\u00farate de que el fichero de configuraci\u00f3n de quehoraes-client es el mismo que el que est\u00e1 en el servidor. Peri\u00f3dicamente, los clientes se conectar\u00edan al servidor para obtener este c\u00f3digo que ser\u00e1 ejecutado mediante el int\u00e9rprete propio del Gestor de Sistemas instalado en el cliente. Este sistema permite automatizar aquellas tareas que realizan a menudo los administradores de sistemas, y aunque algunos Gestores de Sistemas se las ingenian para llevar un control de versiones, mantienen una base de datos independiente a la de los backends de los gestores de paquetes, dejando en entredicho todo lo relativo a la integridad de los sistemas.","title":"Gestores de Sistemas"},{"location":"part1/admin/#empaquetando-la-personalizacion","text":"En AZLinux usamos otro m\u00e9todo: empaquetamos siempre la personalizaci\u00f3n. Para el caso del cliente \u201cQueHoraEs\u201d, crear\u00edamos el paquete azl-quehoraes-client 1 con la siguiente informaci\u00f3n: Dependencias: quehoraes-client Obsoletos: ntp-client En el script de postinstalaci\u00f3n escribir\u00edamos el siguiente c\u00f3digo: En el fichero de configuraci\u00f3n del cliente QueHoraes, modificar el valor de la entrada \u201cserver=\u201d por la IP del servidor QueHoraEs \u00a1Listo! Con esto queda garantizada la integridad frente al cambio de la personalizaci\u00f3n, aprovech\u00e1ndonos de la integridad que nos proporciona el sistema de paqueter\u00eda de nuestra distribuci\u00f3n GNU/Linux. Una vez empaquetada nuestra personalizaci\u00f3n, se hace relativamente sencillo realizar cualquier cambio posterior en ella. Pero crear un paquete desde cero para personalizar una distribuci\u00f3n GNU/Linux no es tan f\u00e1cil, no tanto por la creaci\u00f3n del paquete en s\u00ed, sino porque la personalizaci\u00f3n requiere de los conocimientos suficientes sobre el sistema GNU/Linux y sobre la propia aplicaci\u00f3n que se personaliza. nota Empaquetar la personalizaci\u00f3n nos asegura la integridad de los sistemas frente a sus cambios. Date cuenta que no es necesario ning\u00fan Gestor de Sistemas para instalar dicha personalizaci\u00f3n. S\u00f3lo necesitas el Gestor de Paquetes, y \u00e9ste siempre lo tienes disponible en cualquier distribuci\u00f3n GNU/Linux.","title":"Empaquetando la personalizaci\u00f3n"},{"location":"part1/admin/#niveles-de-personalizacion","text":"Las aplicaciones suelen incorporar dos niveles de personalizaci\u00f3n: La del usuario. La del sistema (para todos los usuarios del sistema). La personalizaci\u00f3n del usuario es prioritaria a la del sistema, siempre y cuando esta \u00faltima no sea obligatoria. Es conveniente conocer si la aplicaci\u00f3n que vas a configurar incorpora la personalizaci\u00f3n a nivel de sistema, ya que \u00e9sta es la que se tendr\u00e1 que configurar. En los casos en que las aplicaciones s\u00f3lo tengan la configuraci\u00f3n a nivel de usuario, o en los casos en los que se requiera, tendr\u00e1s que recorrer todos los usuarios para aplicar la personalizaci\u00f3n a cada uno de ellos.","title":"Niveles de personalizaci\u00f3n"},{"location":"part1/admin/#la-liberacion","text":"Es el segundo problema importante con el que vas a tener que lidiar. Por un lado, debes independizarte de los repositorios p\u00fablicos de tu distribuci\u00f3n GNU/Linux, por el simple motivo de que no puedes permitir que el control de los cambios que se instalar\u00e1n en tus m\u00e1quinas, lo tenga tu distribuci\u00f3n GNU/Linux en vez de tu organizaci\u00f3n. \u00bfImaginas que habr\u00eda pasado en AZLinux cuando OpenSuSE sustituy\u00f3 OpenOffice por LibreOffice? Cuando los usuarios hubieran encendido las m\u00e1quinas a las 8:00 de la ma\u00f1ana, se iniciar\u00eda la actualizaci\u00f3n a LibreOffice autom\u00e1ticamente pudi\u00e9ndose producir muchas incidencias. \u00bfFuncionar\u00eda todo? \u00bfNo es mejor probar LibreOffice en tu organizaci\u00f3n antes de que se instale en todos tus equipos? Tener la posibilidad de deshacer un cambio que se haya determinado como no deseado es importante. Tienes que decidir por ti mismo el software que deben tener tus usuarios y, por tanto, debes tener los gestores de paquetes configurados contra tus propios repositorios de paquetes y gestionarlos de alguna manera. Adem\u00e1s, es conveniente que puedas planificar a qui\u00e9n y cu\u00e1ndo se deben liberar dichos cambios. Imagina nuevamente el ejemplo de la sustituci\u00f3n de OpenOffice por LibreOffice. Estar\u00edamos hablando de una actualizaci\u00f3n de cerca de 500 MB por equipo que, multiplicado por todos los equipos de una organizaci\u00f3n, podr\u00eda resultar en mucho tr\u00e1fico de red. Una ventaja de planificar la liberaci\u00f3n es que permite distribuir poco a poco los cambios, de tal manera que, si hay errores, afectar\u00e1 inicialmente a muy pocos equipos, permitiendo actuar de manera m\u00e1s relajada para corregir cualquier incidencia. Por todo esto, y como los repositorios est\u00e1ndar de las distribuciones no tienen ning\u00fan mecanismo de planificaci\u00f3n de la liberaci\u00f3n, es por lo que decidimos desarrollar migasfree, extendiendo el concepto de repositorio de paquetes al concepto de despliegue: repositorio de paquetes din\u00e1mico y planificable.","title":"La liberaci\u00f3n"},{"location":"part1/admin/#despliegue-migasfree","text":"Un despliegue de migasfree es, simplemente, un repositorio est\u00e1ndar m\u00e1s la capacidad de poder especificar, de forma centralizada, cu\u00e1ndo y qui\u00e9n accede a ese repositorio. Veamos como act\u00faa migasfree en lo relativo a los repositorios: Los cambios que se quieren liberar son empaquetados y subidos a un servidor migasfree. Se crea un despliegue con los paquetes subidos y se establece a qui\u00e9n (atributos de usuario + equipo) y en qu\u00e9 momento se deben aplicar dichos cambios. El servidor migasfree crea un repositorio f\u00edsico (id\u00e9ntico al de cualquier distribuci\u00f3n GNU/Linux) con dichos paquetes, utilizando las herramientas est\u00e1ndar de creaci\u00f3n de repositorios ( createrepo para paqueter\u00eda RPM o dpkg-scanpackages para paqueter\u00eda Debian). Cuando un cliente migasfree se conecta al servidor env\u00eda sus atributos al servidor. El servidor consulta los despliegues para determinar, en funci\u00f3n de esos atributos enviados, la lista de los repositorios f\u00edsicos que tiene el cliente a su disposici\u00f3n y se los env\u00eda al cliente. El cliente migasfree configura la lista de los repositorios f\u00edsicos recibidos desde el servidor en el Gestor de Paquetes. A continuaci\u00f3n, el cliente migasfree da instrucciones al Gestor de Paquetes para que se produzca la eliminaci\u00f3n, instalaci\u00f3n y actualizaci\u00f3n de los paquetes desde los repositorios f\u00edsicos.","title":"Despliegue Migasfree"},{"location":"part1/admin/#la-gcs-en-tu-organizacion","text":"En el cap\u00edtulo anterior, hemos visto el proceso de la GCS en los distintos proyectos de software libre y tambi\u00e9n en las distribuciones GNU/Linux. Pues bien, en una organizaci\u00f3n tambi\u00e9n debe realizarse el proceso de la GCS. Proceso GCS en tu organizaci\u00f3n con migasfree Un usuario hace una petici\u00f3n de cambio. Un desarrollador programa el cambio de la configuraci\u00f3n software dentro de un paquete y lo sube a un servidor migasfree. La liberaci\u00f3n es realizada por el servidor migasfree a los ordenadores requeridos. En AZLinux realizamos nuestra propia GCS y vemos como, de nuevo, se repiten las mismas actividades: petici\u00f3n de cambio, cambio y liberaci\u00f3n. Usamos dos tipos de peticiones de cambio: Peticiones de cambio Actualizaci\u00f3n de aplicaciones . Si por ejemplo recibimos una petici\u00f3n para actualizar Mozilla Firefox, descargamos desde los repositorios de la distribuci\u00f3n la versi\u00f3n deseada. La probamos en laboratorio registrando cualquier informaci\u00f3n relevante en la petici\u00f3n de cambio. Finalmente, si todo es correcto, se liberan los paquetes a trav\u00e9s de un despliegue migasfree planificando su distribuci\u00f3n (ver A en el diagrama 'Peticiones de cambio'). Personalizaci\u00f3n de aplicaciones . Se produce por ejemplo cuando llega una petici\u00f3n de cambio para a\u00f1adir un motor de b\u00fasqueda de sin\u00f3nimos a Mozilla Firefox. Introducimos entonces en un paquete propio de AZLinux (azl-firefox) el c\u00f3digo que instala dicho motor de b\u00fasqueda y liberamos dicho paquete en un despliegue de migasfree planificando su distribuci\u00f3n (ver B en el diagrama 'Peticiones de cambio'). Las herramientas que usamos actualmente en cada actividad son: En la petici\u00f3n de cambio: Gestor de proyectos: Redmine En el cambio: Editor de textos: Geany IDE: PyCharm Sistema de control de versiones: GitLab Gestor de proyectos: Redmine En la liberaci\u00f3n: Gestor de sistemas: Migasfree Gestor de proyectos: Redmine nota Migasfree nos proporciona, de manera centralizada, conocer el estado, no s\u00f3lo del servidor migasfree, sino de cada uno de los equipos registrados en el servidor, converti\u00e9ndose en una herramienta ideal para hacer una auditor\u00eda tanto de software como de hardware.","title":"La GCS en tu organizaci\u00f3n"},{"location":"part1/admin/#beneficios","text":"Los principales beneficios que obtendr\u00e1 tu empresa, como resultado de aplicar una GCS, ser\u00edan: Reducci\u00f3n del coste de los servicios de desarrollo y mantenimiento. Optimizaci\u00f3n del uso de los recursos. Y para ti, como administrador: Dispondr\u00e1s de equipos m\u00e1s estables. Vas a pasar de ser un administrador que se echa las manos a la cabeza ante cualquier cambio a ser un administrador favorecedor del cambio, ya que dispones de las herramientas para hacer el seguimento y control de los cambios. Y, en \u00faltima instancia, vas a mejorar sustancialmente la resoluci\u00f3n de incidencias. En AZLinux empleamos como nombre de paquete el prefijo \"azl-\" m\u00e1s el nombre del paquete que queremos personalizar. \u21a9","title":"Beneficios"},{"location":"part1/caracteristicas/","text":"Caracter\u00edsticas de migasfree \u00b6 Las cosas no se dicen, se hacen, porque al hacerlas se dicen solas. -- Woody Allen. El nacimiento de migasfree \u00b6 En el a\u00f1o 2005, todos grupos pol\u00edticos del Ayuntamiento de Zaragoza manifestaron por unanimidad, en pleno de gobierno municipal, apoyar las pol\u00edticas de uso de Software Libre y, en concreto, el fomento de los programas de SL en el entorno de escritorio del empleado municipal. La Direcci\u00f3n General de Ciencia y Tecnolog\u00eda asume, inicia y potencia este importante reto. 1 Este proyecto se planific\u00f3 en tres etapas: Primera: Migrar a aplicaciones que presentaban un impacto bajo sobre usuarios y t\u00e9cnicos en el Sistema Operativo actual (por aquel entonces, Microsoft Windows XP). Segunda: Migrar la plataforma ofim\u00e1tica Microsoft Office 97 por la suite libre OpenOffice. Tercera: Sustituir el SO Windows XP por un sistema operativo basado en Linux. Esta etapa se inici\u00f3 en 2008 y todav\u00eda sigue abierta. Para iniciar la tercera etapa, se tuvieron que realizar los primeros prototipos de lo que llegar\u00eda a ser la primera versi\u00f3n de AZLinux. En estos prototipos, la personalizaci\u00f3n se realizaba manualmente, en un equipo cuya imagen del disco duro nos serv\u00eda para clonarla en otros equipos y hacer las pertinentes pruebas. En aquel tiempo, aprendimos a empaquetar y empezamos a introducir nuestra personalizaci\u00f3n en nuestros propios paquetes. La ventaja frente a la personalizaci\u00f3n manual era muy significativa. Con los primeras migraciones reales, nos surgi\u00f3 la necesidad de actualizar nuestros paquetes y, despu\u00e9s de probar sin \u00e9xito Zenworks for Linux , decidimos crear nuestros propios repositorios de paquetes. Quisimos emular lo que ya estabamos haciendo con los escritorios XP, esto es, distribuir software bas\u00e1ndonos en el contexto al que pertenec\u00eda un usuario en nuestro LDAP. Con un poco de Bash scripting , en Mayo de 2009, implementamos lo que ser\u00edan unos repositorios din\u00e1micos que se configuraban en el cliente en funci\u00f3n del contexto. Esto fue, sin duda, una gran idea, pero la gesti\u00f3n de estos repositorios din\u00e1micos era manual y muy propensa a errores. La gesti\u00f3n de estos repositorios din\u00e1micos recay\u00f3 en m\u00ed, por lo que decid\u00ed simplificarla inmediatamente y crear el primer prototipo de migasfree . Dos semanas de programaci\u00f3n, en horas no laborales, fueron suficientes para presentar a mis compa\u00f1eros de trabajo un prototipo, que fue puesto en producci\u00f3n en Junio de 2009. nota Una de las ventajas de trabajar con software libre es la facilidad con la que puedes crear proyectos ya que puedes mezclar, como si de piezas de puzzle fueran, diferentes componentes sin preocuparte en exceso del tema de las licencias. Un ejemplo de esto ha sido la incorporaci\u00f3n de la funcionalidad de captura del hardware en los equipos. Utilic\u00e9 el comando lshw y unas pocas l\u00edneas de c\u00f3digo para adaptarlo a la base de datos de migasfree. Versiones \u00b6 El primer prototipo s\u00f3lo trabajaba con paqueter\u00eda rpm y gestor de paquetes yum , y el c\u00f3digo bash que se ejecutaba en el cliente se generaba en el servidor. Despu\u00e9s de usar migasfree un tiempo en producci\u00f3n, vimos que podr\u00eda ser un buen sistema para otras organizaciones, y mis compa\u00f1eros me dieron el impulso necesario para publicar el c\u00f3digo. As\u00ed, durante el verano de 2009, reorganice los men\u00fas, limpi\u00e9 un poco el c\u00f3digo, e hice que migasfree pudiera trabajar con distintas versiones de SO y de sistemas de paqueter\u00eda. Fue publicado en github en abril de 2010 y bautizado como \"migasfree with fried eggs\", porque mis compa\u00f1eros dec\u00edan que el logotipo se parec\u00eda a un huevo frito. \u00a1Qu\u00e9 sabr\u00e1n ellos de Arte! En Noviembre de 2011, Jose Antonio Chavarr\u00eda, desarrollador de AZLinux, reescribe y publica el cliente migasfree . Realiz\u00f3 tambi\u00e9n grandes cambios en la estructura del servidor. Tuvimos que definir la API con la que el cliente y el servidor deb\u00edan comunicarse. Usamos claves asim\u00e9tricas para dotar de seguridad al sistema. Esta nueva versi\u00f3n fue denominada \"migasfree no trans\" supongo que por incorporar un c\u00f3digo m\u00e1s \"limpio\", por decirlo de alguna manera. Poco a poco, fuimos dotando al sistema de nuevas funcionalidades, y para principios de 2013, Jose Antonio Chavarr\u00eda cambi\u00f3 la navegaci\u00f3n y aspecto del servidor. Esta nueva versi\u00f3n fue denominada \"migasfree with chocolate\". En febrero de 2014, liberamos la versi\u00f3n 4 del servidor ( migasfree grape edition ). Esta versi\u00f3n hace uso de bootstrap con el fin de dotar a la aplicaci\u00f3n de un dise\u00f1o web adaptable a distintos dispositivos. Adem\u00e1s, incorpora distintas mejoras de todo tipo. Actualmente es la vers\u00ed\u00f3n que utilizamos en AZLinux. En 2015 nos sumamos a una ola disruptora: docker . Esto nos ha liberado de tener que pelearnos con las dependencias de los componentes que utilizamos en el servidor y de tener que publicar los paquetes que generabamos para distintas distribuciones GNU/Linux (utilizamos versiones de componentes que a\u00fan no han sido liberados y esto nos creaba aut\u00e9nticos quebraderos de cabeza). Con docker hemos conseguido colocar el servidor y sus dependencias en un contenedor virtual (un debian) que puede ejecutarse en cualquier servidor GNU/Linux. Esto nos ha proporcionado una flexibilidad y portabilidad para ejecutar el servidor de una forma muy simple tanto en un equipo f\u00edsico como en la nube. Caracter\u00edsticas \u00b6 Migasfree es simple, y hacemos esfuerzos por mantenerlo as\u00ed. Tendemos a lo que denominamos gesti\u00f3n cero, es decir, procuramos que la gesti\u00f3n de a\u00f1adir nuevas entradas en migasfree no requiera ninguna tarea administrativa. Est\u00e1 basado en la arquitectura cliente/servidor. Es seguro. Las comunicaciones entre cliente y servidor est\u00e1n firmadas con claves asim\u00e9tricas. Es adaptable. Puedes programar tus propias f\u00f3rmulas para obtener los atributos de los ordenadores y usuarios seg\u00fan tus intereses. Es Software Libre licenciado bajo la GNU Public License . Almacena tanto el inventario software y hardware de los equipos, permitiendo hacer consultas sobre ellos. Almacena tambi\u00e9n informaci\u00f3n de los equipos tales como sus atributos, sincronizaciones, migraciones que se han realizado, etc. Consultas. Puedes programar consultas contra la base de datos de migasfree. Gesti\u00f3n de errores. Los errores que se producen en los equipos son enviados al servidor y almacenados, permitiendo hacer su seguimiento. Gesti\u00f3n de fallas. Puedes programar c\u00f3digo que ser\u00e1 ejecutado en los clientes con el fin de obtener informaci\u00f3n de los equipos. Alertas. Permite conocer en tiempo real el estado del sistema facilitando al administrador su trabajo. Estad\u00edsticas. Principales componentes empleados \u00b6 Lenguaje de programaci\u00f3n Python . Django un framework de desarrollo web. Servidor web Nginx . Chaussette como servidor WSGI Base de datos Posgresql . Informaci\u00f3n Hardware: Lshw . Eduardo Romero Moreno, Migraci\u00f3n Escritorio Software Libre , 2011 \u21a9","title":"Caracteristicas de migasfree"},{"location":"part1/caracteristicas/#caracteristicas-de-migasfree","text":"Las cosas no se dicen, se hacen, porque al hacerlas se dicen solas. -- Woody Allen.","title":"Caracter\u00edsticas de migasfree"},{"location":"part1/caracteristicas/#el-nacimiento-de-migasfree","text":"En el a\u00f1o 2005, todos grupos pol\u00edticos del Ayuntamiento de Zaragoza manifestaron por unanimidad, en pleno de gobierno municipal, apoyar las pol\u00edticas de uso de Software Libre y, en concreto, el fomento de los programas de SL en el entorno de escritorio del empleado municipal. La Direcci\u00f3n General de Ciencia y Tecnolog\u00eda asume, inicia y potencia este importante reto. 1 Este proyecto se planific\u00f3 en tres etapas: Primera: Migrar a aplicaciones que presentaban un impacto bajo sobre usuarios y t\u00e9cnicos en el Sistema Operativo actual (por aquel entonces, Microsoft Windows XP). Segunda: Migrar la plataforma ofim\u00e1tica Microsoft Office 97 por la suite libre OpenOffice. Tercera: Sustituir el SO Windows XP por un sistema operativo basado en Linux. Esta etapa se inici\u00f3 en 2008 y todav\u00eda sigue abierta. Para iniciar la tercera etapa, se tuvieron que realizar los primeros prototipos de lo que llegar\u00eda a ser la primera versi\u00f3n de AZLinux. En estos prototipos, la personalizaci\u00f3n se realizaba manualmente, en un equipo cuya imagen del disco duro nos serv\u00eda para clonarla en otros equipos y hacer las pertinentes pruebas. En aquel tiempo, aprendimos a empaquetar y empezamos a introducir nuestra personalizaci\u00f3n en nuestros propios paquetes. La ventaja frente a la personalizaci\u00f3n manual era muy significativa. Con los primeras migraciones reales, nos surgi\u00f3 la necesidad de actualizar nuestros paquetes y, despu\u00e9s de probar sin \u00e9xito Zenworks for Linux , decidimos crear nuestros propios repositorios de paquetes. Quisimos emular lo que ya estabamos haciendo con los escritorios XP, esto es, distribuir software bas\u00e1ndonos en el contexto al que pertenec\u00eda un usuario en nuestro LDAP. Con un poco de Bash scripting , en Mayo de 2009, implementamos lo que ser\u00edan unos repositorios din\u00e1micos que se configuraban en el cliente en funci\u00f3n del contexto. Esto fue, sin duda, una gran idea, pero la gesti\u00f3n de estos repositorios din\u00e1micos era manual y muy propensa a errores. La gesti\u00f3n de estos repositorios din\u00e1micos recay\u00f3 en m\u00ed, por lo que decid\u00ed simplificarla inmediatamente y crear el primer prototipo de migasfree . Dos semanas de programaci\u00f3n, en horas no laborales, fueron suficientes para presentar a mis compa\u00f1eros de trabajo un prototipo, que fue puesto en producci\u00f3n en Junio de 2009. nota Una de las ventajas de trabajar con software libre es la facilidad con la que puedes crear proyectos ya que puedes mezclar, como si de piezas de puzzle fueran, diferentes componentes sin preocuparte en exceso del tema de las licencias. Un ejemplo de esto ha sido la incorporaci\u00f3n de la funcionalidad de captura del hardware en los equipos. Utilic\u00e9 el comando lshw y unas pocas l\u00edneas de c\u00f3digo para adaptarlo a la base de datos de migasfree.","title":"El nacimiento de migasfree"},{"location":"part1/caracteristicas/#versiones","text":"El primer prototipo s\u00f3lo trabajaba con paqueter\u00eda rpm y gestor de paquetes yum , y el c\u00f3digo bash que se ejecutaba en el cliente se generaba en el servidor. Despu\u00e9s de usar migasfree un tiempo en producci\u00f3n, vimos que podr\u00eda ser un buen sistema para otras organizaciones, y mis compa\u00f1eros me dieron el impulso necesario para publicar el c\u00f3digo. As\u00ed, durante el verano de 2009, reorganice los men\u00fas, limpi\u00e9 un poco el c\u00f3digo, e hice que migasfree pudiera trabajar con distintas versiones de SO y de sistemas de paqueter\u00eda. Fue publicado en github en abril de 2010 y bautizado como \"migasfree with fried eggs\", porque mis compa\u00f1eros dec\u00edan que el logotipo se parec\u00eda a un huevo frito. \u00a1Qu\u00e9 sabr\u00e1n ellos de Arte! En Noviembre de 2011, Jose Antonio Chavarr\u00eda, desarrollador de AZLinux, reescribe y publica el cliente migasfree . Realiz\u00f3 tambi\u00e9n grandes cambios en la estructura del servidor. Tuvimos que definir la API con la que el cliente y el servidor deb\u00edan comunicarse. Usamos claves asim\u00e9tricas para dotar de seguridad al sistema. Esta nueva versi\u00f3n fue denominada \"migasfree no trans\" supongo que por incorporar un c\u00f3digo m\u00e1s \"limpio\", por decirlo de alguna manera. Poco a poco, fuimos dotando al sistema de nuevas funcionalidades, y para principios de 2013, Jose Antonio Chavarr\u00eda cambi\u00f3 la navegaci\u00f3n y aspecto del servidor. Esta nueva versi\u00f3n fue denominada \"migasfree with chocolate\". En febrero de 2014, liberamos la versi\u00f3n 4 del servidor ( migasfree grape edition ). Esta versi\u00f3n hace uso de bootstrap con el fin de dotar a la aplicaci\u00f3n de un dise\u00f1o web adaptable a distintos dispositivos. Adem\u00e1s, incorpora distintas mejoras de todo tipo. Actualmente es la vers\u00ed\u00f3n que utilizamos en AZLinux. En 2015 nos sumamos a una ola disruptora: docker . Esto nos ha liberado de tener que pelearnos con las dependencias de los componentes que utilizamos en el servidor y de tener que publicar los paquetes que generabamos para distintas distribuciones GNU/Linux (utilizamos versiones de componentes que a\u00fan no han sido liberados y esto nos creaba aut\u00e9nticos quebraderos de cabeza). Con docker hemos conseguido colocar el servidor y sus dependencias en un contenedor virtual (un debian) que puede ejecutarse en cualquier servidor GNU/Linux. Esto nos ha proporcionado una flexibilidad y portabilidad para ejecutar el servidor de una forma muy simple tanto en un equipo f\u00edsico como en la nube.","title":"Versiones"},{"location":"part1/caracteristicas/#caracteristicas","text":"Migasfree es simple, y hacemos esfuerzos por mantenerlo as\u00ed. Tendemos a lo que denominamos gesti\u00f3n cero, es decir, procuramos que la gesti\u00f3n de a\u00f1adir nuevas entradas en migasfree no requiera ninguna tarea administrativa. Est\u00e1 basado en la arquitectura cliente/servidor. Es seguro. Las comunicaciones entre cliente y servidor est\u00e1n firmadas con claves asim\u00e9tricas. Es adaptable. Puedes programar tus propias f\u00f3rmulas para obtener los atributos de los ordenadores y usuarios seg\u00fan tus intereses. Es Software Libre licenciado bajo la GNU Public License . Almacena tanto el inventario software y hardware de los equipos, permitiendo hacer consultas sobre ellos. Almacena tambi\u00e9n informaci\u00f3n de los equipos tales como sus atributos, sincronizaciones, migraciones que se han realizado, etc. Consultas. Puedes programar consultas contra la base de datos de migasfree. Gesti\u00f3n de errores. Los errores que se producen en los equipos son enviados al servidor y almacenados, permitiendo hacer su seguimiento. Gesti\u00f3n de fallas. Puedes programar c\u00f3digo que ser\u00e1 ejecutado en los clientes con el fin de obtener informaci\u00f3n de los equipos. Alertas. Permite conocer en tiempo real el estado del sistema facilitando al administrador su trabajo. Estad\u00edsticas.","title":"Caracter\u00edsticas"},{"location":"part1/caracteristicas/#principales-componentes-empleados","text":"Lenguaje de programaci\u00f3n Python . Django un framework de desarrollo web. Servidor web Nginx . Chaussette como servidor WSGI Base de datos Posgresql . Informaci\u00f3n Hardware: Lshw . Eduardo Romero Moreno, Migraci\u00f3n Escritorio Software Libre , 2011 \u21a9","title":"Principales componentes empleados"},{"location":"part1/gcs/","text":"PARTE 1 Introducci\u00f3n Gesti\u00f3n de la Configuraci\u00f3n Software \u00b6 Nada es permanente a excepci\u00f3n del cambio. -- Her\u00e1clito de \u00c9feso. Estamos acostumbrados a actualizar peri\u00f3dicamente nuestras aplicaciones: los sistemas se hacen obsoletos r\u00e1pidamente, aparecen nuevas tecnolog\u00edas, hay errores que son resueltos, surgen nuevas necesidades. Sin importar en qu\u00e9 momento del ciclo de vida del sistema nos encontremos, el sistema cambiar\u00e1, y el deseo de cambiarlo persistir\u00e1 a lo largo de todo el ciclo de vida. 1 Por tanto, el cambio en el software es inevitable y es deseable que ocurra. Es inevitable porque los desarrolladores cometemos errores y es mediante una modificaci\u00f3n como los corregimos. A este tipo de cambios los llamamos correctivos . Por otro lado, el cambio es deseable ya que a menudo queremos incorporar nuevas funcionalidades al software o mejorar aquellas que ya exist\u00edan. Mediante los cambios evolutivos es como mejoramos el software. El cambio genera confusi\u00f3n e incertidumbre y se produce desde que concebimos, constru\u00edmos y tambi\u00e9n mientras mantenemos un proyecto software. El gran reto reside precisamente en gestionar de forma controlada dichos cambios usando alguna estrategia que los favorezca y facilite. De esto trata precisamente la Gesti\u00f3n de la Configuraci\u00f3n Software (GCS), un proceso de la Ingenier\u00eda del Software que identifica, hace seguimiento y controla cada uno de los cambios que se producen en los sistemas. Objetivo \u00b6 El objetivo de la GCS es conservar la integridad de los sistemas frente a los cambios. Un sistema ser\u00e1 \u00edntegro frente al cambio si: Mantiene correctamente las relaciones entre los distintos cambios a medida que se van produciendo (el t\u00edpico problema de dependencias entre elementos). Permite la auditor\u00eda de cambios (conocimiento del estado de un sistema al que se le han ido aplicando cambios sucesivamente). El proceso \u00b6 El proceso de la GCS es un conjunto de actividades que nos permitir\u00e1 garantizar dicha integridad, y que podemos resumir en: Petici\u00f3n de cambio. Cambio. Liberaci\u00f3n. Petici\u00f3n de cambio \u00b6 Cuando se nos reporta un error o una petici\u00f3n de mejora, lo primero que hacemos es identificar el Elemento de Configuraci\u00f3n Software (ECS) al que se refiere. Un ECS es cualquier objeto software sometido a la GCS. Puede ser un manual de usuario, una especificaci\u00f3n, un conjunto de datos para realizar tests, una aplicaci\u00f3n, una librer\u00eda, incluso las herramientas que se usan para realizar dichos cambios, etc. Una vez identificado el ECS se registra la petici\u00f3n de cambio. Las herramientas t\u00edpicas para registrar y hacer el seguimiento del cambio son los denominados gestores de proyectos (Redmine, Bugzilla, Tracker, etc.) Cada petici\u00f3n de cambio es analizada m\u00e1s tarde pudiendo ser aceptada o rechazada. Si es rechazada, se avisa al informador y se cierra la petici\u00f3n. Si es aceptada, se asigna la petici\u00f3n a alguien para que realice dicho cambio. Cambio \u00b6 El cambio es la actividad que modifica el ECS, generando una nueva versi\u00f3n del ECS. En esta actividad se utilizan un conjunto muy diverso de herramientas, desde procesadores y editores de texto, sistemas de control de versiones, entornos de desarrollo integrados (IDE), depuradores, compiladores... Liberaci\u00f3n \u00b6 La liberaci\u00f3n es la actividad de situar la nueva versi\u00f3n del ECS generada, en un repositorio o almac\u00e9n para que posteriormente los clientes del ECS puedan acceder a \u00e9l e instalarlo. Elemento de Configuraci\u00f3n Software \u00b6 Si observamos como los diferentes proyectos de Software Libre realizan la GCS, vemos que realizan las actividades mencionadas liberando finalmente el c\u00f3digo fuente del proyecto en Internet. Estos proyectos trabajan con distintos tipos de ECS (.png, .txt, .py, .c, .bin, etc.) usando los Sistemas de Control de Versiones , junto con las plataformas de desarrollo colaborativo como sourceforge.net, github.com, etc. Este c\u00f3digo fuente ser\u00e1 posteriormente compilado por los mantenedores de las distribuciones GNU/Linux (Fedora, Red Hat, Debian, Ubuntu, etc.), realizando su propia GCS. Pero a diferencia de los primeros, las Distribuciones GNU/Linux s\u00f3lo trabajan sobre un \u00fanico tipo de ECS: el paquete , donde introducir\u00e1n el programa ya compilado. Este simple hecho permite garantizar la integridad frente a los cambios de forma eficaz y sencilla, como veremos a continuaci\u00f3n. El paquete \u00b6 Un paquete es un contenedor que encapsula un conjunto de ECS liberados por un determinado proyecto, junto a su metainformaci\u00f3n. Contendr\u00e1, por tanto, el programa compilado para una determinada distribuci\u00f3n y arquitectura, m\u00e1s un amplio conjunto de informaci\u00f3n, como puede ser: El autor del programa. La direcci\u00f3n del repositorio del proyecto. La versi\u00f3n del ECS. La arquitectura. El nombre y direcci\u00f3n e-mail del empaquetador. La fecha de empaquetado. El nombre del equipo en que se produjo el empaquetado. Una descripci\u00f3n corta del contenido del paquete. Una descripci\u00f3n larga. Pero, adem\u00e1s, suelen incluir: Dependencias con otros paquetes. C\u00f3digo a ejecutar antes y despu\u00e9s de: Instalar. Actualizar. Eliminar el paquete. Una vez que un mantenedor de una Distribuci\u00f3n GNU/Linux ha creado un paquete, lo libera poni\u00e9ndolo en un repositorio p\u00fablico a disposici\u00f3n de los clientes. Puesta en producci\u00f3n \u00b6 Los encargados de aplicar los cambios son los programas denominados gestores de paquetes tales como yum , zypper o apt . Un gestor de paquetes es un programa que permite poner en producci\u00f3n los cambios que han sido liberados en los repositorios. La actualizaci\u00f3n de un equipo se realiza comparando las versiones de los paquetes instalados con los paquetes de los repositorios p\u00fablicos, detectando los que han aumentado su versi\u00f3n, resolviendo sus dependencias y finalmente, si no hay conflictos, obtienen desde los repositorios los paquetes necesarios. Una vez han descargado los paquetes, dan \u00f3rdenes a los backends ( rpm , dpkg , etc.), para que se produzca la desinstalaci\u00f3n de los paquetes antiguos y la instalaci\u00f3n de los nuevos. Los backends abren el paquete, y grosso modo: 1. Extraen los ficheros del programa copi\u00e1ndolos en el sistema, y ejecutan adem\u00e1s el c\u00f3digo programado para antes y despu\u00e9s de la actualizaci\u00f3n. 2. La metainformaci\u00f3n es extra\u00edda del paquete y se almacena en la base de datos del backend. Dec\u00eda Ian Murdock, fundador de Debian, que el gran aporte del software libre a la industria, ha sido precisamente la invenci\u00f3n del sistema de paqueter\u00eda (paquete, repositorio, gestor de paquetes). Y no es para menos, ya que este sistema nos proporciona los dos requisitos necesarios que garantizan la integridad frente a los cambios: El control de dependencias, mediante el gestor de paquetes. La auditor\u00eda, mediante las consultas a la base de datos del backend. nota Si est\u00e1s acostumbrado a instalar programas mediante el t\u00edpico \u201c./configure, make, install\u201d, tienes que ser consciente que est\u00e1s rompiendo la integridad frente a los cambios, ya que la base de datos del backend no es actualizada con este procedimiento. Todo lo que no sea instalar programas mediante el gestor de paquetes o el backend, rompe la integridad. A continuaci\u00f3n, se muestra una tabla con las operaciones m\u00e1s comunes que puedes emplear sobre algunos de los gestores de paquetes m\u00e1s conocidos: Operaciones Gestores apt yum zypper Actualizar listado de paquetes disponibles apt-get update yum check-update zypper refresh Actualizar sistema apt-get upgrade yum update zypper update Instalar paquete apt-get install <pkg> yum install <pkg> zypper install<pkg> Borrar paquete apt-get remove <pkg> yum erase <pkg> zypper remove <pkg> Buscar paquete apt-cache yum list zypper search Buscar repositorio de un paquete apt-cache madison <pkg> yum whatprovides <pkg> zypper whatprovides <pkg> Veamos ahora las operaciones m\u00e1s comunes que puedes emplear sobre los backends dpkg y rpm : Operaciones Backends dpkg rpm Instalar fichero de paquete dpkg -i <file.deb> rpm -ivh <file.rpm> Borrar paquete dpkg -r <pkg> rpm -e <pkg> Paquete que instala el fichero <file> dpkg -S <file> rpm -qf <file> Ficheros del paquete dpkg -L <pkg> rpm -ql <pkg> Descripci\u00f3n del paquete dpkg -s <pkg> rpm -qi <pkg> Paquetes instalados dpkg -l rpm -qa Primera ley de la Ingenier\u00eda de Sistemas, Software Configuration Management, Bersoff, Henderson & Siegel, Prentice-Hall, 1980 \u21a9","title":"Gesti\u00f3n de la Configuraci\u00f3n Software"},{"location":"part1/gcs/#gestion-de-la-configuracion-software","text":"Nada es permanente a excepci\u00f3n del cambio. -- Her\u00e1clito de \u00c9feso. Estamos acostumbrados a actualizar peri\u00f3dicamente nuestras aplicaciones: los sistemas se hacen obsoletos r\u00e1pidamente, aparecen nuevas tecnolog\u00edas, hay errores que son resueltos, surgen nuevas necesidades. Sin importar en qu\u00e9 momento del ciclo de vida del sistema nos encontremos, el sistema cambiar\u00e1, y el deseo de cambiarlo persistir\u00e1 a lo largo de todo el ciclo de vida. 1 Por tanto, el cambio en el software es inevitable y es deseable que ocurra. Es inevitable porque los desarrolladores cometemos errores y es mediante una modificaci\u00f3n como los corregimos. A este tipo de cambios los llamamos correctivos . Por otro lado, el cambio es deseable ya que a menudo queremos incorporar nuevas funcionalidades al software o mejorar aquellas que ya exist\u00edan. Mediante los cambios evolutivos es como mejoramos el software. El cambio genera confusi\u00f3n e incertidumbre y se produce desde que concebimos, constru\u00edmos y tambi\u00e9n mientras mantenemos un proyecto software. El gran reto reside precisamente en gestionar de forma controlada dichos cambios usando alguna estrategia que los favorezca y facilite. De esto trata precisamente la Gesti\u00f3n de la Configuraci\u00f3n Software (GCS), un proceso de la Ingenier\u00eda del Software que identifica, hace seguimiento y controla cada uno de los cambios que se producen en los sistemas.","title":"Gesti\u00f3n de la Configuraci\u00f3n Software"},{"location":"part1/gcs/#objetivo","text":"El objetivo de la GCS es conservar la integridad de los sistemas frente a los cambios. Un sistema ser\u00e1 \u00edntegro frente al cambio si: Mantiene correctamente las relaciones entre los distintos cambios a medida que se van produciendo (el t\u00edpico problema de dependencias entre elementos). Permite la auditor\u00eda de cambios (conocimiento del estado de un sistema al que se le han ido aplicando cambios sucesivamente).","title":"Objetivo"},{"location":"part1/gcs/#el-proceso","text":"El proceso de la GCS es un conjunto de actividades que nos permitir\u00e1 garantizar dicha integridad, y que podemos resumir en: Petici\u00f3n de cambio. Cambio. Liberaci\u00f3n.","title":"El proceso"},{"location":"part1/gcs/#peticion-de-cambio","text":"Cuando se nos reporta un error o una petici\u00f3n de mejora, lo primero que hacemos es identificar el Elemento de Configuraci\u00f3n Software (ECS) al que se refiere. Un ECS es cualquier objeto software sometido a la GCS. Puede ser un manual de usuario, una especificaci\u00f3n, un conjunto de datos para realizar tests, una aplicaci\u00f3n, una librer\u00eda, incluso las herramientas que se usan para realizar dichos cambios, etc. Una vez identificado el ECS se registra la petici\u00f3n de cambio. Las herramientas t\u00edpicas para registrar y hacer el seguimiento del cambio son los denominados gestores de proyectos (Redmine, Bugzilla, Tracker, etc.) Cada petici\u00f3n de cambio es analizada m\u00e1s tarde pudiendo ser aceptada o rechazada. Si es rechazada, se avisa al informador y se cierra la petici\u00f3n. Si es aceptada, se asigna la petici\u00f3n a alguien para que realice dicho cambio.","title":"Petici\u00f3n de cambio"},{"location":"part1/gcs/#cambio","text":"El cambio es la actividad que modifica el ECS, generando una nueva versi\u00f3n del ECS. En esta actividad se utilizan un conjunto muy diverso de herramientas, desde procesadores y editores de texto, sistemas de control de versiones, entornos de desarrollo integrados (IDE), depuradores, compiladores...","title":"Cambio"},{"location":"part1/gcs/#liberacion","text":"La liberaci\u00f3n es la actividad de situar la nueva versi\u00f3n del ECS generada, en un repositorio o almac\u00e9n para que posteriormente los clientes del ECS puedan acceder a \u00e9l e instalarlo.","title":"Liberaci\u00f3n"},{"location":"part1/gcs/#elemento-de-configuracion-software","text":"Si observamos como los diferentes proyectos de Software Libre realizan la GCS, vemos que realizan las actividades mencionadas liberando finalmente el c\u00f3digo fuente del proyecto en Internet. Estos proyectos trabajan con distintos tipos de ECS (.png, .txt, .py, .c, .bin, etc.) usando los Sistemas de Control de Versiones , junto con las plataformas de desarrollo colaborativo como sourceforge.net, github.com, etc. Este c\u00f3digo fuente ser\u00e1 posteriormente compilado por los mantenedores de las distribuciones GNU/Linux (Fedora, Red Hat, Debian, Ubuntu, etc.), realizando su propia GCS. Pero a diferencia de los primeros, las Distribuciones GNU/Linux s\u00f3lo trabajan sobre un \u00fanico tipo de ECS: el paquete , donde introducir\u00e1n el programa ya compilado. Este simple hecho permite garantizar la integridad frente a los cambios de forma eficaz y sencilla, como veremos a continuaci\u00f3n.","title":"Elemento de Configuraci\u00f3n Software"},{"location":"part1/gcs/#el-paquete","text":"Un paquete es un contenedor que encapsula un conjunto de ECS liberados por un determinado proyecto, junto a su metainformaci\u00f3n. Contendr\u00e1, por tanto, el programa compilado para una determinada distribuci\u00f3n y arquitectura, m\u00e1s un amplio conjunto de informaci\u00f3n, como puede ser: El autor del programa. La direcci\u00f3n del repositorio del proyecto. La versi\u00f3n del ECS. La arquitectura. El nombre y direcci\u00f3n e-mail del empaquetador. La fecha de empaquetado. El nombre del equipo en que se produjo el empaquetado. Una descripci\u00f3n corta del contenido del paquete. Una descripci\u00f3n larga. Pero, adem\u00e1s, suelen incluir: Dependencias con otros paquetes. C\u00f3digo a ejecutar antes y despu\u00e9s de: Instalar. Actualizar. Eliminar el paquete. Una vez que un mantenedor de una Distribuci\u00f3n GNU/Linux ha creado un paquete, lo libera poni\u00e9ndolo en un repositorio p\u00fablico a disposici\u00f3n de los clientes.","title":"El paquete"},{"location":"part1/gcs/#puesta-en-produccion","text":"Los encargados de aplicar los cambios son los programas denominados gestores de paquetes tales como yum , zypper o apt . Un gestor de paquetes es un programa que permite poner en producci\u00f3n los cambios que han sido liberados en los repositorios. La actualizaci\u00f3n de un equipo se realiza comparando las versiones de los paquetes instalados con los paquetes de los repositorios p\u00fablicos, detectando los que han aumentado su versi\u00f3n, resolviendo sus dependencias y finalmente, si no hay conflictos, obtienen desde los repositorios los paquetes necesarios. Una vez han descargado los paquetes, dan \u00f3rdenes a los backends ( rpm , dpkg , etc.), para que se produzca la desinstalaci\u00f3n de los paquetes antiguos y la instalaci\u00f3n de los nuevos. Los backends abren el paquete, y grosso modo: 1. Extraen los ficheros del programa copi\u00e1ndolos en el sistema, y ejecutan adem\u00e1s el c\u00f3digo programado para antes y despu\u00e9s de la actualizaci\u00f3n. 2. La metainformaci\u00f3n es extra\u00edda del paquete y se almacena en la base de datos del backend. Dec\u00eda Ian Murdock, fundador de Debian, que el gran aporte del software libre a la industria, ha sido precisamente la invenci\u00f3n del sistema de paqueter\u00eda (paquete, repositorio, gestor de paquetes). Y no es para menos, ya que este sistema nos proporciona los dos requisitos necesarios que garantizan la integridad frente a los cambios: El control de dependencias, mediante el gestor de paquetes. La auditor\u00eda, mediante las consultas a la base de datos del backend. nota Si est\u00e1s acostumbrado a instalar programas mediante el t\u00edpico \u201c./configure, make, install\u201d, tienes que ser consciente que est\u00e1s rompiendo la integridad frente a los cambios, ya que la base de datos del backend no es actualizada con este procedimiento. Todo lo que no sea instalar programas mediante el gestor de paquetes o el backend, rompe la integridad. A continuaci\u00f3n, se muestra una tabla con las operaciones m\u00e1s comunes que puedes emplear sobre algunos de los gestores de paquetes m\u00e1s conocidos: Operaciones Gestores apt yum zypper Actualizar listado de paquetes disponibles apt-get update yum check-update zypper refresh Actualizar sistema apt-get upgrade yum update zypper update Instalar paquete apt-get install <pkg> yum install <pkg> zypper install<pkg> Borrar paquete apt-get remove <pkg> yum erase <pkg> zypper remove <pkg> Buscar paquete apt-cache yum list zypper search Buscar repositorio de un paquete apt-cache madison <pkg> yum whatprovides <pkg> zypper whatprovides <pkg> Veamos ahora las operaciones m\u00e1s comunes que puedes emplear sobre los backends dpkg y rpm : Operaciones Backends dpkg rpm Instalar fichero de paquete dpkg -i <file.deb> rpm -ivh <file.rpm> Borrar paquete dpkg -r <pkg> rpm -e <pkg> Paquete que instala el fichero <file> dpkg -S <file> rpm -qf <file> Ficheros del paquete dpkg -L <pkg> rpm -ql <pkg> Descripci\u00f3n del paquete dpkg -s <pkg> rpm -qi <pkg> Paquetes instalados dpkg -l rpm -qa Primera ley de la Ingenier\u00eda de Sistemas, Software Configuration Management, Bersoff, Henderson & Siegel, Prentice-Hall, 1980 \u21a9","title":"Puesta en producci\u00f3n"},{"location":"part2/config_migasfree_client/","text":"Configurando migasfree-client \u00b6 La libertad no es poder elegir entre unas pocas opciones impuestas, sino tener el control de tu propia vida. La libertad no es elegir quien ser\u00e1 tu amo, es no tener amo. -- Richard Stallman. En el cap\u00edtulo anterior nos hemos centrado en c\u00f3mo se realiza el proceso de la GCS. En este cap\u00edtulo, vas a configurar el cliente de migasfree (mediante empaquetado) para que se conecte al servidor migasfree que ya debes tener funcionando. Todos los comandos de este cap\u00edtulo los vas a ejecutar en otra m\u00e1quina virtual, con Ubuntu instalado, y que debes tener en la misma red en la que est\u00e9 la m\u00e1quina virtual del servidor. El objetivo de este cap\u00edtulo es que conozcas un poco m\u00e1s el empaquetado. Instalando migasfree-client en Ubuntu \u00b6 Instala el cliente migasfree : # wget -O - http://migasfree.org/pub/install-client | bash Observa como en el fichero /etc/migasfree.conf que ha instalado el paquete migasfree-client no hay, l\u00f3gicamente, ning\u00fan ajuste configurado. less /etc/migasfree.conf A continuaci\u00f3n, vamos a configurar este fichero haciendo uso del empaquetado, as\u00ed que no lo hagas manualmente. Obteniendo acme-migasfree-client \u00b6 Al igual que hiciste con acme-test-files , puedes bajarte el fuente del paquete que vamos a utilizar de plantilla para configurar el cliente de migasfree. En la nueva m\u00e1quina virtual con Ubuntu, ejecuta el siguiente c\u00f3digo si a\u00fan no te has descargado fun-with-migasfree-examples : $ wget https://github.com/migasfree/fun-with-migasfree-examples/archive/master.zip $ unzip master.zip $ cd fun-with-migasfree-examples-master Adaptando acme-migasfree-client \u00b6 Accede al directorio acme-migasfree-client y observa su contenido: $ cd acme-migasfree-client $ ls -la total 20 drwxrwxr-x 5 alberto alberto 4096 jun 18 20:54 . drwxrwxr-x 4 alberto alberto 4096 jun 18 21:04 .. drwxrwxr-x 3 alberto alberto 4096 jun 18 20:54 debian drwxrwxr-x 3 alberto alberto 4096 jun 18 20:54 usr Metadatos \u00b6 Observa el directorio debian . Este directorio es el que contiene los metadatos del paquete. Los ficheros m\u00e1s importantes en este directorio son: El fichero control consiste en un conjunto de campos, representados en un formato com\u00fan, que permiten al sistema de gesti\u00f3n de paquetes conocer los metadatos del paquete y as\u00ed poder gestionarlo adecuadamente. Puedes consultar la debian-policy para explorar el conjunto de datos de control El fichero changelog contiene informaci\u00f3n, en un formato especial, con las modificaciones que se han realizado en cada versi\u00f3n del paquete. Cada vez que se modifica el paquete, hay que a\u00f1adir una entrada en este fichero, incrementando la versi\u00f3n y registrando lo que se ha modificado. El fichero copyright contiene la informaci\u00f3n sobre los recursos, licencia y derechos de autor\u00eda de las fuentes originales del paquete. El fichero rules contiene las reglas que se utilizan para generar los paquetes a partir de sus fuentes. El fichero install contiene una lista de ficheros que ser\u00e1n instalados con el paquete. Ahora que conoces el significado de estos ficheros, modif\u00edcalos cambiando el nombre del paquete acme-migasfree-client por tuempresa-migasfree-client y pon tu nombre y la fecha actual all\u00ed donde se requiera. Modifica tambi\u00e9n el nombre del directorio ra\u00edz acme-migasfree-client por tuempresa-migasfree-client . Scripts \u00b6 Observa ahora los scripts postinst y prerm . Sus nombres nos indican cuando ser\u00e1n ejecutados por el sistema de gesti\u00f3n de paquetes. postinst inmediatamente despu\u00e9s de que se produzca la instalaci\u00f3n del paquete. prerm justo antes de que se produzca la eliminaci\u00f3n del paquete. Observa ahora el contenido de postinst y ver\u00e1s que aqu\u00ed se hace una llamada al comando dpkg-divert . Mediante este comando hacemos lo que se conoce como una desviaci\u00f3n de fichero (divert). Mediante la desviaci\u00f3n, indicamos al sistema de gesti\u00f3n de paquetes que un fichero ya no pertenece a un determinado paquete sino al que nosotros establezcamos. As\u00ed, el fichero de configuraci\u00f3n /etc/migasfree.conf , que pertenece en principio al paquete migasfree-client , hacemos que pertenezca al paquete tuempresa-migasfree-client de tal manera que, una posible actualizaci\u00f3n de migasfree-client ya no nos afectar\u00e1. Cada vez que queramos modificar un ajuste del cliente migasfree en /etc/migasfree.conf , lo haremos a trav\u00e9s del fichero usr/share/divert/etc/migasfree.conf del paquete tuempresa-migasfree-client . F\u00edjate tambi\u00e9n que en prerm deshacemos esta desviaci\u00f3n, para que si desinstalamos el paquete, quede todo como estaba. Modifica ahora el fichero usr/share/divert/etc/migasfree.conf . Tendr\u00e1s que poner el ajuste Server con el nombre, o la IP, del servidor migasfree que hemos utilizado anteriormente, y el ajuste Project con el nombre de tu distribuci\u00f3n, por ejemplo ACME-1 . El resto de ajustes, modif\u00edcalos seg\u00fan tus intereses. Una vez hecho esto, y situado en el directorio tuempresa-migasfree-client , genera el paquete (debes tener el paquete devscripts y debhelper previamente instalados). $ /usr/bin/debuild --no-tgz-check -us -uc Con esto tendr\u00e1s un paquete que configura el cliente migasfree para tu organizaci\u00f3n. Ahora, es momento de instalarlo: # dpkg -i tuempresa-migasfree-client_1.0-1_all.deb Observa que al instalar el paquete, dpkg te informa que se a\u00f1ade la desviaci\u00f3n de /etc/migasfree.conf . Comprueba ahora que el ajuste Server y Project son los correctos. # less /etc/migasfree.conf Ahora ya est\u00e1s preparado para registrar este ordenador en el servidor migasfree . # migasfree -u Comprueba que en el servidor se ha creado la version ACME-1 y que existe un nuevo ordenador accediendo a la p\u00e1gina web del servidor. Finalmente, subimos el paquete a nuestro servidor migasfree con el fin de tenerlo disponible para su liberaci\u00f3n a otros escritorios ACME-1 . # migasfree-upload -f tuempresa-migasfree-client_1.0-1_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: ACME-1 Almac\u00e9n: acme Ejecuci\u00f3n del cliente migasfree \u00b6 Hasta ahora, siempre hemos ejecutado el cliente migasfree desde consola mediante el comando migasfree -u como root . Ahora vamos a hacer que se ejecute autom\u00e1ticamente cada vez que el usuario abra una sesi\u00f3n gr\u00e1fica. Para este prop\u00f3sito, existe Migasfree Play . nota Hasta la versi\u00f3n 4.15 del servidor migasfree se ven\u00eda utilizando migasfree-launcher, pero \u00e9ste ha sido reemplazado por Migasfree Play que tiene m\u00e1s funcionalidades. A continuaci\u00f3n vamos a descargar el paquete y construirlo. $ wget https://github.com/migasfree/migasfree-play/archive/latest.zip $ unzip latest.zip $ rm latest.zip $ cd migasfree-play-latest $ cat README.md Instalamos los requerimientos para la construcci\u00f3n del paquete. # apt-get install devscripts debhelper npm Y ahora s\u00ed, construye finalmente el paquete. $ /usr/bin/debuild --no-tgz-check -us -uc Sube el fichero migasfree-play al servidor: # migasfree-upload -f migasfree-play_*.deb Ahora, observa los ficheros que contiene este paquete: etc/sudoers.d/migasfree-play establece los comandos que no requieren password de root para que pueden ser ejecutados desde un usuario cualquiera. Puedes obtener m\u00e1s informaci\u00f3n sobre la configuraci\u00f3n de sudoers ejecutando man sudoers en un terminal. etc/xdg/autostart/migasfree-play-sync.desktop ejecutar\u00e1 el comando /usr/bin/migasfree-play cuando el usuario inicia sesi\u00f3n gr\u00e1fica. Puedes aprender m\u00e1s sobre la especificaci\u00f3n de los ficheros .desktop en freedesktop.org . Ahora que ya tienes los paquetes tuempesa-migasfree-client y migasfree-play en el servidor migasfree , crea un despliegue en el servidor y pon estos paquetes en paquetes a instalar y as\u00edgnale el atributo SET-ALL SYSTEMS . nota Para aprender m\u00e1s sobre el empaquetado, consulta la Gu\u00eda del nuevo desarrollador de Debian nota Para paqueter\u00eda rpm , los metadatos del paquete se especifican en un \u00fanico fichero llamado SPEC . Para aprender m\u00e1s sobre la creaci\u00f3n de paquetes rpm , puedes consultar rpm.org y la wiki del proyecto fedora . nota Otra manera de instalar migasfree-play es ejecutando: wget -O - http://migasfree.org/pub/install-play | bash Configurando migasfree-play \u00b6 Partiendo del paquete acme-migasfree-play vamos a crear ahora el paquete tuempresa-migasfree-play el cual configurar\u00e1 migasfree-play . En el proyecto fun-with-migasfree-examples (que anteriormente ya te has bajado) tienes un ejemplo de configuraci\u00f3n de migasfree-play. Adapta acme-migasfree-play tal y como hiciste con acme-migasfree-client. Es decir, modifica los ficheros, cambiando donde se requiera, el nombre del paquete acme-migasfree-play por tuempresa-migasfree-play y pon tu nombre y la fecha actual . Una vez adaptado accede al nuevo directorio tuempresa-migasfree-play y observa el contenido, en concreto: En usr/share/divert/usr/share/migasfree-play/package.json est\u00e1 el fichero de configuraci\u00f3n de NW.js con el que hemos desarrollado migasfree-play. En usr/share/divert/usr/share/migasfree-play/settings.json puedes cambiar el idioma, y deshabilitar puntos de men\u00fas. En usr/share/migasfree-play/token deber\u00e1s poner el token del usuario migasfree-play. Para ello entra en el interfaz de administraci\u00f3n del servidor - Configuraci\u00f3n - Administraci\u00f3n del sitio - Tokens. Una vez all\u00ed a\u00f1ade un token al usuario migasfree-play. El token que se haya generado tendr\u00e1s que ponerlo dentro del fichero usr/share/migasfree-play/token . Ahora, construye el paquete tuempresa-migasfree-play: $ cd tuempresa-migasfree-play $ /usr/bin/debuild --no-tgz-check -us -uc y s\u00fabelo al servidor: # cd .. # migasfree-upload -f tuempresa-migasfree-play_*.deb Despliegue \u00b6 A partir de este momento, vas a poder administrar f\u00e1cilmente los escritorios Ubuntu de tu organizaci\u00f3n, de forma generalizada, instalando estos paquetes. Hay varias formas de realizar esta instalaci\u00f3n: Bajando los paquetes a cada uno de los escritorios e instal\u00e1ndolos mediante el comando dpkg -i Creando un fichero /etc/apt/sources.list.d/migasfree.list con el siguiente contenido: deb http://<myserver>/public/<project>/REPOSITORIES <deployment> PKGS nota sutituye: <myserver> por tu servidor. <project> por el proyecto que pusiste en /etc/migasfree.conf y <deployment> por el nombre de un despliegue que tenga como paquetes disponibles: tuempresa-migasfree-client , migasfree-client , tuempresa-migasfree-play y migasfree-play . Como paquetes a instalar puedes poner: tuempresa-migasfree-client y tuempresa-migasfree-play Una vez creado este fichero, ejecuta: # apt-get update # apt-get install tuempresa-migasfree-client tuempresa-migasfree-play # migasfree -u y tendr\u00e1s instalados los 4 paquetes. Tambi\u00e9n puedes hacer un clon de un equipo donde ya est\u00e9n instalados estos paquetes, utilizando un sistema de clonado como clonezilla . Este es el m\u00e9todo que usamos en AZLinux , y nos resulta muy c\u00f3modo y r\u00e1pido ya que en una memoria USB llevamos un clonezilla , junto con la imagen clonada de nuestro escritorio, consiguiendo instalar un AZLinux en menos de 10 minutos. O puedes crear un DVD de tu escritorio tal y como se realiza en el proyecto vitalinux . En concreto, tendr\u00edas que adaptar el paquete vx-create-iso a tus necesidades. En este m\u00e9todo son los usuarios quienes se bajan la ISO del DVD y se instalan ellos mismos el sistema.","title":"Configurando migasfree-client"},{"location":"part2/config_migasfree_client/#Configurando","text":"La libertad no es poder elegir entre unas pocas opciones impuestas, sino tener el control de tu propia vida. La libertad no es elegir quien ser\u00e1 tu amo, es no tener amo. -- Richard Stallman. En el cap\u00edtulo anterior nos hemos centrado en c\u00f3mo se realiza el proceso de la GCS. En este cap\u00edtulo, vas a configurar el cliente de migasfree (mediante empaquetado) para que se conecte al servidor migasfree que ya debes tener funcionando. Todos los comandos de este cap\u00edtulo los vas a ejecutar en otra m\u00e1quina virtual, con Ubuntu instalado, y que debes tener en la misma red en la que est\u00e9 la m\u00e1quina virtual del servidor. El objetivo de este cap\u00edtulo es que conozcas un poco m\u00e1s el empaquetado.","title":"Configurando migasfree-client"},{"location":"part2/config_migasfree_client/#instalando-migasfree-client-en-ubuntu","text":"Instala el cliente migasfree : # wget -O - http://migasfree.org/pub/install-client | bash Observa como en el fichero /etc/migasfree.conf que ha instalado el paquete migasfree-client no hay, l\u00f3gicamente, ning\u00fan ajuste configurado. less /etc/migasfree.conf A continuaci\u00f3n, vamos a configurar este fichero haciendo uso del empaquetado, as\u00ed que no lo hagas manualmente.","title":"Instalando migasfree-client en Ubuntu"},{"location":"part2/config_migasfree_client/#obteniendo-acme-migasfree-client","text":"Al igual que hiciste con acme-test-files , puedes bajarte el fuente del paquete que vamos a utilizar de plantilla para configurar el cliente de migasfree. En la nueva m\u00e1quina virtual con Ubuntu, ejecuta el siguiente c\u00f3digo si a\u00fan no te has descargado fun-with-migasfree-examples : $ wget https://github.com/migasfree/fun-with-migasfree-examples/archive/master.zip $ unzip master.zip $ cd fun-with-migasfree-examples-master","title":"Obteniendo acme-migasfree-client"},{"location":"part2/config_migasfree_client/#adaptando-acme-migasfree-client","text":"Accede al directorio acme-migasfree-client y observa su contenido: $ cd acme-migasfree-client $ ls -la total 20 drwxrwxr-x 5 alberto alberto 4096 jun 18 20:54 . drwxrwxr-x 4 alberto alberto 4096 jun 18 21:04 .. drwxrwxr-x 3 alberto alberto 4096 jun 18 20:54 debian drwxrwxr-x 3 alberto alberto 4096 jun 18 20:54 usr","title":"Adaptando acme-migasfree-client"},{"location":"part2/config_migasfree_client/#metadatos","text":"Observa el directorio debian . Este directorio es el que contiene los metadatos del paquete. Los ficheros m\u00e1s importantes en este directorio son: El fichero control consiste en un conjunto de campos, representados en un formato com\u00fan, que permiten al sistema de gesti\u00f3n de paquetes conocer los metadatos del paquete y as\u00ed poder gestionarlo adecuadamente. Puedes consultar la debian-policy para explorar el conjunto de datos de control El fichero changelog contiene informaci\u00f3n, en un formato especial, con las modificaciones que se han realizado en cada versi\u00f3n del paquete. Cada vez que se modifica el paquete, hay que a\u00f1adir una entrada en este fichero, incrementando la versi\u00f3n y registrando lo que se ha modificado. El fichero copyright contiene la informaci\u00f3n sobre los recursos, licencia y derechos de autor\u00eda de las fuentes originales del paquete. El fichero rules contiene las reglas que se utilizan para generar los paquetes a partir de sus fuentes. El fichero install contiene una lista de ficheros que ser\u00e1n instalados con el paquete. Ahora que conoces el significado de estos ficheros, modif\u00edcalos cambiando el nombre del paquete acme-migasfree-client por tuempresa-migasfree-client y pon tu nombre y la fecha actual all\u00ed donde se requiera. Modifica tambi\u00e9n el nombre del directorio ra\u00edz acme-migasfree-client por tuempresa-migasfree-client .","title":"Metadatos"},{"location":"part2/config_migasfree_client/#scripts","text":"Observa ahora los scripts postinst y prerm . Sus nombres nos indican cuando ser\u00e1n ejecutados por el sistema de gesti\u00f3n de paquetes. postinst inmediatamente despu\u00e9s de que se produzca la instalaci\u00f3n del paquete. prerm justo antes de que se produzca la eliminaci\u00f3n del paquete. Observa ahora el contenido de postinst y ver\u00e1s que aqu\u00ed se hace una llamada al comando dpkg-divert . Mediante este comando hacemos lo que se conoce como una desviaci\u00f3n de fichero (divert). Mediante la desviaci\u00f3n, indicamos al sistema de gesti\u00f3n de paquetes que un fichero ya no pertenece a un determinado paquete sino al que nosotros establezcamos. As\u00ed, el fichero de configuraci\u00f3n /etc/migasfree.conf , que pertenece en principio al paquete migasfree-client , hacemos que pertenezca al paquete tuempresa-migasfree-client de tal manera que, una posible actualizaci\u00f3n de migasfree-client ya no nos afectar\u00e1. Cada vez que queramos modificar un ajuste del cliente migasfree en /etc/migasfree.conf , lo haremos a trav\u00e9s del fichero usr/share/divert/etc/migasfree.conf del paquete tuempresa-migasfree-client . F\u00edjate tambi\u00e9n que en prerm deshacemos esta desviaci\u00f3n, para que si desinstalamos el paquete, quede todo como estaba. Modifica ahora el fichero usr/share/divert/etc/migasfree.conf . Tendr\u00e1s que poner el ajuste Server con el nombre, o la IP, del servidor migasfree que hemos utilizado anteriormente, y el ajuste Project con el nombre de tu distribuci\u00f3n, por ejemplo ACME-1 . El resto de ajustes, modif\u00edcalos seg\u00fan tus intereses. Una vez hecho esto, y situado en el directorio tuempresa-migasfree-client , genera el paquete (debes tener el paquete devscripts y debhelper previamente instalados). $ /usr/bin/debuild --no-tgz-check -us -uc Con esto tendr\u00e1s un paquete que configura el cliente migasfree para tu organizaci\u00f3n. Ahora, es momento de instalarlo: # dpkg -i tuempresa-migasfree-client_1.0-1_all.deb Observa que al instalar el paquete, dpkg te informa que se a\u00f1ade la desviaci\u00f3n de /etc/migasfree.conf . Comprueba ahora que el ajuste Server y Project son los correctos. # less /etc/migasfree.conf Ahora ya est\u00e1s preparado para registrar este ordenador en el servidor migasfree . # migasfree -u Comprueba que en el servidor se ha creado la version ACME-1 y que existe un nuevo ordenador accediendo a la p\u00e1gina web del servidor. Finalmente, subimos el paquete a nuestro servidor migasfree con el fin de tenerlo disponible para su liberaci\u00f3n a otros escritorios ACME-1 . # migasfree-upload -f tuempresa-migasfree-client_1.0-1_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: ACME-1 Almac\u00e9n: acme","title":"Scripts"},{"location":"part2/config_migasfree_client/#ejecucion-del-cliente-migasfree","text":"Hasta ahora, siempre hemos ejecutado el cliente migasfree desde consola mediante el comando migasfree -u como root . Ahora vamos a hacer que se ejecute autom\u00e1ticamente cada vez que el usuario abra una sesi\u00f3n gr\u00e1fica. Para este prop\u00f3sito, existe Migasfree Play . nota Hasta la versi\u00f3n 4.15 del servidor migasfree se ven\u00eda utilizando migasfree-launcher, pero \u00e9ste ha sido reemplazado por Migasfree Play que tiene m\u00e1s funcionalidades. A continuaci\u00f3n vamos a descargar el paquete y construirlo. $ wget https://github.com/migasfree/migasfree-play/archive/latest.zip $ unzip latest.zip $ rm latest.zip $ cd migasfree-play-latest $ cat README.md Instalamos los requerimientos para la construcci\u00f3n del paquete. # apt-get install devscripts debhelper npm Y ahora s\u00ed, construye finalmente el paquete. $ /usr/bin/debuild --no-tgz-check -us -uc Sube el fichero migasfree-play al servidor: # migasfree-upload -f migasfree-play_*.deb Ahora, observa los ficheros que contiene este paquete: etc/sudoers.d/migasfree-play establece los comandos que no requieren password de root para que pueden ser ejecutados desde un usuario cualquiera. Puedes obtener m\u00e1s informaci\u00f3n sobre la configuraci\u00f3n de sudoers ejecutando man sudoers en un terminal. etc/xdg/autostart/migasfree-play-sync.desktop ejecutar\u00e1 el comando /usr/bin/migasfree-play cuando el usuario inicia sesi\u00f3n gr\u00e1fica. Puedes aprender m\u00e1s sobre la especificaci\u00f3n de los ficheros .desktop en freedesktop.org . Ahora que ya tienes los paquetes tuempesa-migasfree-client y migasfree-play en el servidor migasfree , crea un despliegue en el servidor y pon estos paquetes en paquetes a instalar y as\u00edgnale el atributo SET-ALL SYSTEMS . nota Para aprender m\u00e1s sobre el empaquetado, consulta la Gu\u00eda del nuevo desarrollador de Debian nota Para paqueter\u00eda rpm , los metadatos del paquete se especifican en un \u00fanico fichero llamado SPEC . Para aprender m\u00e1s sobre la creaci\u00f3n de paquetes rpm , puedes consultar rpm.org y la wiki del proyecto fedora . nota Otra manera de instalar migasfree-play es ejecutando: wget -O - http://migasfree.org/pub/install-play | bash","title":"Ejecuci\u00f3n del cliente migasfree"},{"location":"part2/config_migasfree_client/#configurando-migasfree-play","text":"Partiendo del paquete acme-migasfree-play vamos a crear ahora el paquete tuempresa-migasfree-play el cual configurar\u00e1 migasfree-play . En el proyecto fun-with-migasfree-examples (que anteriormente ya te has bajado) tienes un ejemplo de configuraci\u00f3n de migasfree-play. Adapta acme-migasfree-play tal y como hiciste con acme-migasfree-client. Es decir, modifica los ficheros, cambiando donde se requiera, el nombre del paquete acme-migasfree-play por tuempresa-migasfree-play y pon tu nombre y la fecha actual . Una vez adaptado accede al nuevo directorio tuempresa-migasfree-play y observa el contenido, en concreto: En usr/share/divert/usr/share/migasfree-play/package.json est\u00e1 el fichero de configuraci\u00f3n de NW.js con el que hemos desarrollado migasfree-play. En usr/share/divert/usr/share/migasfree-play/settings.json puedes cambiar el idioma, y deshabilitar puntos de men\u00fas. En usr/share/migasfree-play/token deber\u00e1s poner el token del usuario migasfree-play. Para ello entra en el interfaz de administraci\u00f3n del servidor - Configuraci\u00f3n - Administraci\u00f3n del sitio - Tokens. Una vez all\u00ed a\u00f1ade un token al usuario migasfree-play. El token que se haya generado tendr\u00e1s que ponerlo dentro del fichero usr/share/migasfree-play/token . Ahora, construye el paquete tuempresa-migasfree-play: $ cd tuempresa-migasfree-play $ /usr/bin/debuild --no-tgz-check -us -uc y s\u00fabelo al servidor: # cd .. # migasfree-upload -f tuempresa-migasfree-play_*.deb","title":"Configurando migasfree-play"},{"location":"part2/config_migasfree_client/#despliegue","text":"A partir de este momento, vas a poder administrar f\u00e1cilmente los escritorios Ubuntu de tu organizaci\u00f3n, de forma generalizada, instalando estos paquetes. Hay varias formas de realizar esta instalaci\u00f3n: Bajando los paquetes a cada uno de los escritorios e instal\u00e1ndolos mediante el comando dpkg -i Creando un fichero /etc/apt/sources.list.d/migasfree.list con el siguiente contenido: deb http://<myserver>/public/<project>/REPOSITORIES <deployment> PKGS nota sutituye: <myserver> por tu servidor. <project> por el proyecto que pusiste en /etc/migasfree.conf y <deployment> por el nombre de un despliegue que tenga como paquetes disponibles: tuempresa-migasfree-client , migasfree-client , tuempresa-migasfree-play y migasfree-play . Como paquetes a instalar puedes poner: tuempresa-migasfree-client y tuempresa-migasfree-play Una vez creado este fichero, ejecuta: # apt-get update # apt-get install tuempresa-migasfree-client tuempresa-migasfree-play # migasfree -u y tendr\u00e1s instalados los 4 paquetes. Tambi\u00e9n puedes hacer un clon de un equipo donde ya est\u00e9n instalados estos paquetes, utilizando un sistema de clonado como clonezilla . Este es el m\u00e9todo que usamos en AZLinux , y nos resulta muy c\u00f3modo y r\u00e1pido ya que en una memoria USB llevamos un clonezilla , junto con la imagen clonada de nuestro escritorio, consiguiendo instalar un AZLinux en menos de 10 minutos. O puedes crear un DVD de tu escritorio tal y como se realiza en el proyecto vitalinux . En concreto, tendr\u00edas que adaptar el paquete vx-create-iso a tus necesidades. En este m\u00e9todo son los usuarios quienes se bajan la ISO del DVD y se instalan ellos mismos el sistema.","title":"Despliegue"},{"location":"part2/config_soft/","text":"Configurando software al estilo migasfree \u00b6 No esperes hasta que las condiciones sean perfectas para comenzar, el empezar hace las condiciones perfectas. -- Alan Cohen. El objetivo de este cap\u00edtulo es que veas todo el proceso de la Gesti\u00f3n de la Configuraci\u00f3n Software en conjunto . Lo vamos a hacer desplegando un paquete que, simplemente, instalar\u00e1 unos ficheros de ejemplo (png, gif, mp4, etc.) que pueden servir al personal del Centro de Asistencia Usuarios ( CAU ) para comprobar las asociaciones de archivos y aplicaciones. Al estilo tradicional \u00b6 Imagina que te llega una petici\u00f3n de cambio para a\u00f1adir en todos los ordenadores de escritorio de tu organizaci\u00f3n unos determinados ficheros de test para facilitar el trabajo de los compa\u00f1eros del CAU. Como a\u00fan no has pensado c\u00f3mo desplegar software en los escritorios GNU/Linux, decides acceder uno a uno a los equipos por SSH y copiarlos manualmente. Tardas unos d\u00edas pero al final realizas el trabajo justo antes de cogerte las vacaciones de verano, a excepci\u00f3n de algunos equipos que estaban apagados y que no has podido acceder remotamente. Ahora bien, mientras est\u00e1s de vaciones, \u00bfpodr\u00eda responder f\u00e1cilmente a las cuestiones siguientes tu compa\u00f1ero de trabajo? \u00bfQu\u00e9 cambios se han realizado en un determinado equipo desde el 1 de Marzo? \u00bfQui\u00e9n realiz\u00f3 el cambio? \u00bfC\u00faando se desplegaron todos esos cambios en los equipos? \u00bfQu\u00e9 equipos tienen un cambio determinado? Dif\u00edcilmente tu compa\u00f1ero va a poder reponder estas cuestiones de manera eficaz, aunque hayas registrado muy bien tu trabajo. Podr\u00edas haberte ahorrado mucho trabajo usando herramientas como cengine , puppet , chef , etc., para el despliegue de estos ficheros, pero a\u00fan as\u00ed no podr\u00edas contestar f\u00e1cilmente a dichas preguntas. La integridad frente al cambio no est\u00e1 garantizada con este m\u00e9todo. A continuaci\u00f3n, te propongo otra forma de realizar los cambios de configuraci\u00f3n. Se basa en utilizar el empaquetado para trasladar los cambios a los equipos. nota Usa la rueda, no la reinventes. Usando el sistema de paqueter\u00eda para desplegar el software y su configuraci\u00f3n, nos proporciona integridad frente a los cambios. Cualquier distribuci\u00f3n GNU/Linux tiene un gestor de paquetes y hace muy bien su trabajo. Asumo que tienes un gestor de proyectos, como Redmine , donde vas a registrar las peticiones de cambio (o al menos que hagas como que lo tienes) y que has completado con \u00e9xito el cap\u00edtulo anterior. Todos los comandos de este cap\u00edtulo los vas a ejecutar como root en el equipo que hayas utilizado en el cap\u00edtulo anterior. Tu primer cambio de configuraci\u00f3n \u00b6 El primer cambio sobre un Elemento de Configuraci\u00f3n Software (ECS) es el que te llevar\u00e1 m\u00e1s trabajo, porque exige la creaci\u00f3n de un paquete. Petici\u00f3n \u00b6 Imagina que te llega la siguiente la petici\u00f3n de cambio, que registras y aceptas en el gestor de proyectos: gestor de proyectos Registro: Copiar distintos ficheros de ejemplos: png, gif, jpg, etc., en todos los ordenadores para uso y disfrute de los compa\u00f1eros del CAU. Lo primero que haces es identificar al ECS que afecta, es decir, cu\u00e1l es el paquete que debe ser modificado. Como no existe todav\u00eda un paquete sobre el que actuar, asigna la petici\u00f3n de cambio a un desarrollador (\u00a1qu\u00e9 suerte, siempre te toca a ti!) y registra en la petici\u00f3n de cambio: gestor de proyectos Registro: Crear el paquete acme-test-files Asignado a: desarrollador . Cambio \u00b6 Empaquetado \u00b6 Como desarrollador, tienes que crear el paquete de configuraci\u00f3n acme-test-files . Si nunca has creado un paquete, no te preocupes, para facilitarte las cosas y que puedas avanzar, centr\u00e1ndote en el proceso GCS, desc\u00e1rgate el proyecto fun-with-migasfree-examples donde se incluyen los ejemplos utilizados es este libro. # apt-get install unzip $ wget https://github.com/migasfree/fun-with-migasfree-examples/archive/master.zip $ unzip master.zip $ cd fun-with-migasfree-examples-master Observa los ficheros que incluimos en el paquete acme-test-files : $ ll acme-test-files/usr/share/acme-test-files/ Ya tienes el fuente del paquete. Ahora genera el paquete. Para ello, debes tener instalados algunos paquetes: # apt-get install devscripts gcc build-essential:native Y, ahora s\u00ed, genera el paquete: $ cd acme-test-files $ /usr/bin/debuild --no-tgz-check -us -uc $ cd .. \u00a1Felicidades, el cambio est\u00e1 empaquetado en acme-test-files_1.0-1_all.deb ! Subiendo el cambio al servidor \u00b6 Usa este comando para subir el paquete generado al servidor. # migasfree-upload -f acme-test-files_1.0-1_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: debian-x.x (En mi caso la versi\u00f3n es debian-9.8) Almac\u00e9n: acme Finalmente, asigna la petici\u00f3n de cambio a un liberador (s\u00ed, otra vez vas a ser t\u00fa) y registra en la petici\u00f3n: gestor de proyectos Registro: Creado paquete acme-test-files_1.0-1_all.deb Asignado a: liberador \u00a1Felicidades! Has realizado un cambio de configuraci\u00f3n y lo has almacenado en el servidor migasfree . Liberaci\u00f3n \u00b6 Ahora vas a ver el punto de vista del encargado de liberar los cambios: Accede mediante un navegador web a tu servidor. Observa que en Alertas tienes 1 paquete hu\u00e9rfano (ver imagen 'Paquetes hu\u00e9rfanos'). Paquetes hu\u00e9rfanos Nota Todos los paquetes que se han subido al servidor y no est\u00e1n asignados en ning\u00fan despliegue se denominan hu\u00e9rfanos . Liberando el cambio de configuraci\u00f3n \u00b6 Ahora, vas a liberar el cambio creando un nuevo despliegue . Para ello, ve a Liberaci\u00f3n (pulsando sobre el icono del cami\u00f3n) y accede a Despliegues . Pulsa en el bot\u00f3n + para a\u00f1adir un nuevo despliegue de origen interno e introduce estos datos: Nota Coloca el cursor sobre los iconos para familializarte con el nombre de los campos del formulario. Nombre = ficheros de ejemplo #24543 (Una buena idea es hacer aqu\u00ed una referencia al n\u00ba de petici\u00f3n del Gestor de proyectos) Proyecto = debian-x.x Paquetes disponibles = acme-test-files_1.0-1_all.deb En este campo se asignan los paquetes que contendr\u00e1 el repositorio f\u00edsico asociado al despliegue. Paquetes a instalar = acme-test-files En este campo se escriben los nombres de los paquetes que se instalar\u00e1n obligatoriamente en los clientes. Atributos incluidos = SET-ALL SYSTEMS De esta manera indicamos que todos los clientes tendr\u00e1n acceso a este despliegue. Guarda el despliegue. Observa que, en Alertas , ya no tienes ning\u00fan paquete hu\u00e9rfano. Registra y cierra la petici\u00f3n de cambio: gestor de proyectos Registro: Liberado en Despliegue ficheros de ejemplo #24543 . Petici\u00f3n: cerrada . Aplicando el cambio \u00b6 Para aplicar el cambio a un equipo, ejecuta el siguiente comando: # migasfree -u Observa en la salida del comando: ****************** Subiendo el historial del software... ******************* Diferencia en el software: # 2017-02-03 18:21:17 +acme-test-files-1.0-1 ***************************** Correcto Puedes comprobar que en /usr/share/acme-test-files tienes los ficheros de ejemplos incluidos en el paquete. $ ls -la /usr/share/acme-test-files Tu segundo cambio de configuraci\u00f3n \u00b6 Petici\u00f3n \u00b6 Te llega una segunda petici\u00f3n de cambio, ya que a tus compa\u00f1eros del CAU les ha venido bien estos ficheros de ejemplos pero echan de menos un SVG: gestor de proyectos Registro: A\u00f1adir un fichero SVG de prueba para el CAU. Como siempre, identificas primero el ECS al que afecta el cambio: En este caso es a acme-test-files . En la petici\u00f3n de cambio, asignas al desarrollador y registras: gestor de proyectos Registro: Modificar el paquete acme-test-file a\u00f1adiendo el SVG de ejemplo: https://commons.wikimedia.org/wiki/File:Tux.svg Asignado a : desarrollador . Cambio \u00b6 Los cambios que se realizan sobre un paquete ya creado suelen ser m\u00e1s sencillos de realizar porque, simplemente, se modifica el paquete. Empaquetado \u00b6 Descarga el fichero SVG de https://commons.wikimedia.org/wiki/File:Tux.svg y c\u00f3pialo en acme-test-files/usr/share/acme-test-files . Edita el fichero del paquete acme-test-files/debian/changelog para registrar el cambio realizado. Tendr\u00e1s que a\u00f1adir estas l\u00edneas al principio del fichero : acme-test-files (1.0-2) unstable; urgency=low * Added file tux.svg -- Alberto Gac\u00edas <alberto@migasfree.org> Fri, 3 Feb 2018 18:25:00 +0100 Presta atenci\u00f3n a: La versi\u00f3n del paquete (1.0-2) . Sustituir tu nombre y direcci\u00f3n de correo . Modificar la fecha y hora . nota El formato que se utiliza en el changelog en paquetes debian es muy estricto. Ten cuidado con los espacios, retornos de carro y fechas. Un aspecto que no hay que descuidar es el tema del copyright y licencia. Edita el fichero acme-test-files/debian/copyright y a\u00f1ade el copyright y licencia del fichero tux.svg Files: tux.svg Copyright: lewing@isc.tamu.edu Larry Ewing and The GIMP License: https://creativecommons.org/publicdomain/zero/1.0/legalcode Ahora, generamos el paquete: $ cd acme-test-files $ /usr/bin/debuild --no-tgz-check -us -uc $ cd .. Observa que se ha generado el mismo paquete, pero con la versi\u00f3n 1.0-2 : # root@debian8:~# ls -la *.deb -rw-r--r-- 1 root root 2338 feb 3 17:49 acme-test-files_1.0-1_all.deb -rw-r--r-- 1 root root 2398 feb 3 18:27 acme-test-files_1.0-2_all.deb Subiendo al servidor el cambio \u00b6 # migasfree-upload -f acme-test-files_1.0-2_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: debian-x.x Almac\u00e9n: acme gestor de proyectos Registro: Creado paquete acme-test-files_1.0-2_all.deb Asignado a: liberador Liberaci\u00f3n \u00b6 Liberando el cambio de configuraci\u00f3n \u00b6 Observa como aparece de nuevo un paquete hu\u00e9rfano en alertas y que corresponde a acme-test-files_1.0-2_all.deb . Accede a Liberaci\u00f3n - Despliegues y edita el despliegue ficheros de ejemplo #24543 . A\u00f1ade a Paquetes disponibles el paquete acme-test-files_1.0-2_all.deb . Guarda el despliegue. Registra y cierra la petici\u00f3n de cambio: gestor de proyectos Registro: Liberado acme-test-files_1.0-2_all.deb en Despliegue ficheros de ejemplo #24543 . Petici\u00f3n: cerrada . Aplicando el cambio \u00b6 Ejecuta de nuevo: # migasfree -u Observa en la salida de este comando el cambio de software: ****************** Subiendo el historial del software... ******************* Diferencia en el software: # 2017-02-03 18:30:21 +acme-test-files-1.0-2 -acme-test-files-1.0-1 ***************************** Correcto Comprueba si el cambio se ha aplicado. $ ls -la /usr/share/acme-test-files Auditor\u00eda \u00b6 Ahora tu compa\u00f1ero s\u00ed que podr\u00eda responder las siguientes cuestiones de manera centralizada desde el servidor migasfree aunque todos los equipos est\u00e9n apagados y t\u00fa de vacaciones: \u00bfQu\u00e9 cambios se han producido en el ordenador 1 y cu\u00e1ndo? Accede a Datos - Ordenadores , accede al equipo CID-1 (CID=Computer ID) y mira el final del campo historial de software de la secci\u00f3n Software : # 2017-02-03 18:21:17 +acme-test-files-1.0-1 # 2017-02-03 18:30:21 +acme-test-files-1.0-2 -acme-test-files-1.0-1 nota El signo (-) indica paquete desinstalado y el signo (+) paquete instalado. \u00bfQu\u00e9 se cambi\u00f3, qui\u00e9n y cu\u00e1ndo hizo el cambio? Esta informaci\u00f3n est\u00e1 en el paquete como metainformaci\u00f3n. Para acceder a ella, accede a Liberaci\u00f3n - Paquetes . Despliega el men\u00fa de la derecha del paquete acme-test-files_1.0-2_all.deb y pulsa en Informaci\u00f3n del paquete . Aqu\u00ed podr\u00e1s ver el registro de los cambios (entre otra informaci\u00f3n): acme-test-files (1.0-2) unstable; urgency=low * Added file svg -- Alberto Gac\u00edas <alberto@migasfree.org> Fri, 3 Feb 2018 18:25:00 +0100 acme-test-files (1.0-1) unstable; urgency=low * Ficheros de ejemplos -- Alberto Gac\u00edas <alberto@migasfree.org> Sat, 18 May 2013 08:32:00 +0200 \u00bfQu\u00e9 equipos tienen el cambio acme-test-files-1.0-2? Ve a Consultas - Ordenadores en producci\u00f3n con el paquete... . Escribe en el campo Paquete acme-test-files-1.0-2 y obtendr\u00e1s el resultado. Conclusi\u00f3n \u00b6 Aunque el empaquetado de los ECS requiera un esfuerzo inicial, los beneficios que obtendr\u00e1s justifican sobradamente el uso de este m\u00e9todo: Dispondr\u00e1s de sistemas m\u00e1s estables. Te permitir\u00e1 hacer el seguimento y control de los cambios. Y mejorar\u00e1s la resoluci\u00f3n de incidencias. Beneficios de crear paquetes de configuraci\u00f3n \u00b6 La configuraci\u00f3n permacece encapsulada. Las configuraciones puede revertirse f\u00e1cilmente. Facilita las pruebas antes del despliegue. Facilita la distribuci\u00f3n de las configuraciones de forma segura. Proporciona integridad frente a los cambios de la configuraci\u00f3n. Desventajas del empaqueteado de la configuraci\u00f3n \u00b6 Cuesta m\u00e1s tiempo que otras alternativas ya que hay que crear los paquetes. Beneficios de usar migasfree \u00b6 Utilizar migasfree para la realizar la Liberaci\u00f3n te permitir\u00e1: Controlar a qui\u00e9n y a partir de qu\u00e9 momento se deben aplicar los cambios. Tener una auditor\u00eda centralizada: Inventario de Ordenadores. Hardware. Software (actual e hist\u00f3rico). Inventario de los cambios. y algunas cosas m\u00e1s, que te ser\u00e1n desveladas en los siguientes cap\u00edtulos.","title":"Configurando software al estilo migasfree"},{"location":"part2/config_soft/#configurando-software-al-estilo-migasfree","text":"No esperes hasta que las condiciones sean perfectas para comenzar, el empezar hace las condiciones perfectas. -- Alan Cohen. El objetivo de este cap\u00edtulo es que veas todo el proceso de la Gesti\u00f3n de la Configuraci\u00f3n Software en conjunto . Lo vamos a hacer desplegando un paquete que, simplemente, instalar\u00e1 unos ficheros de ejemplo (png, gif, mp4, etc.) que pueden servir al personal del Centro de Asistencia Usuarios ( CAU ) para comprobar las asociaciones de archivos y aplicaciones.","title":"Configurando software al estilo migasfree"},{"location":"part2/config_soft/#al-estilo-tradicional","text":"Imagina que te llega una petici\u00f3n de cambio para a\u00f1adir en todos los ordenadores de escritorio de tu organizaci\u00f3n unos determinados ficheros de test para facilitar el trabajo de los compa\u00f1eros del CAU. Como a\u00fan no has pensado c\u00f3mo desplegar software en los escritorios GNU/Linux, decides acceder uno a uno a los equipos por SSH y copiarlos manualmente. Tardas unos d\u00edas pero al final realizas el trabajo justo antes de cogerte las vacaciones de verano, a excepci\u00f3n de algunos equipos que estaban apagados y que no has podido acceder remotamente. Ahora bien, mientras est\u00e1s de vaciones, \u00bfpodr\u00eda responder f\u00e1cilmente a las cuestiones siguientes tu compa\u00f1ero de trabajo? \u00bfQu\u00e9 cambios se han realizado en un determinado equipo desde el 1 de Marzo? \u00bfQui\u00e9n realiz\u00f3 el cambio? \u00bfC\u00faando se desplegaron todos esos cambios en los equipos? \u00bfQu\u00e9 equipos tienen un cambio determinado? Dif\u00edcilmente tu compa\u00f1ero va a poder reponder estas cuestiones de manera eficaz, aunque hayas registrado muy bien tu trabajo. Podr\u00edas haberte ahorrado mucho trabajo usando herramientas como cengine , puppet , chef , etc., para el despliegue de estos ficheros, pero a\u00fan as\u00ed no podr\u00edas contestar f\u00e1cilmente a dichas preguntas. La integridad frente al cambio no est\u00e1 garantizada con este m\u00e9todo. A continuaci\u00f3n, te propongo otra forma de realizar los cambios de configuraci\u00f3n. Se basa en utilizar el empaquetado para trasladar los cambios a los equipos. nota Usa la rueda, no la reinventes. Usando el sistema de paqueter\u00eda para desplegar el software y su configuraci\u00f3n, nos proporciona integridad frente a los cambios. Cualquier distribuci\u00f3n GNU/Linux tiene un gestor de paquetes y hace muy bien su trabajo. Asumo que tienes un gestor de proyectos, como Redmine , donde vas a registrar las peticiones de cambio (o al menos que hagas como que lo tienes) y que has completado con \u00e9xito el cap\u00edtulo anterior. Todos los comandos de este cap\u00edtulo los vas a ejecutar como root en el equipo que hayas utilizado en el cap\u00edtulo anterior.","title":"Al estilo tradicional"},{"location":"part2/config_soft/#tu-primer-cambio-de-configuracion","text":"El primer cambio sobre un Elemento de Configuraci\u00f3n Software (ECS) es el que te llevar\u00e1 m\u00e1s trabajo, porque exige la creaci\u00f3n de un paquete.","title":"Tu primer cambio de configuraci\u00f3n"},{"location":"part2/config_soft/#peticion","text":"Imagina que te llega la siguiente la petici\u00f3n de cambio, que registras y aceptas en el gestor de proyectos: gestor de proyectos Registro: Copiar distintos ficheros de ejemplos: png, gif, jpg, etc., en todos los ordenadores para uso y disfrute de los compa\u00f1eros del CAU. Lo primero que haces es identificar al ECS que afecta, es decir, cu\u00e1l es el paquete que debe ser modificado. Como no existe todav\u00eda un paquete sobre el que actuar, asigna la petici\u00f3n de cambio a un desarrollador (\u00a1qu\u00e9 suerte, siempre te toca a ti!) y registra en la petici\u00f3n de cambio: gestor de proyectos Registro: Crear el paquete acme-test-files Asignado a: desarrollador .","title":"Petici\u00f3n"},{"location":"part2/config_soft/#cambio","text":"","title":"Cambio"},{"location":"part2/config_soft/#empaquetado","text":"Como desarrollador, tienes que crear el paquete de configuraci\u00f3n acme-test-files . Si nunca has creado un paquete, no te preocupes, para facilitarte las cosas y que puedas avanzar, centr\u00e1ndote en el proceso GCS, desc\u00e1rgate el proyecto fun-with-migasfree-examples donde se incluyen los ejemplos utilizados es este libro. # apt-get install unzip $ wget https://github.com/migasfree/fun-with-migasfree-examples/archive/master.zip $ unzip master.zip $ cd fun-with-migasfree-examples-master Observa los ficheros que incluimos en el paquete acme-test-files : $ ll acme-test-files/usr/share/acme-test-files/ Ya tienes el fuente del paquete. Ahora genera el paquete. Para ello, debes tener instalados algunos paquetes: # apt-get install devscripts gcc build-essential:native Y, ahora s\u00ed, genera el paquete: $ cd acme-test-files $ /usr/bin/debuild --no-tgz-check -us -uc $ cd .. \u00a1Felicidades, el cambio est\u00e1 empaquetado en acme-test-files_1.0-1_all.deb !","title":"Empaquetado"},{"location":"part2/config_soft/#subiendo-el-cambio-al-servidor","text":"Usa este comando para subir el paquete generado al servidor. # migasfree-upload -f acme-test-files_1.0-1_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: debian-x.x (En mi caso la versi\u00f3n es debian-9.8) Almac\u00e9n: acme Finalmente, asigna la petici\u00f3n de cambio a un liberador (s\u00ed, otra vez vas a ser t\u00fa) y registra en la petici\u00f3n: gestor de proyectos Registro: Creado paquete acme-test-files_1.0-1_all.deb Asignado a: liberador \u00a1Felicidades! Has realizado un cambio de configuraci\u00f3n y lo has almacenado en el servidor migasfree .","title":"Subiendo el cambio al servidor"},{"location":"part2/config_soft/#liberacion","text":"Ahora vas a ver el punto de vista del encargado de liberar los cambios: Accede mediante un navegador web a tu servidor. Observa que en Alertas tienes 1 paquete hu\u00e9rfano (ver imagen 'Paquetes hu\u00e9rfanos'). Paquetes hu\u00e9rfanos Nota Todos los paquetes que se han subido al servidor y no est\u00e1n asignados en ning\u00fan despliegue se denominan hu\u00e9rfanos .","title":"Liberaci\u00f3n"},{"location":"part2/config_soft/#liberando-el-cambio-de-configuracion","text":"Ahora, vas a liberar el cambio creando un nuevo despliegue . Para ello, ve a Liberaci\u00f3n (pulsando sobre el icono del cami\u00f3n) y accede a Despliegues . Pulsa en el bot\u00f3n + para a\u00f1adir un nuevo despliegue de origen interno e introduce estos datos: Nota Coloca el cursor sobre los iconos para familializarte con el nombre de los campos del formulario. Nombre = ficheros de ejemplo #24543 (Una buena idea es hacer aqu\u00ed una referencia al n\u00ba de petici\u00f3n del Gestor de proyectos) Proyecto = debian-x.x Paquetes disponibles = acme-test-files_1.0-1_all.deb En este campo se asignan los paquetes que contendr\u00e1 el repositorio f\u00edsico asociado al despliegue. Paquetes a instalar = acme-test-files En este campo se escriben los nombres de los paquetes que se instalar\u00e1n obligatoriamente en los clientes. Atributos incluidos = SET-ALL SYSTEMS De esta manera indicamos que todos los clientes tendr\u00e1n acceso a este despliegue. Guarda el despliegue. Observa que, en Alertas , ya no tienes ning\u00fan paquete hu\u00e9rfano. Registra y cierra la petici\u00f3n de cambio: gestor de proyectos Registro: Liberado en Despliegue ficheros de ejemplo #24543 . Petici\u00f3n: cerrada .","title":"Liberando el cambio de configuraci\u00f3n"},{"location":"part2/config_soft/#aplicando-el-cambio","text":"Para aplicar el cambio a un equipo, ejecuta el siguiente comando: # migasfree -u Observa en la salida del comando: ****************** Subiendo el historial del software... ******************* Diferencia en el software: # 2017-02-03 18:21:17 +acme-test-files-1.0-1 ***************************** Correcto Puedes comprobar que en /usr/share/acme-test-files tienes los ficheros de ejemplos incluidos en el paquete. $ ls -la /usr/share/acme-test-files","title":"Aplicando el cambio"},{"location":"part2/config_soft/#tu-segundo-cambio-de-configuracion","text":"","title":"Tu segundo cambio de configuraci\u00f3n"},{"location":"part2/config_soft/#peticion_1","text":"Te llega una segunda petici\u00f3n de cambio, ya que a tus compa\u00f1eros del CAU les ha venido bien estos ficheros de ejemplos pero echan de menos un SVG: gestor de proyectos Registro: A\u00f1adir un fichero SVG de prueba para el CAU. Como siempre, identificas primero el ECS al que afecta el cambio: En este caso es a acme-test-files . En la petici\u00f3n de cambio, asignas al desarrollador y registras: gestor de proyectos Registro: Modificar el paquete acme-test-file a\u00f1adiendo el SVG de ejemplo: https://commons.wikimedia.org/wiki/File:Tux.svg Asignado a : desarrollador .","title":"Petici\u00f3n"},{"location":"part2/config_soft/#cambio_1","text":"Los cambios que se realizan sobre un paquete ya creado suelen ser m\u00e1s sencillos de realizar porque, simplemente, se modifica el paquete.","title":"Cambio"},{"location":"part2/config_soft/#empaquetado_1","text":"Descarga el fichero SVG de https://commons.wikimedia.org/wiki/File:Tux.svg y c\u00f3pialo en acme-test-files/usr/share/acme-test-files . Edita el fichero del paquete acme-test-files/debian/changelog para registrar el cambio realizado. Tendr\u00e1s que a\u00f1adir estas l\u00edneas al principio del fichero : acme-test-files (1.0-2) unstable; urgency=low * Added file tux.svg -- Alberto Gac\u00edas <alberto@migasfree.org> Fri, 3 Feb 2018 18:25:00 +0100 Presta atenci\u00f3n a: La versi\u00f3n del paquete (1.0-2) . Sustituir tu nombre y direcci\u00f3n de correo . Modificar la fecha y hora . nota El formato que se utiliza en el changelog en paquetes debian es muy estricto. Ten cuidado con los espacios, retornos de carro y fechas. Un aspecto que no hay que descuidar es el tema del copyright y licencia. Edita el fichero acme-test-files/debian/copyright y a\u00f1ade el copyright y licencia del fichero tux.svg Files: tux.svg Copyright: lewing@isc.tamu.edu Larry Ewing and The GIMP License: https://creativecommons.org/publicdomain/zero/1.0/legalcode Ahora, generamos el paquete: $ cd acme-test-files $ /usr/bin/debuild --no-tgz-check -us -uc $ cd .. Observa que se ha generado el mismo paquete, pero con la versi\u00f3n 1.0-2 : # root@debian8:~# ls -la *.deb -rw-r--r-- 1 root root 2338 feb 3 17:49 acme-test-files_1.0-1_all.deb -rw-r--r-- 1 root root 2398 feb 3 18:27 acme-test-files_1.0-2_all.deb","title":"Empaquetado"},{"location":"part2/config_soft/#subiendo-al-servidor-el-cambio","text":"# migasfree-upload -f acme-test-files_1.0-2_all.deb Introduce usuario: admin Contrase\u00f1a: admin Proyecto: debian-x.x Almac\u00e9n: acme gestor de proyectos Registro: Creado paquete acme-test-files_1.0-2_all.deb Asignado a: liberador","title":"Subiendo al servidor el cambio"},{"location":"part2/config_soft/#liberacion_1","text":"","title":"Liberaci\u00f3n"},{"location":"part2/config_soft/#liberando-el-cambio-de-configuracion_1","text":"Observa como aparece de nuevo un paquete hu\u00e9rfano en alertas y que corresponde a acme-test-files_1.0-2_all.deb . Accede a Liberaci\u00f3n - Despliegues y edita el despliegue ficheros de ejemplo #24543 . A\u00f1ade a Paquetes disponibles el paquete acme-test-files_1.0-2_all.deb . Guarda el despliegue. Registra y cierra la petici\u00f3n de cambio: gestor de proyectos Registro: Liberado acme-test-files_1.0-2_all.deb en Despliegue ficheros de ejemplo #24543 . Petici\u00f3n: cerrada .","title":"Liberando el cambio de configuraci\u00f3n"},{"location":"part2/config_soft/#aplicando-el-cambio_1","text":"Ejecuta de nuevo: # migasfree -u Observa en la salida de este comando el cambio de software: ****************** Subiendo el historial del software... ******************* Diferencia en el software: # 2017-02-03 18:30:21 +acme-test-files-1.0-2 -acme-test-files-1.0-1 ***************************** Correcto Comprueba si el cambio se ha aplicado. $ ls -la /usr/share/acme-test-files","title":"Aplicando el cambio"},{"location":"part2/config_soft/#auditoria","text":"Ahora tu compa\u00f1ero s\u00ed que podr\u00eda responder las siguientes cuestiones de manera centralizada desde el servidor migasfree aunque todos los equipos est\u00e9n apagados y t\u00fa de vacaciones: \u00bfQu\u00e9 cambios se han producido en el ordenador 1 y cu\u00e1ndo? Accede a Datos - Ordenadores , accede al equipo CID-1 (CID=Computer ID) y mira el final del campo historial de software de la secci\u00f3n Software : # 2017-02-03 18:21:17 +acme-test-files-1.0-1 # 2017-02-03 18:30:21 +acme-test-files-1.0-2 -acme-test-files-1.0-1 nota El signo (-) indica paquete desinstalado y el signo (+) paquete instalado. \u00bfQu\u00e9 se cambi\u00f3, qui\u00e9n y cu\u00e1ndo hizo el cambio? Esta informaci\u00f3n est\u00e1 en el paquete como metainformaci\u00f3n. Para acceder a ella, accede a Liberaci\u00f3n - Paquetes . Despliega el men\u00fa de la derecha del paquete acme-test-files_1.0-2_all.deb y pulsa en Informaci\u00f3n del paquete . Aqu\u00ed podr\u00e1s ver el registro de los cambios (entre otra informaci\u00f3n): acme-test-files (1.0-2) unstable; urgency=low * Added file svg -- Alberto Gac\u00edas <alberto@migasfree.org> Fri, 3 Feb 2018 18:25:00 +0100 acme-test-files (1.0-1) unstable; urgency=low * Ficheros de ejemplos -- Alberto Gac\u00edas <alberto@migasfree.org> Sat, 18 May 2013 08:32:00 +0200 \u00bfQu\u00e9 equipos tienen el cambio acme-test-files-1.0-2? Ve a Consultas - Ordenadores en producci\u00f3n con el paquete... . Escribe en el campo Paquete acme-test-files-1.0-2 y obtendr\u00e1s el resultado.","title":"Auditor\u00eda"},{"location":"part2/config_soft/#conclusion","text":"Aunque el empaquetado de los ECS requiera un esfuerzo inicial, los beneficios que obtendr\u00e1s justifican sobradamente el uso de este m\u00e9todo: Dispondr\u00e1s de sistemas m\u00e1s estables. Te permitir\u00e1 hacer el seguimento y control de los cambios. Y mejorar\u00e1s la resoluci\u00f3n de incidencias.","title":"Conclusi\u00f3n"},{"location":"part2/config_soft/#beneficios-de-crear-paquetes-de-configuracion","text":"La configuraci\u00f3n permacece encapsulada. Las configuraciones puede revertirse f\u00e1cilmente. Facilita las pruebas antes del despliegue. Facilita la distribuci\u00f3n de las configuraciones de forma segura. Proporciona integridad frente a los cambios de la configuraci\u00f3n.","title":"Beneficios de crear paquetes de configuraci\u00f3n"},{"location":"part2/config_soft/#desventajas-del-empaqueteado-de-la-configuracion","text":"Cuesta m\u00e1s tiempo que otras alternativas ya que hay que crear los paquetes.","title":"Desventajas del empaqueteado de la configuraci\u00f3n"},{"location":"part2/config_soft/#beneficios-de-usar-migasfree","text":"Utilizar migasfree para la realizar la Liberaci\u00f3n te permitir\u00e1: Controlar a qui\u00e9n y a partir de qu\u00e9 momento se deben aplicar los cambios. Tener una auditor\u00eda centralizada: Inventario de Ordenadores. Hardware. Software (actual e hist\u00f3rico). Inventario de los cambios. y algunas cosas m\u00e1s, que te ser\u00e1n desveladas en los siguientes cap\u00edtulos.","title":"Beneficios de usar migasfree"},{"location":"part2/probando_migasfree/","text":"PARTE 2 Primeros pasos Probando migasfree \u00b6 La unidad es la variedad, y la variedad en la unidad es la ley suprema del universo. -- Isaac Newton. El objetivo de este cap\u00edtulo es que dispongas r\u00e1pidamente de un servidor y un cliente migasfree totalmente funcional, por eso no me voy a extender en explicaciones. nota Usa una m\u00e1quina virtual de virtualbox realizando la instalaci\u00f3n m\u00ednima por red de Debian 64 bits para ver el funcionamiento de migasfree y familiarizarte con \u00e9l antes de poner a Migasfree en producci\u00f3n Instalando el servidor \u00b6 Si ahora no quieres preocuparte de c\u00f3mo se realiza esta instalaci\u00f3n, nunca has usado docker o, simplemente, quieres avanzar m\u00e1s r\u00e1pido, te proporcionamos este Open Virtual Appliance (OVA) para que lo ejecutes con virtualbox . Contiene un servidor migasfree ya instalado. Con virtualbox instalado, y una vez descargado el fichero OVA, haz doble click en \u00e9l y, a continuaci\u00f3n, observa las siguientes reglas de reenv\u00edo de puertos accediendo al men\u00fa de virtualbox : configuraci\u00f3n-red-avanzadas-reenv\u00edo de puertos: Nombre Protocolo IP anfitri\u00f3n Puerto IP invitado Puerto invitado ======= ========= ============ ====== == ======== =============== Rule 1 TCP 127.0.0.1 2222 10.0.2.15 22 Rule 2 TCP 127.0.0.1 8080 10.0.2.15 80 Ya puedes arrancar la m\u00e1quina virtual. Los usuarios y contrase\u00f1as de esta m\u00e1quina virtual son: tux:tux y root:root. Para acceder por SSH a esta m\u00e1quina virtual usa: ssh -p 2222 tux@127.0.0.1 Una vez dentro, puedes loguearte como root de la siguiente manera: tux@migasfree:~$ su Para acceder al servidor web instalado en esta m\u00e1quina virtual, usa la URL http://127.0.0.1:8080 desde el equipo anfitri\u00f3n. Ahora bien, si quieres hacer la instalaci\u00f3n t\u00fa mismo, accede a la m\u00e1quina debian 64 bits sobre la que vas a instalar el servidor y sigue los pasos indicados en migasfree-docker . Comprobando el servidor \u00b6 En un navegador web accede a la URL del servidor. Si todo ha ido bien, ver\u00e1s algo similar a la imagen 'Acceso al servidor migasfree'. Acceso al servidor migasfree Pulsa en iniciar sesi\u00f3n y haz login con el nombre de usuario \"admin\" y contrase\u00f1a \"admin\". Ver\u00e1s algo parecido a la imagen 'Estado del servidor con 0 alertas'. Observa como arriba a la derecha pone alertas 0 . Esto nos indica que todo est\u00e1 controlado. Estado del servidor con 0 alertas Instalando el cliente \u00b6 Instalando el paquete migasfree-client \u00b6 Ahora instala el cliente migasfree sobre la misma m\u00e1quina donde has instalado el servidor. Para ello, actualiza la lista de paquetes e instala el paquete migasfree-client : # wget -O - http://migasfree.org/pub/install-client | bash Tambi\u00e9n puedes instalar el cliente en cualquier otra m\u00e1quina y editar el fichero /etc/migasfree.conf manualmente para configurarlo. Descomenta la l\u00ednea # Server = localhost y as\u00edgnale la direcci\u00f3n del servidor web. Te hago notar que esta no es la manera en que debemos hacerlo, pero por ahora puede servirnos. La manera correcta ser\u00eda empaquetar dicha modificaci\u00f3n, cosa que veremos m\u00e1s adelante en Configurando migasfree-client nota Cualquier cambio en la configuraci\u00f3n de las aplicaciones o del S.O se podr\u00e1n realizar de manera centralizada con suma facilidad, manteniendo adem\u00e1s la integridad, s\u00f3lo si dicha configuraci\u00f3n ha sido empaquetada. Registrando el cliente \u00b6 Ejecuta el comando: # migasfree -u te devolver\u00e1 una salida parecida a esta: root@migasfree:/home/tux# migasfree -u Sesi\u00f3n gr\u00e1fica no detectada Versi\u00f3n de migasfree client: 4.15 Opciones de ejecuci\u00f3n: /etc/migasfree.conf Proyecto: debian-9.3 Servidor: localhost Actualizar paquetes autom\u00e1ticamente: True Proxy: None Certificado SSL: None Proxy cach\u00e9 de paquetes: None Depuraci\u00f3n: False Nombre del ordenador: migasfree GUI detallado: True PMS: apt-get Usuario gr\u00e1fico: root Autoregistrando ordenador... \u00a1Clave /var/migasfree-client/keys/localhost/debian-9.3.pri creada! \u00a1Clave /var/migasfree-client/keys/localhost/server.pub creada! Warning: apt-key output should not be parsed (stdout is not a terminal) \u00a1Clave /var/migasfree-client/keys/localhost/repositories.pub creada! ******************* Conectando al servidor migasfree... ******************** ***************************** Correcto ************************ Obteniendo propiedades... ************************* ***************************** Correcto ************************** Evaluando atributos... ************************** PCI: 8086:1237~Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02) ,8086:7000~ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] ,8086:7111~IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01) ,80ee:beef~VGA compatible controller: InnoTek Systemberatung GmbH VirtualBox Graphics Adapter ,8086:100e~Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controller (rev 02) ,80ee:cafe~System peripheral: InnoTek Systemberatung GmbH VirtualBox Guest Service ,106b:003f~USB controller: Apple Inc. KeyLargo/Intrepid USB ,8086:7113~Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 08) ,8086:2829~SATA controller: Intel Corporation 82801HM/HEM (ICH8M/ICH8M-E) SATA Controller [AHCI mode] (rev 02) , HST: migasfree NET: 10.0.2.0/24 ************************** Subiendo atributos... *************************** ***************************** Correcto *************************** Ejecutando fallas... *************************** LOW_HOME_PARTITION_SPACE: LOW_SYSTEM_PARTITION_SPACE: **************************** Subiendo fallas... **************************** ***************************** Correcto ************************* Creando repositorios... ************************** ***************************** Correcto ************* Obteniendo los metadatos de los repositorios... ************** Ign:1 http://ftp.es.debian.org/debian stretch InRelease Obj:2 http://security.debian.org/debian-security stretch/updates InRelease Obj:3 http://ftp.es.debian.org/debian stretch-updates InRelease Obj:4 http://ftp.es.debian.org/debian stretch Release Obj:5 https://download.docker.com/linux/debian stretch InRelease Leyendo lista de paquetes... Hecho ***************************** Correcto ************************ Desinstalando paquetes... ************************* ***************************** Correcto ******************* Instalando paquetes obligatorios... ******************** ***************************** Correcto ************************* Actualizando paquetes... ************************* DEBIAN_FRONTEND=noninteractive /usr/bin/apt-get -o APT::Get::Purge=true -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o Debug::pkgProblemResolver=1 --assume-yes --force-yes --allow-unauthenticated --auto-remove dist-upgrade Leyendo lista de paquetes... Creando \u00e1rbol de dependencias... Leyendo la informaci\u00f3n de estado... Calculando la actualizaci\u00f3n... 0 actualizados, 0 nuevos se instalar\u00e1n, 0 para eliminar y 0 no actualizados. ***************************** Correcto ****************** Subiendo el inventario del software... ****************** ***************************** Correcto *************** Capturando informaci\u00f3n sobre el hardware... *************** ***************************** Correcto **************** Enviando informaci\u00f3n sobre el hardware... **************** ***************************** Correcto ************************* Operaciones completadas ************************** Comprobando el estado del servidor \u00b6 Comprueba los datos que se han recogido accediendo al servidor con tu navegador web. F\u00edjate ahora que tienes 2 Alertas (ver imagen notificaciones). Pulsa sobre ellas y luego sobre 2 alertas por comprobar : La primera te notifica que el ordenador CID-1 ha dado de alta la plataforma Linux . La segunda notificaci\u00f3n te dice que el ordenador CID-1 ha a\u00f1adido el proyecto debian-x.x . Notificaciones Echa un vistazo r\u00e1pido al ordenador pulsando en la lupa y luego en ordenador (ver imagen Ordenadores) Observa los datos del ordenador pulsando sobre CID-1 . F\u00edjate en la fecha de la sicronizaci\u00f3n. Consulta el hardware pulsando sobre el campo producto . Ordenadores nota CID es un acr\u00f3nimo de Computer IDentificator . Es un n\u00famero que el servidor asigna a cada ordenador para identificarlo. Es imposible tener dos ordenadores con el mismo CID. nota El s\u00edmbolo que aparece a la izquierda del CID (el coraz\u00f3n) indica el estado en el que encuentra el ordenador. \u00a1Enhorabuena! Has instalado un servidor migasfree y has registrado en \u00e9l tu primer ordenador. Desplegando software \u00b6 Y ahora, para ir abriendo boca, vamos a instalar y eliminar aplicaciones de manera centralizada usando el servidor migasfree . Sup\u00f3n que quieres sustituir nano por vim en todos los equipos de tu organizaci\u00f3n. Accede a Liberaci\u00f3n - Despliegues y pulsa en en s\u00edmbolo + para a\u00f1adir un despliegue. nota Sit\u00faa el cursor sobre los iconos del formulario de despliegue para identificar cada campo. Introduce los siguientes datos: Nombre : sustituir nano por vim proyecto : (el que corresponda) paquetes a instalar : vim paquetes a desinstalar : nano atributos incluidos : ALL SYSTEMS Graba el despliegue. Ahora sincroniza el equipo cliente con el servidor migasfree : # migasfree -u Puedes comprobar en la salida est\u00e1ndar del cliente migasfree que se ha configurado el repositorio sustituir-nano-por-vim y que se ha instalado el paquete vim y desinstalado nano . ************* Obteniendo los metadatos de los repositorios... ************** Obj http://localhost sustituir-nano-por-vim InRelease Des:1 http://localhost sustituir-nano-por-vim/PKGS amd64 Packages [29 B] ************************ Desinstalando paquetes... ************************* Los siguientes paquetes se ELIMINAR\u00c1N: nano* ***************************** Correcto ******************* Instalando paquetes obligatorios... ******************** Se instalar\u00e1n los siguientes paquetes NUEVOS: vim ***************************** Correcto nota En el despliegue que acabamos de hacer s\u00f3lo hemos dado la orden de instalar y desinstalar paquetes, pero adem\u00e1s se ha creado un repositorio de paquetes vac\u00edo . En los siguientes cap\u00edtulos aprender\u00e1s a subir tus propios paquetes al servidor e introducirlos en los despliegues, pero vayamos despacito, suave, suavecito. Al poner el atributo SET-ALL SYSTEMS estamos indicando que se aplique este despliegue a todos los ordenadores. Podr\u00edamos haber incluido otros atributos como CID-1 , NET-10.0.2.0/24 , o una lista de ellos. S\u00f3lo se aplicar\u00e1 este despliegue a los ordenadores que tengan alg\u00fan atributo coincidente con los atributos incluidos en el despliegue. Observa que tambi\u00e9n puedes excluir ordenadores. El servidor sigue la siguiente l\u00f3gica: primero comprueba los ordenadores incluidos y despu\u00e9s excluye los ordenadores que tenga alg\u00fan atributo que coincida con los atributos excluidos del despliegue. nota Ahora cada vez que un ordenador se sincroniza con el servidor (y se le aplica este despliegue), se instala vim y desinstala nano si es necesario. Si ahora queremos instalar vim y emacs en todos los ordenadores, pon sus nombres en paquetes a instalar y deja en blanco paquetes a desinstalar : paquetes a instalar : vim emacs paquetes a desinstalar : Conforme los equipos se vayan sincronizando, se producir\u00e1n los cambios. Aprender\u00e1s m\u00e1s sobre los despliegues en el cap\u00edtulo dedicado a La Liberaci\u00f3n. \u00a1Enhorabuena de nuevo! Ya sabes como instalar/desinstalar software de manera centralizada a un conjunto de ordenadores. No est\u00e1 nada mal para empezar, \u00bfno crees? En el siguiente cap\u00edtulo vas a aprender a hacer el cambio de configuraci\u00f3n software al estilo migasfree .","title":"Probando migasfree"},{"location":"part2/probando_migasfree/#probando-migasfree","text":"La unidad es la variedad, y la variedad en la unidad es la ley suprema del universo. -- Isaac Newton. El objetivo de este cap\u00edtulo es que dispongas r\u00e1pidamente de un servidor y un cliente migasfree totalmente funcional, por eso no me voy a extender en explicaciones. nota Usa una m\u00e1quina virtual de virtualbox realizando la instalaci\u00f3n m\u00ednima por red de Debian 64 bits para ver el funcionamiento de migasfree y familiarizarte con \u00e9l antes de poner a Migasfree en producci\u00f3n","title":"Probando migasfree"},{"location":"part2/probando_migasfree/#instalando-el-servidor","text":"Si ahora no quieres preocuparte de c\u00f3mo se realiza esta instalaci\u00f3n, nunca has usado docker o, simplemente, quieres avanzar m\u00e1s r\u00e1pido, te proporcionamos este Open Virtual Appliance (OVA) para que lo ejecutes con virtualbox . Contiene un servidor migasfree ya instalado. Con virtualbox instalado, y una vez descargado el fichero OVA, haz doble click en \u00e9l y, a continuaci\u00f3n, observa las siguientes reglas de reenv\u00edo de puertos accediendo al men\u00fa de virtualbox : configuraci\u00f3n-red-avanzadas-reenv\u00edo de puertos: Nombre Protocolo IP anfitri\u00f3n Puerto IP invitado Puerto invitado ======= ========= ============ ====== == ======== =============== Rule 1 TCP 127.0.0.1 2222 10.0.2.15 22 Rule 2 TCP 127.0.0.1 8080 10.0.2.15 80 Ya puedes arrancar la m\u00e1quina virtual. Los usuarios y contrase\u00f1as de esta m\u00e1quina virtual son: tux:tux y root:root. Para acceder por SSH a esta m\u00e1quina virtual usa: ssh -p 2222 tux@127.0.0.1 Una vez dentro, puedes loguearte como root de la siguiente manera: tux@migasfree:~$ su Para acceder al servidor web instalado en esta m\u00e1quina virtual, usa la URL http://127.0.0.1:8080 desde el equipo anfitri\u00f3n. Ahora bien, si quieres hacer la instalaci\u00f3n t\u00fa mismo, accede a la m\u00e1quina debian 64 bits sobre la que vas a instalar el servidor y sigue los pasos indicados en migasfree-docker .","title":"Instalando el servidor"},{"location":"part2/probando_migasfree/#comprobando-el-servidor","text":"En un navegador web accede a la URL del servidor. Si todo ha ido bien, ver\u00e1s algo similar a la imagen 'Acceso al servidor migasfree'. Acceso al servidor migasfree Pulsa en iniciar sesi\u00f3n y haz login con el nombre de usuario \"admin\" y contrase\u00f1a \"admin\". Ver\u00e1s algo parecido a la imagen 'Estado del servidor con 0 alertas'. Observa como arriba a la derecha pone alertas 0 . Esto nos indica que todo est\u00e1 controlado. Estado del servidor con 0 alertas","title":"Comprobando el servidor"},{"location":"part2/probando_migasfree/#instalando-el-cliente","text":"","title":"Instalando el cliente"},{"location":"part2/probando_migasfree/#instalando-el-paquete-migasfree-client","text":"Ahora instala el cliente migasfree sobre la misma m\u00e1quina donde has instalado el servidor. Para ello, actualiza la lista de paquetes e instala el paquete migasfree-client : # wget -O - http://migasfree.org/pub/install-client | bash Tambi\u00e9n puedes instalar el cliente en cualquier otra m\u00e1quina y editar el fichero /etc/migasfree.conf manualmente para configurarlo. Descomenta la l\u00ednea # Server = localhost y as\u00edgnale la direcci\u00f3n del servidor web. Te hago notar que esta no es la manera en que debemos hacerlo, pero por ahora puede servirnos. La manera correcta ser\u00eda empaquetar dicha modificaci\u00f3n, cosa que veremos m\u00e1s adelante en Configurando migasfree-client nota Cualquier cambio en la configuraci\u00f3n de las aplicaciones o del S.O se podr\u00e1n realizar de manera centralizada con suma facilidad, manteniendo adem\u00e1s la integridad, s\u00f3lo si dicha configuraci\u00f3n ha sido empaquetada.","title":"Instalando el paquete migasfree-client"},{"location":"part2/probando_migasfree/#registrando-el-cliente","text":"Ejecuta el comando: # migasfree -u te devolver\u00e1 una salida parecida a esta: root@migasfree:/home/tux# migasfree -u Sesi\u00f3n gr\u00e1fica no detectada Versi\u00f3n de migasfree client: 4.15 Opciones de ejecuci\u00f3n: /etc/migasfree.conf Proyecto: debian-9.3 Servidor: localhost Actualizar paquetes autom\u00e1ticamente: True Proxy: None Certificado SSL: None Proxy cach\u00e9 de paquetes: None Depuraci\u00f3n: False Nombre del ordenador: migasfree GUI detallado: True PMS: apt-get Usuario gr\u00e1fico: root Autoregistrando ordenador... \u00a1Clave /var/migasfree-client/keys/localhost/debian-9.3.pri creada! \u00a1Clave /var/migasfree-client/keys/localhost/server.pub creada! Warning: apt-key output should not be parsed (stdout is not a terminal) \u00a1Clave /var/migasfree-client/keys/localhost/repositories.pub creada! ******************* Conectando al servidor migasfree... ******************** ***************************** Correcto ************************ Obteniendo propiedades... ************************* ***************************** Correcto ************************** Evaluando atributos... ************************** PCI: 8086:1237~Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02) ,8086:7000~ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II] ,8086:7111~IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01) ,80ee:beef~VGA compatible controller: InnoTek Systemberatung GmbH VirtualBox Graphics Adapter ,8086:100e~Ethernet controller: Intel Corporation 82540EM Gigabit Ethernet Controller (rev 02) ,80ee:cafe~System peripheral: InnoTek Systemberatung GmbH VirtualBox Guest Service ,106b:003f~USB controller: Apple Inc. KeyLargo/Intrepid USB ,8086:7113~Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 08) ,8086:2829~SATA controller: Intel Corporation 82801HM/HEM (ICH8M/ICH8M-E) SATA Controller [AHCI mode] (rev 02) , HST: migasfree NET: 10.0.2.0/24 ************************** Subiendo atributos... *************************** ***************************** Correcto *************************** Ejecutando fallas... *************************** LOW_HOME_PARTITION_SPACE: LOW_SYSTEM_PARTITION_SPACE: **************************** Subiendo fallas... **************************** ***************************** Correcto ************************* Creando repositorios... ************************** ***************************** Correcto ************* Obteniendo los metadatos de los repositorios... ************** Ign:1 http://ftp.es.debian.org/debian stretch InRelease Obj:2 http://security.debian.org/debian-security stretch/updates InRelease Obj:3 http://ftp.es.debian.org/debian stretch-updates InRelease Obj:4 http://ftp.es.debian.org/debian stretch Release Obj:5 https://download.docker.com/linux/debian stretch InRelease Leyendo lista de paquetes... Hecho ***************************** Correcto ************************ Desinstalando paquetes... ************************* ***************************** Correcto ******************* Instalando paquetes obligatorios... ******************** ***************************** Correcto ************************* Actualizando paquetes... ************************* DEBIAN_FRONTEND=noninteractive /usr/bin/apt-get -o APT::Get::Purge=true -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold -o Debug::pkgProblemResolver=1 --assume-yes --force-yes --allow-unauthenticated --auto-remove dist-upgrade Leyendo lista de paquetes... Creando \u00e1rbol de dependencias... Leyendo la informaci\u00f3n de estado... Calculando la actualizaci\u00f3n... 0 actualizados, 0 nuevos se instalar\u00e1n, 0 para eliminar y 0 no actualizados. ***************************** Correcto ****************** Subiendo el inventario del software... ****************** ***************************** Correcto *************** Capturando informaci\u00f3n sobre el hardware... *************** ***************************** Correcto **************** Enviando informaci\u00f3n sobre el hardware... **************** ***************************** Correcto ************************* Operaciones completadas **************************","title":"Registrando el cliente"},{"location":"part2/probando_migasfree/#comprobando-el-estado-del-servidor","text":"Comprueba los datos que se han recogido accediendo al servidor con tu navegador web. F\u00edjate ahora que tienes 2 Alertas (ver imagen notificaciones). Pulsa sobre ellas y luego sobre 2 alertas por comprobar : La primera te notifica que el ordenador CID-1 ha dado de alta la plataforma Linux . La segunda notificaci\u00f3n te dice que el ordenador CID-1 ha a\u00f1adido el proyecto debian-x.x . Notificaciones Echa un vistazo r\u00e1pido al ordenador pulsando en la lupa y luego en ordenador (ver imagen Ordenadores) Observa los datos del ordenador pulsando sobre CID-1 . F\u00edjate en la fecha de la sicronizaci\u00f3n. Consulta el hardware pulsando sobre el campo producto . Ordenadores nota CID es un acr\u00f3nimo de Computer IDentificator . Es un n\u00famero que el servidor asigna a cada ordenador para identificarlo. Es imposible tener dos ordenadores con el mismo CID. nota El s\u00edmbolo que aparece a la izquierda del CID (el coraz\u00f3n) indica el estado en el que encuentra el ordenador. \u00a1Enhorabuena! Has instalado un servidor migasfree y has registrado en \u00e9l tu primer ordenador.","title":"Comprobando el estado del servidor"},{"location":"part2/probando_migasfree/#desplegando-software","text":"Y ahora, para ir abriendo boca, vamos a instalar y eliminar aplicaciones de manera centralizada usando el servidor migasfree . Sup\u00f3n que quieres sustituir nano por vim en todos los equipos de tu organizaci\u00f3n. Accede a Liberaci\u00f3n - Despliegues y pulsa en en s\u00edmbolo + para a\u00f1adir un despliegue. nota Sit\u00faa el cursor sobre los iconos del formulario de despliegue para identificar cada campo. Introduce los siguientes datos: Nombre : sustituir nano por vim proyecto : (el que corresponda) paquetes a instalar : vim paquetes a desinstalar : nano atributos incluidos : ALL SYSTEMS Graba el despliegue. Ahora sincroniza el equipo cliente con el servidor migasfree : # migasfree -u Puedes comprobar en la salida est\u00e1ndar del cliente migasfree que se ha configurado el repositorio sustituir-nano-por-vim y que se ha instalado el paquete vim y desinstalado nano . ************* Obteniendo los metadatos de los repositorios... ************** Obj http://localhost sustituir-nano-por-vim InRelease Des:1 http://localhost sustituir-nano-por-vim/PKGS amd64 Packages [29 B] ************************ Desinstalando paquetes... ************************* Los siguientes paquetes se ELIMINAR\u00c1N: nano* ***************************** Correcto ******************* Instalando paquetes obligatorios... ******************** Se instalar\u00e1n los siguientes paquetes NUEVOS: vim ***************************** Correcto nota En el despliegue que acabamos de hacer s\u00f3lo hemos dado la orden de instalar y desinstalar paquetes, pero adem\u00e1s se ha creado un repositorio de paquetes vac\u00edo . En los siguientes cap\u00edtulos aprender\u00e1s a subir tus propios paquetes al servidor e introducirlos en los despliegues, pero vayamos despacito, suave, suavecito. Al poner el atributo SET-ALL SYSTEMS estamos indicando que se aplique este despliegue a todos los ordenadores. Podr\u00edamos haber incluido otros atributos como CID-1 , NET-10.0.2.0/24 , o una lista de ellos. S\u00f3lo se aplicar\u00e1 este despliegue a los ordenadores que tengan alg\u00fan atributo coincidente con los atributos incluidos en el despliegue. Observa que tambi\u00e9n puedes excluir ordenadores. El servidor sigue la siguiente l\u00f3gica: primero comprueba los ordenadores incluidos y despu\u00e9s excluye los ordenadores que tenga alg\u00fan atributo que coincida con los atributos excluidos del despliegue. nota Ahora cada vez que un ordenador se sincroniza con el servidor (y se le aplica este despliegue), se instala vim y desinstala nano si es necesario. Si ahora queremos instalar vim y emacs en todos los ordenadores, pon sus nombres en paquetes a instalar y deja en blanco paquetes a desinstalar : paquetes a instalar : vim emacs paquetes a desinstalar : Conforme los equipos se vayan sincronizando, se producir\u00e1n los cambios. Aprender\u00e1s m\u00e1s sobre los despliegues en el cap\u00edtulo dedicado a La Liberaci\u00f3n. \u00a1Enhorabuena de nuevo! Ya sabes como instalar/desinstalar software de manera centralizada a un conjunto de ordenadores. No est\u00e1 nada mal para empezar, \u00bfno crees? En el siguiente cap\u00edtulo vas a aprender a hacer el cambio de configuraci\u00f3n software al estilo migasfree .","title":"Desplegando software"},{"location":"part3/admin_interface/","text":"PARTE 3 Gu\u00eda de uso El interfaz de administraci\u00f3n \u00b6 Mant\u00e9n tus ojos en las estrellas y tus pies en la tierra. -- Theodore Roosevelt. Antes de profundizar en el uso de migasfree, d\u00e9jame que te describa el interfaz de administraci\u00f3n del servidor migasfree mediante la siguiente imagen. Nombre de tu organizaci\u00f3n (o instancia del servidor) definido en el ajuste de configuraci\u00f3n del servidor: MIGASFREE_ORGANIZATION . Men\u00fa. Configuraci\u00f3n. Dispositivos. Liberaci\u00f3n. Datos. Consultas. B\u00fasqueda r\u00e1pida de ordenador. Selecci\u00f3n de Dominios . Selecci\u00f3n de Ambitos . Alertas . Usuario que ha iniciado sesi\u00f3n. Permite el Cambio de contrase\u00f1a . Miga de pan . Debajo de la miga de pan aparece el nombre de los datos con los que estamos trabajando, Ordenadores en este caso. A continuaci\u00f3n del nombre aparecer\u00eda un simbolo + para introducir m\u00e1s datos en caso de disponer permisos para ello. Filtros predefinidos. B\u00fasqueda. Acciones sobre los datos: Selecciona los datos (12). Elije una acci\u00f3n. Pulsa en el bot\u00f3n ir . Datos. Ayudas \u00b6 Ahora f\u00edjate que en el interfaz de administraci\u00f3n, abajo a la derecha, hay tres iconos de ayuda. El primer icono, representa al modelo de datos . Te proporciona informaci\u00f3n contextual de las tablas y campos de la Base de Datos junto con sus relaciones con otras tablas. Puede serte \u00fatil para obtener informaci\u00f3n a la hora de realizar consultas SQL a la Base de Datos. Mediante el segundo icono podr\u00e1s acceder a la documentaci\u00f3n de la Migasfree REST API . Desde aqu\u00ed podr\u00e1s realizar llamadas directamente a la API y ver la respuesta del servidor. Muy \u00fatil para el desarrollo de programas que hacen uso de ella. El \u00faltimo icono, el del libro, tambi\u00e9n es una ayuda contextual. Pulsando en \u00e9l, y dependiendo de en que men\u00fa est\u00e9s situado, se te dirigir\u00e1 a la secci\u00f3n de la Gu\u00eda de uso de Fun with migasfree en la que se describe lo que est\u00e1s viendo en ese momento. Datos relacionados \u00b6 Ahora f\u00edjate en c\u00f3mo podemos navegar f\u00e1cilmente por los datos relacionados , pulsando en el tri\u00e1ngulo que aparece a la derecha de los elementos. Para acceder a los datos relacionados pulsa sobre el n\u00famero de elementos. Mas adelante, cuando cojas soltura, podr\u00e1s a\u00f1adir tus propias acciones externas tales como VNC , PING , SSH , etc. mediante el ajuste MIGASFREE_EXTERNAL_ACTIONS de los Ajustes del servidor migasfree , pero por ahora creo que es suficiente.","title":"El interfaz de administraci\u00f3n"},{"location":"part3/admin_interface/#el-interfaz-de-administracion","text":"Mant\u00e9n tus ojos en las estrellas y tus pies en la tierra. -- Theodore Roosevelt. Antes de profundizar en el uso de migasfree, d\u00e9jame que te describa el interfaz de administraci\u00f3n del servidor migasfree mediante la siguiente imagen. Nombre de tu organizaci\u00f3n (o instancia del servidor) definido en el ajuste de configuraci\u00f3n del servidor: MIGASFREE_ORGANIZATION . Men\u00fa. Configuraci\u00f3n. Dispositivos. Liberaci\u00f3n. Datos. Consultas. B\u00fasqueda r\u00e1pida de ordenador. Selecci\u00f3n de Dominios . Selecci\u00f3n de Ambitos . Alertas . Usuario que ha iniciado sesi\u00f3n. Permite el Cambio de contrase\u00f1a . Miga de pan . Debajo de la miga de pan aparece el nombre de los datos con los que estamos trabajando, Ordenadores en este caso. A continuaci\u00f3n del nombre aparecer\u00eda un simbolo + para introducir m\u00e1s datos en caso de disponer permisos para ello. Filtros predefinidos. B\u00fasqueda. Acciones sobre los datos: Selecciona los datos (12). Elije una acci\u00f3n. Pulsa en el bot\u00f3n ir . Datos.","title":"El interfaz de administraci\u00f3n"},{"location":"part3/admin_interface/#ayudas","text":"Ahora f\u00edjate que en el interfaz de administraci\u00f3n, abajo a la derecha, hay tres iconos de ayuda. El primer icono, representa al modelo de datos . Te proporciona informaci\u00f3n contextual de las tablas y campos de la Base de Datos junto con sus relaciones con otras tablas. Puede serte \u00fatil para obtener informaci\u00f3n a la hora de realizar consultas SQL a la Base de Datos. Mediante el segundo icono podr\u00e1s acceder a la documentaci\u00f3n de la Migasfree REST API . Desde aqu\u00ed podr\u00e1s realizar llamadas directamente a la API y ver la respuesta del servidor. Muy \u00fatil para el desarrollo de programas que hacen uso de ella. El \u00faltimo icono, el del libro, tambi\u00e9n es una ayuda contextual. Pulsando en \u00e9l, y dependiendo de en que men\u00fa est\u00e9s situado, se te dirigir\u00e1 a la secci\u00f3n de la Gu\u00eda de uso de Fun with migasfree en la que se describe lo que est\u00e1s viendo en ese momento.","title":"Ayudas"},{"location":"part3/admin_interface/#datos-relacionados","text":"Ahora f\u00edjate en c\u00f3mo podemos navegar f\u00e1cilmente por los datos relacionados , pulsando en el tri\u00e1ngulo que aparece a la derecha de los elementos. Para acceder a los datos relacionados pulsa sobre el n\u00famero de elementos. Mas adelante, cuando cojas soltura, podr\u00e1s a\u00f1adir tus propias acciones externas tales como VNC , PING , SSH , etc. mediante el ajuste MIGASFREE_EXTERNAL_ACTIONS de los Ajustes del servidor migasfree , pero por ahora creo que es suficiente.","title":"Datos relacionados"},{"location":"part3/system/","text":"La configuraci\u00f3n del sistema migasfree \u00b6 El hombre razonable se adapta al mundo; el irrazonable intenta adaptar el mundo a s\u00ed mismo. As\u00ed pues, el progreso depende del irrazonable. -- George Bernard Shaw En cap\u00edtulos anteriores, has aprendido a instalar el servidor y el cliente migasfree, as\u00ed como a crear paquetes. La creaci\u00f3n de paquetes no es una tarea trivial, no tanto por su construcci\u00f3n en s\u00ed, sino por el hecho de que son necesarios amplios conocimientos de los sistemas operativos y de las aplicaciones. En este y en los siguientes tres cap\u00edtulos, vas a aprender a adaptar y usar el servidor migasfree . F\u00f3rmulas \u00b6 En migasfree , una f\u00f3rmula es una caracter\u00edstica de los equipos o de los usuarios, y que nos servir\u00e1 para desplegar los paquetes. Como administrador de migasfree , una de las primeras tareas que debes realizar es definir estas f\u00f3rmulas. Debes preguntarte en funci\u00f3n de qu\u00e9 caracter\u00edsticas vas a realizar los despliegues. Por ejemplo, \u00bfte interesa desplegar los paquetes por el HOSTNAME de los equipos?, \u00bfy por subred? \u00bfQu\u00e9 tal por el grupo al que pertenece el usuario en el LDAP? \u00bfO por su contexto LDAP? nota En AZLinux, usamos principalmente el contexto LDAP al que pertenece el usuario para desplegar los cambios por los distintos servicios o departamentos de nuestro ayuntamiento, y en menor medida usamos tambi\u00e9n el CID. Una f\u00f3rmula es un c\u00f3digo que se programa en un registro de la base de datos de migasfree . Estas f\u00f3rmulas ser\u00e1n ejecutadas en cada uno de los clientes migasfree y sus valores de retorno ser\u00e1n devueltos al servidor como atributos . nota El atributo es el valor concreto que toma una f\u00f3rmula al ser ejecutada en un equipo. Veamos un ejemplo sencillo de todo esto con la f\u00f3rmula MACHINE NAME . Accede a la web de tu servidor migasfree y ve a Configuraci\u00f3n-F\u00f3rmulas-MACHINE NAME . En este registro, ver\u00e1s el siguiente c\u00f3digo escrito en python . import platform print(platform.node()) Si ejecutas python en una consola y escribes estas dos l\u00edneas, ver\u00e1s que python muestra, por la salida est\u00e1ndar, el nombre de tu equipo. $ python Python 2.7.3 (default, Apr 10 2013, 05:46:21) [GCC 4.6.3] on linux2 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> import platform >>> print platform.node() white En mi caso me ha devuelto white , que es el nombre de mi port\u00e1til. \u00bfA que no aciertas de qu\u00e9 color es? Esto es, en definitiva, lo que hace el cliente migasfree : obtiene del servidor la f\u00f3rmula MACHINE NAME (su c\u00f3digo), la ejecuta y devuelve al servidor el resultado como atributo ( HST-white ). Podr\u00edas haber escrito la f\u00f3rmula tambi\u00e9n en c\u00f3digo bash simplemente llamando al comando de Linux hostname o escribiendo echo $HOSTNAME (el resultado ser\u00eda el mismo), pero utilizar c\u00f3digo python nos permite, en este caso, usar la misma f\u00f3rmula tambi\u00e9n para plataformas Windows o Mac OS. Campos de la F\u00f3rmula \u00b6 Observa cada uno de los campos de la f\u00f3rmula : Prefijo : Es una combinaci\u00f3n de tres n\u00fameros o letras. Este prefijo se utiliza para agrupar e identificar los atributos. Nombre : Denomina a la f\u00f3rmula. Habilitado : Indica si est\u00e1 activa la f\u00f3rmula. Si no est\u00e1 marcado, la f\u00f3rmula no ser\u00e1 ejecutada en los clientes. Lenguaje de programaci\u00f3n : En el que est\u00e1 escrito el c\u00f3digo de la f\u00f3rmula. C\u00f3digo : Instrucciones a ejecutar en los clientes para obtener atributos . Clase : Hay cuatro tipos de clases y que nos permiten tratar el valor devuelto por la f\u00f3rmula de diferentes maneras: Normal . El valor devuelto por la f\u00f3rmula viene con el siguiente formato: <valor>~<Descripci\u00f3n> o, simplemente, como: <valor> Lista : El valor al ejecutar la f\u00f3rmula en el cliente es una lista de atributos separados por una coma. Puedes ver un ejemplo en la f\u00f3rmula PCI . Su formato es: <valor>~<Descripci\u00f3n>, ... A\u00f1adir por la derecha : Permite a\u00f1adir atributos de la siguiente manera: Si el valor devuelto por la f\u00f3rmula es \\\"CONTEXTO1.CONTEXTO2.MIEMPRESA\\\", el servidor interpreta que el equipo tiene estos tres atributos: MIEMPRESA CONTEXTO2.MIEMPRESA CONTEXTO1.CONTEXTO2.MIEMPRESA Se utiliza esta clase para crear atributos relacionados con LDAP. A\u00f1adir por la izquierda . Lo mismo que la anterior, pero agregando por la izquierda. CONTEXTO1 CONTEXTO1.CONTEXTO2 CONTEXTO1.CONTEXTO2.MIEMPRESA A\u00f1adir autom\u00e1ticamente : Si este campo est\u00e1 marcado, los nuevos atributos ser\u00e1n a\u00f1adidos autom\u00e1ticamente a la base de datos de migasfree. En caso contrario es el administrador de migasfree el responsable de a\u00f1adir manualmente los atributos para esta f\u00f3rmula. Se pueden a\u00f1adir atributos manualmente accediendo a Datos-Atributos . F\u00f3rmulas espec\u00edficas \u00b6 Existen unas f\u00f3rmulas predefinidas que tienen unos objetivos muy concretos y que no pueden ser eliminadas del sistema. Lo m\u00e1s caracter\u00edstico de ellas es que no son ejecutadas en el cliente sino en el servidor. SET : Esta f\u00f3rmula tiene un atributo llamado SET-ALL SYSTEMS . Todos los ordenadores tendr\u00e1n este atributo sin excepci\u00f3n. Sirve para referirse a todos los ordenadores. Por ejemplo, si en un despliegue asignas este atributo, todos los ordenadores tendr\u00e1n acceso a \u00e9l. Es habitual usarlo tambi\u00e9n en la \u00faltima demora de un calendario. Esta f\u00f3rmula, adem\u00e1s, se usa internamente para definir Conjuntos de Atributos . CID : Computer Identificator . Esta f\u00f3rmula generar\u00e1 un atributo que es igual al campo id de la tabla computer de la Base de Datos de migasfree. Dicho atributo CID es \u00fanico por cada ordenador y se utiliza en lugar de referirse al UUID de la placa base de un ordenador siendo el m\u00e1s recomendado para se\u00f1alar a un ordenador en concreto (procesos como el Reemplazo de ordenadores {.interpreted-text role=\"ref\"} tienen en cuenta este atributo). Por ejemplo, un atributo CID-572 se corresponder\u00eda con el UUID 5FD85780-9BC9-11E3-91B8-F0921CF3678D. El ajuste MIGASFREE_COMPUTER_SEARCH_FIELDS {.interpreted-text role=\"ref\"} del servidor, permite configurar b\u00fasquedas por otros campos del ordenador a la hora de asignar un determinado CID en el servidor migasfree. Cuando un ordenador pasa a un estado Baja o a Disponible todos sus CID asignados en el sistema son eliminados. Ver campo estado de Ordenadores . El CID aparece por defecto en la etiqueta del ordenador que muestra el comando migasfree-label . Categor\u00edas de etiquetas \u00b6 Hasta ahora, has visto que una f\u00f3rmula es un c\u00f3digo que se ejecuta en el cliente para obtener un atributo autom\u00e1ticamente. Ahora bien, pueden existir casos en que no se puede obtener autom\u00e1ticamente estos atributos. Imagina que quieres \"etiquetar\" ciertos equipos seg\u00fan la funcionalidad que van a realizar (tratamiento gr\u00e1fico, administraci\u00f3n, aula, etc.). Esto no es algo que, a priori, se pueda programar. En migasfree existe la posibilidad de crear estas etiquetas y asignarlas manualmente a los equipos tal y como har\u00edas con una etiqueta f\u00edsica que pegas a un ordenador. Una etiqueta no ejecutar\u00e1 ning\u00fan c\u00f3digo en el cliente. Es el propio registro del ordenador en el servidor de migasfree quien lleva asignadas, manualmente, estas etiquetas. A todos los efectos, una etiqueta es un atributo m\u00e1s del sistema y, por tanto, te permitir\u00e1 hacer el despliegue tambi\u00e9n en funci\u00f3n de ellas. Por cada Configuraci\u00f3n-Categor\u00edas de etiquetas , existir\u00e1 un conjunto de etiquetas que manualmente debes a\u00f1adir en Datos-Etiquetas . Una vez a\u00f1adidas, puedes asignarlas a Datos-Ordenadores . Tambi\u00e9n puedes editar Datos-Etiquetas y asignarle un conjunto de ordenadores. Existe en el cliente el comando migasfree-tags que permite consultar y asignar etiquetas desde el propio cliente. Para obtener el conjunto de etiquetas que pueden ser asignadas a un ordenador ejecuta: migasfree-tags --available Para consultar las etiquetas asignadas a un ordenador ejecuta: migasfree-tags --get Para asignar etiquetas al equipo, seleccionando manualmente las etiquetas entre las disponibles en el sistema, ejecuta: migasfree-tags --set Para asignar determinadas etiquetas a un equipo, escribe las etiquetas separadas por espacios: migasfree-tags --set <ETIQUETA1> <ETIQUETA2> ... Para asignar etiquetas en el servidor migasfree pero que no se produzca ning\u00fan cambio de paquetes utiliza: migasfree-tags --communicate <ETIQUETA1> <ETIQUETA2> ... Para quitar todas las etiquetas de un equipo, ejecuta: migasfree-tags --set \"\" Las etiquetas est\u00e1n relacionadas con los campos de los despliegues: Paquetes pre-incluidos por defecto Paquetes incluidos por defecto Paquetes excluidos por defecto ya que al ejecutar el comando migasfre-tags --set se instalar\u00e1n los paquetes definidos en los pre-incluidos e incluidos y se desinstalar\u00e1n los paquetes definidos en el campo excluidos , siempre y cuando los atributos asignados al despliegue coincidan con los del equipo. Esto se utiliza para crear la imagen ISO de los escritorios. nota En AZLinux, usamos migasfree-tags b\u00e1sicamente para, partiendo de una imagen ISO de Ubuntu, desinstalar e instalar los paquetes que componen nuestro escritorio y crear una imagen del disco para clonar. nota En Vitalinux, se emplean las etiquetas para cambiar f\u00e1cilmente de \"sabor\". Cuando se quiere cambiar de \"sabor\" (Infantil, Primaria, Profes, ...), simplemente se eligen las etiquetas mediante el comando migasfree-tag --set , produci\u00e9ndose autom\u00e1ticamente la instalaci\u00f3n y desinstalaci\u00f3n de los paquetes correspondientes. Tambi\u00e9n se utiliza en la creaci\u00f3n del DVD, permitiendo hacer una ISO para cada sabor o conjunto de sabores. Campos de categor\u00edas de etiquetas \u00b6 Prefijo : Es una combinaci\u00f3n de tres n\u00fameros o letras. Este prefijo se utiliza para agrupar e identificar las etiquetas. Nombre : Denomina el tipo de etiqueta. Habilitado : Si no est\u00e1 marcado, las etiquetas de este tipo no ser\u00e1n funcionales. Clase : El funcionamiento es exactamente igual que en las f\u00f3rmulas . Un valor muy \u00fatil que puede tomar este campo es el de a\u00f1adir por la derecha . Imagina que quieres agrupar los ordenadores por ubicaci\u00f3n para liberar software por distintas zonas. Una forma de hacerlo es crear una Categor\u00eda de etiqueta llamada p.e. UBICACI\u00d3N definada de clase a\u00f1adir por la derecha . Despu\u00e9s, puedes crear las Etiquetas de tipo UBICACION p.e.: UBI-PLANTA-1.SEDE_CENTRAL.MADRID Cuando un equipo con esta etiqueta asignada se conecta al servidor, autom\u00e1ticamente el servidor interpretar\u00e1 que tiene no una, sino tres etiquetas: UBI-MADRID UBI-SEDE_CENTRAL.MADRID UBI-PLANTA-1.SEDE_CENTRAL.MADRID Con lo que finalmente podemos liberar software a todo MADRID , a toda la sede central de Madrid, o solamente a la planta 1\u00aa. nota Observa que el caracter de delimitaci\u00f3n es el punto: . Conjuntos de Atributos \u00b6 En ocasiones puedes necesitar agrupar Atributos . Imagina que tienes muchos equipos a los que asignar una cierta Etiqueta y que te resulta pesado tener que hacerlo uno a uno. Puedes entonces crear un Conjunto de Atributos . Sup\u00f3n que tienes subredes con un buen ancho de banda y otras subredes que no, y que necesitas liberar software en funci\u00f3n de esto. Podr\u00edamos crear dos Conjuntos de Atributos : Conjunto 1: Nombre: RED LENTA Atributos asignados: NET-192.168.1.0/24 NET-192.168.8.0/24 Conjunto 2: Nombre: RED RAPIDA Atributos asignados: SET-ALL SYSTEMS Atributos excluidos: SET-RED LENTA De esta manera, cualquier equipo de las subredes 192.168.1.0/24 o 192.168.8.0/24, al ejecutar migasfree -u , se le asignar\u00e1 autom\u00e1ticamente un Atributo: SET-RED LENTA . Al resto de equipos se le asignar\u00e1 el Atributo: SET-RED RAPIDA . Ahora ya podr\u00edamos crear Despliegues y asignarles dichos Atributos . Los Conjuntos de Atributos no ejecutan ning\u00fan c\u00f3digo en el cliente, sino que son evaluados en el servidor. Si un ordenador pertenece a un conjunto, se le asigna un Atributo con el mismo nombre que el Conjunto de Atributos . Campos de Conjuntos de Atributos \u00b6 Nombre : Denomina al conjunto. Habilitado : Indica si el conjunto ser\u00e1 evaluado. Atributos incluidos : Lista de Atributos que formar\u00e1n parte el conjunto. Atributos excluidos : Lista de Atributos a excluir del conjunto. Definici\u00f3n de Fallas \u00b6 Una falla es un hecho negativo que se produce en un equipo cliente. Por ejemplo que un equipo se quede con poco espacio en la partici\u00f3n de sistema, es algo a lo que se debe prestar atenci\u00f3n y ser solucionado antes de que sea tarde. Migasfree, mediante las fallas, permite lanzar c\u00f3digo en el cliente con este objetivo. F\u00edjate que las posibilidades son inmensas y que facilita la proactividad . En definitiva, una falla es un c\u00f3digo que se ejecuta en el cliente. Si el c\u00f3digo escribe algo por la salida est\u00e1ndar, \u00e9sta ser\u00e1 enviada al servidor como Falla . El servidor entonces a\u00f1adir\u00e1 un registro de Falla , apareciendo en las Alertas de los usuarios de migasfree . Campos de Definici\u00f3n de Falla \u00b6 Nombre : Denomina a la falla. Habilitado : Activa o desactiva la falla. Descripci\u00f3n : Para detallar lo que hace la falla. Lenguaje de programaci\u00f3n : Especifica en qu\u00e9 lenguaje est\u00e1 escrito el c\u00f3digo . Mi recomendaci\u00f3n es que programes en la medida de lo posible en python . C\u00f3digo : Instrucciones que detectan alguna falla en los equipos y que debe poner en la salida est\u00e1ndar un texto que indique la falla producida. Puede serte \u00fatil en algunos casos poner tambi\u00e9n el procedimiento a seguir. Atributos incluidos : Permite asignar en qu\u00e9 equipos cliente ser\u00e1 efectiva la falla. Por ejemplo si escribes el c\u00f3digo en bash, deber\u00edas asignar la falla s\u00f3lo a los equipos con plataforma Linux PLT-Linux , ya que plataformas Windows no ser\u00e1n capaces de ejecutar bash. Tambi\u00e9n te puede interesar programar una falla s\u00f3lo para obtener informaci\u00f3n de un equipo o de un grupo de equipos. Atributos excluidos : Permite excluir a ciertos equipos de la ejecuci\u00f3n de la falla. Usuarios : Sirve para asignar usuarios de migasfree a los que les aparecer\u00e1n las fallas de este tipo cuando se accede desde las Alertas (s\u00f3lo se muestran las que est\u00e1n pendientes de comprobar por el usuario autenticado). Si una definici\u00f3n de falla no tiene asignado ning\u00fan usuario, las fallas que se produzcan aparecer\u00e1n a cualquier usuario autenticado. nota Poder ejecutar c\u00f3digo en los clientes proporciona una gran potencia para realizar cualquier cosa. Usa esta capacidad con responsabilidad y s\u00e9 meticuloso en las comprobaciones antes de activar cualquier falla. Errores autocomprobables \u00b6 Por defecto, los errores producidos por el PMS, se a\u00f1aden al sistema como no comprobados. Ahora bien, en ocasiones puede resultar tedioso tener que marcar como comprobados uno a uno ciertos errores que, m\u00e1s que errores, son \"alertas\". Para automatizar esta tarea puedes crear un error autocomprobable . Simplemente a\u00f1ade un registro con el patr\u00f3n de b\u00fasqueda deseado y los errores que coincidan son ese patr\u00f3n se marcar\u00e1n autom\u00e1ticamente como comprobados. Por ejemplo, si quisieras que todos los errores que llegan del tipo: 2014-10-03 10:44:47 Error: Generic error Info: Curl error: Couldn't resolve host 'myserver' se autocomprobaran, podr\u00edas emplear el siguiente patr\u00f3n: .*\\sError: Generic error\\sInfo: Curl error: Couldn't resolve host 'myserver' Consultas \u00b6 Migasfree incorpora un sistema para crear consultas parametrizables. Cada consulta se programa en un registro y podr\u00e1 ser ejecutada accediendo a Consultas . Hay una pocas consultas ya predefinidas, pero puedes programar nuevas o adaptar las que ya existen. Campos de consulta \u00b6 Nombre : Denomina la consulta. Descripci\u00f3n : Describe la consulta. C\u00f3digo : Instrucci\u00f3n en Django de la consulta. Mediante la asignaci\u00f3n de unas variables predeterminadas el servidor podr\u00e1 crear la consulta. Las variables en concreto son: query : Conjunto de registros de la consulta. fields : Lista de los campos del QuerySet que se quieren mostrar. titles : Lista de los titulos de los campos que se quieren mostrar. project : Sirve para obtener el proyecto del usuario y poder hacer filtros cuando se requiera. Par\u00e1metros : Permite la petici\u00f3n de par\u00e1metros de consulta. Se debe crear una funci\u00f3n que se llame form_params y que devuelva una clase que herede de ParametersForm . nota Para realizar consultas, necesitar\u00e1s conocer un poco los QuerySet de Django y la Documentaci\u00f3n del modelo de datos . Esta \u00faltima la tienes disponible al final de todas las p\u00e1ginas de la aplicaci\u00f3n, pulsando sobre el icono de base de datos. Proyectos \u00b6 Migasfree puede trabajar con distintos Sistemas Operativos. Un proyecto , en migasfree, representa a un conjunto de ordenadores que comparten un mismo Sistema Operativo base. Por ejemplo, en el Ayto. de Zaragoza contamos con los siguientes proyectos : AZLinux-1 (SLED 10.2) Se migr\u00f3 a AZLinux-2 (ning\u00fan PC). AZLinux-2 (OpenSUSE 11.2) Se migr\u00f3 a AZLinux-12 (ning\u00fan PC). AZLinux-12 (Ubuntu 12.04) En producci\u00f3n (900 PC). En fase de migraci\u00f3n a otros AZLinux. AZLinux-14 (Ubuntu 14.04) En producci\u00f3n (500 PC). AZLinux-16 (Ubuntu 16.04). En producci\u00f3n (100 PC). ZA (Ubuntu 10.04 para escritorios tipo kioskos). Obsoleto. WIN-XP (Windows XP). En producci\u00f3n (1600 PC). AZW-10 (Windows 10). En producci\u00f3n (80 PC). Cada ordenador estar\u00e1 configurado en un \u00fanico proyecto en un momento dado. Cambios de proyecto en un ordenador crean en el sistema un registro de migraci\u00f3n autom\u00e1ticamente. De esta manera, es posible conocer las diferentes migraciones de S.O. que se han ido produciendo en los equipos y en qu\u00e9 momento se han hecho efectivas. Puedes consultar las migraciones accediendo a Datos-Migraciones . Mediante el ajuste MIGASFREE_AUTOREGISTER se permite, o no, a los equipos registrar autom\u00e1ticamente los proyectos. Puedes consultarlo en Ajustes del servidor migasfree . Campos del proyecto \u00b6 Nombre : Denomina al proyecto. Plataforma : a la que pertenece el proyecto. Sistema de gesti\u00f3n de paquetes : El PMS que se utiliza en el sistema operativo de este proyecto. Auto registrar ordenadores : Si est\u00e1 marcado, se permiten registrar ordenadores desde un cliente autom\u00e1ticamente. En este caso, s\u00f3lo con que un equipo est\u00e9 configurado con el proyecto, ser\u00e1 a\u00f1adido autom\u00e1ticamente a la base datos. En caso contrario, s\u00f3lo se podr\u00e1n registrar ordenadores mediante el uso de un usuario que cuente con los permisos adecuados para a\u00f1adir ordenadores al sistema. Sistemas de gesti\u00f3n de paquetes \u00b6 Son los distintos PMS predefinidos que vienen con migasfree. nota En versiones futuras de migasfree est\u00e1 previsto su refactorizaci\u00f3n y la eliminaci\u00f3n de este modelo de datos. Plataformas \u00b6 Los proyectos se clasifican por plataformas. Las plataformas vienen establecidas por la funci\u00f3n python platform.system() y, por tanto, sus valores pueden ser: Linux Unix Windows Darwin (Otras) Esta clasificaci\u00f3n de los proyectos te permite realizar consultas y estad\u00edsticas en funci\u00f3n de la plataforma. Mediante el ajuste MIGASFREE_AUTOREGISTER se permite, o no, a los equipos registrar autom\u00e1ticamente las plataformas. Puedes consultarlo en Ajustes del servidor migasfree . Perfiles de usuario Migasfree \u00b6 En migasfree existen dos tipos de usuarios, los usuarios que administran migasfree y los usuarios que utilizan los ordenadores. Este apartado se refiere a los primeros. Cuando se genera la base de datos de migasfree , se crean 8 usuarios predeterminados y varios authgroup : Usuarios por defecto \u00b6 admin . Tiene permisos de lectura/escritura a todas las tablas. packager . Pertenece a los grupos Reader y Packager . configurator . Pertenece a los grupos Reader y Configurator . installer . Pertenece a los grupos Reader y Device installer . query . Pertenece a los grupos Reader y Query . liberator . Pertenece a los grupos Reader y Liberator . checker . Pertenece a los grupos Reader y Computer Checker . reader . Pertenece al grupo Reader . Estos usuarios tienen por defecto como contrase\u00f1a su nombre, es decir, la contrase\u00f1a de admin es admin , y lo mismo es aplicable al resto de usuarios. Estos usuarios son ficticios para realizar pruebas y conviene que sean eliminados. Se recomienda crear los usuarios reales que usar\u00e1n el servidor migasfree , asign\u00e1ndoles los grupos de usuarios correspondientes. nota Es importante que en un entorno de producci\u00f3n se deshabiliten los usuarios que no se vayan a utilizar o que, al menos, se les cambie la contrase\u00f1a por motivos de seguridad. Campos de Perfiles de usuarios migasfree \u00b6 Nombre de usuario : Nombre de la cuenta de usuario. Nombre : Nombre del usuario. Apellidos : Apellidos del usuario. Direcci\u00f3n de correo electr\u00f3nico : Email. Fecha de alta : Cuando se a\u00f1adi\u00f3 el usuario al sistema. \u00daltimo inicio de sesi\u00f3n : del usuario. Activo : Indica si el usuario debe ser tratado como activo. Desmarca esta opci\u00f3n en lugar de borrar la cuenta. Es superusuario : Indica que este usuario tiene todos los permisos sin asign\u00e1rselos expl\u00edcitamente. Cuando marcamos este campo estamos indicando que es un usuario administrador . Es staff : Indica si el usuario puede entrar en El interfaz de administraci\u00f3n Grupos : Grupos a los que pertenece el usuario. Permisos de usuario : Permisos adicionales. Dominios : Lista de dominios que puede administrar el usuario. Dominio : Dominio que actualmente tiene selecionado el usuario en El interfaz de administraci\u00f3n \u00c1mbito : \u00c1mbito que actualmente tiene selecionado el usuario en El interfaz de administraci\u00f3n Cambio de contrase\u00f1a \u00b6 La contrase\u00f1a puede ser cambiada por los usuarios pulsando en su nombre de usuario y que aparece arriba a la derecha en El interfaz de administraci\u00f3n . Tambi\u00e9n puede ser modificada por otro usuario que tenga marcado el campo Es superusuario , accediendo al registro del usuario en cuesti\u00f3n y modificando directamente su campo Contrase\u00f1a . Si un usuario olvida su contrase\u00f1a, y el administrador ha configurado en los ajustes del servidor el email , podr\u00e1 restablecerla. Grupos de Usuarios \u00b6 En funci\u00f3n de las tareas que los usuarios de administraci\u00f3n de migasfree pueden realizar, se establecen los siguientes grupos de usuarios. Domain Admin . Cuenta con permisos de lectura/escritura a: Ordenadores Despliegues \u00c1mbitos Configurator con permisos de lectura/escritura a: F\u00f3rmulas Proyectos Sistemas de gesti\u00f3n de paquetes (PMS) Plataformas Comprobaciones Definiciones de fallas Mensajes Sincronizaciones Mensajes del servidor Migraciones Notificaciones Computer Checker tiene permisos de lectura/escritura a: Errores Fallas Mensajes Sincronizaciones Liberator . Permisos de lectura/escritura a: Despliegues Calendarios Packager cuenta con permisos de lectura/escritura a: Paquetes Almacenes Query . Permisos de lectura/escritura a: Consultas Device installer cuenta con permisos de lectura/escritura a: Dispositivos Reader . Permisos de s\u00f3lo lectura a todas las tablas. Dominios \u00b6 En migasfree llamanos dominio a un conjunto de ordenadores. Mientras que un usuario administrador ve a todos y cada uno de los ordenadores del sistema, un usuario administrador de dominio s\u00f3lo va a poder ver y trabajar con los ordenadores del dominio que administra. Un ejemplo t\u00edpico de uso de administrador de dominio ser\u00eda el de una empresa con varias delegaciones donde se requiere que un determinado usuario pueda administrar s\u00f3lo los ordenadores de una de las delegaciones, siendo el resto de ordenadores y sus datos \"invisibles\" para \u00e9l. S\u00f3lo un usuario administrador puede crear y editar dominios asign\u00e1ndoles usuarios administradores de dominio . Un administrador de dominio puede administrar varios dominios . Campos de dominio \u00b6 Nombre : Denomina al dominio. Comentario : Describe al dominio. Atributos incluidos : Aqui se establecen mediante atributos los ordenadores que formar\u00e1n parte del dominio. Atributos excluidos : Permite excluir ordenadores. Etiquetas : Especifica que etiquetas ser\u00e1n visibles al ejecutar migasfree-tags -s el el cliente para los ordenadores que pertenezcan al dominio Administradores : Lista de usuarios administradores de dominio que administran el dominio Caracter\u00edsticas del usuario administrador de dominio \u00b6 Ve s\u00f3lo los datos relativos al dominio que tiene seleccionado en El interfaz de administraci\u00f3n . Pertenece al grupo de usuarios Domain Admin que establece las siguientes restricciones por defecto: Puede crear despliegues en el dominio con objeto de instalar, actualizar o eliminar paquetes en ese dominio, pero no puede subir nuevos paquetes ni modificar despliegues de otros dominios. Puede definir dispositivos pero no modelos de dispositivos. No puede modificar Formulas, Categorias de Etiquetas, ni Definiciones de Fallas. No es un superusuario . Ver serveruserprofile {.interpreted-text role=\"ref\"} El administrador de dominio debe colaborar estrechamente con el administrador para no duplicar configuraciones y crear definiciones generalistas en la medida de lo posible. Piensa que un administrador puede querer p.e. desinstalar obligatoriamente una determinada aplicaci\u00f3n a todos los equipos y entrar en conflicto con un administrador de dominio que desea instalarla, en este caso se instalar\u00e1 y desinstalar\u00e1 continuamente la aplicaci\u00f3n. Ten cuidado con esto. Procedimiento de creaci\u00f3n de un dominio \u00b6 Antes de crear el dominio debemos crear las etiquetas que van a estar disponibles en el dominio. Ve a \"datos-etiquetas\" y a\u00f1\u00e1delas. Supongamos que queremos crear el dominio \"INSTITUTO GOYA\" con la siguiente estructura: GOYA AULA A B LABORATORIO ADMINISTRACION SALA PROFESORES las etiquetas que se deben crear son: DMN-GOYA.AULA DMN-GOYA.AULA.A DMN-GOYA.AULA.B DMN-GOYA.AULA.LABORATORIO DMN-GOYA.ADMINISTACION DMN-GOYA.ADMINISTACION.SALA_PROFESORES A\u00f1adir el dominio . Nombre Comentario Atributos: A\u00f1adirlos si se conocen, si no se puede dejar en blanco para a\u00f1adirlos m\u00e1s tarde. Asignar las tags creadas en el paso anterior. Administradores de dominio: Si ya los has dado de alta, a\u00f1\u00e1delos. Registrar los ordenadores al dominio. OPCION A. Cuando eres un usuario administrador . Se a\u00f1ade el equipo al dominio. (Ir al dominio y asignar en atributos incluidos el CID) Se asigna cualquiera de las etiquetas del dominio (o varias) en el ordenador. OPCION B. Cuando eres un usuario administrador de dominio Ejecutar el siguiente comando en el ordenador y autom\u00e1ticamente \u00e9ste se registrar\u00e1 en el dominio que tenga seleccionado en El interfaz de administraci\u00f3n {.interpreted-text role=\"ref\"} en ese momento el administrador de dominio. migasfree -g --user=<user_admin_domain> \u00c1mbitos \u00b6 Un \u00e1mbito en migasfree es un subconjuto de ordenadores para un determinado dominio. Cada usuario es responsable de programarse a su antojo sus propios \u00e1mbitos que ser\u00e1n s\u00f3lo accesibles por \u00e9l. Cualquier usuario que tenga acceso a El interfaz de administraci\u00f3n va a poder crearse los \u00e1mbitos que desee. No es necesario que sea ni administrador ni admistrador de dominio . Campos de \u00c1mbitos \u00b6 Nombre : Indica el nombre del \u00e1mbito. Dominio : Referencia al dominio en el que el \u00e1mbito se enmarca. atributos incluidos : Aqu\u00ed se establecen los atributos que dictar\u00e1n que ordenadores, del dominio seleccionado, pertenecer\u00e1n al \u00e1mbito. atributos excluidos : Permite excluir ordenadores al \u00e1mbito. Los \u00e1mbitos permiten filtrar ordenadores de una manera personalizada, r\u00e1pida y sencilla. Este filtro no tiene efecto s\u00f3lo en los ordenadores, sino en todos los datos relacionados, incluyendo consultas y estad\u00edsticas.","title":"La configuraci\u00f3n del sistema migasfree"},{"location":"part3/system/#la-configuracion-del-sistema-migasfree","text":"El hombre razonable se adapta al mundo; el irrazonable intenta adaptar el mundo a s\u00ed mismo. As\u00ed pues, el progreso depende del irrazonable. -- George Bernard Shaw En cap\u00edtulos anteriores, has aprendido a instalar el servidor y el cliente migasfree, as\u00ed como a crear paquetes. La creaci\u00f3n de paquetes no es una tarea trivial, no tanto por su construcci\u00f3n en s\u00ed, sino por el hecho de que son necesarios amplios conocimientos de los sistemas operativos y de las aplicaciones. En este y en los siguientes tres cap\u00edtulos, vas a aprender a adaptar y usar el servidor migasfree .","title":"La configuraci\u00f3n del sistema migasfree"},{"location":"part3/system/#formulas","text":"En migasfree , una f\u00f3rmula es una caracter\u00edstica de los equipos o de los usuarios, y que nos servir\u00e1 para desplegar los paquetes. Como administrador de migasfree , una de las primeras tareas que debes realizar es definir estas f\u00f3rmulas. Debes preguntarte en funci\u00f3n de qu\u00e9 caracter\u00edsticas vas a realizar los despliegues. Por ejemplo, \u00bfte interesa desplegar los paquetes por el HOSTNAME de los equipos?, \u00bfy por subred? \u00bfQu\u00e9 tal por el grupo al que pertenece el usuario en el LDAP? \u00bfO por su contexto LDAP? nota En AZLinux, usamos principalmente el contexto LDAP al que pertenece el usuario para desplegar los cambios por los distintos servicios o departamentos de nuestro ayuntamiento, y en menor medida usamos tambi\u00e9n el CID. Una f\u00f3rmula es un c\u00f3digo que se programa en un registro de la base de datos de migasfree . Estas f\u00f3rmulas ser\u00e1n ejecutadas en cada uno de los clientes migasfree y sus valores de retorno ser\u00e1n devueltos al servidor como atributos . nota El atributo es el valor concreto que toma una f\u00f3rmula al ser ejecutada en un equipo. Veamos un ejemplo sencillo de todo esto con la f\u00f3rmula MACHINE NAME . Accede a la web de tu servidor migasfree y ve a Configuraci\u00f3n-F\u00f3rmulas-MACHINE NAME . En este registro, ver\u00e1s el siguiente c\u00f3digo escrito en python . import platform print(platform.node()) Si ejecutas python en una consola y escribes estas dos l\u00edneas, ver\u00e1s que python muestra, por la salida est\u00e1ndar, el nombre de tu equipo. $ python Python 2.7.3 (default, Apr 10 2013, 05:46:21) [GCC 4.6.3] on linux2 Type \"help\", \"copyright\", \"credits\" or \"license\" for more information. >>> import platform >>> print platform.node() white En mi caso me ha devuelto white , que es el nombre de mi port\u00e1til. \u00bfA que no aciertas de qu\u00e9 color es? Esto es, en definitiva, lo que hace el cliente migasfree : obtiene del servidor la f\u00f3rmula MACHINE NAME (su c\u00f3digo), la ejecuta y devuelve al servidor el resultado como atributo ( HST-white ). Podr\u00edas haber escrito la f\u00f3rmula tambi\u00e9n en c\u00f3digo bash simplemente llamando al comando de Linux hostname o escribiendo echo $HOSTNAME (el resultado ser\u00eda el mismo), pero utilizar c\u00f3digo python nos permite, en este caso, usar la misma f\u00f3rmula tambi\u00e9n para plataformas Windows o Mac OS.","title":"F\u00f3rmulas"},{"location":"part3/system/#campos-de-la-formula","text":"Observa cada uno de los campos de la f\u00f3rmula : Prefijo : Es una combinaci\u00f3n de tres n\u00fameros o letras. Este prefijo se utiliza para agrupar e identificar los atributos. Nombre : Denomina a la f\u00f3rmula. Habilitado : Indica si est\u00e1 activa la f\u00f3rmula. Si no est\u00e1 marcado, la f\u00f3rmula no ser\u00e1 ejecutada en los clientes. Lenguaje de programaci\u00f3n : En el que est\u00e1 escrito el c\u00f3digo de la f\u00f3rmula. C\u00f3digo : Instrucciones a ejecutar en los clientes para obtener atributos . Clase : Hay cuatro tipos de clases y que nos permiten tratar el valor devuelto por la f\u00f3rmula de diferentes maneras: Normal . El valor devuelto por la f\u00f3rmula viene con el siguiente formato: <valor>~<Descripci\u00f3n> o, simplemente, como: <valor> Lista : El valor al ejecutar la f\u00f3rmula en el cliente es una lista de atributos separados por una coma. Puedes ver un ejemplo en la f\u00f3rmula PCI . Su formato es: <valor>~<Descripci\u00f3n>, ... A\u00f1adir por la derecha : Permite a\u00f1adir atributos de la siguiente manera: Si el valor devuelto por la f\u00f3rmula es \\\"CONTEXTO1.CONTEXTO2.MIEMPRESA\\\", el servidor interpreta que el equipo tiene estos tres atributos: MIEMPRESA CONTEXTO2.MIEMPRESA CONTEXTO1.CONTEXTO2.MIEMPRESA Se utiliza esta clase para crear atributos relacionados con LDAP. A\u00f1adir por la izquierda . Lo mismo que la anterior, pero agregando por la izquierda. CONTEXTO1 CONTEXTO1.CONTEXTO2 CONTEXTO1.CONTEXTO2.MIEMPRESA A\u00f1adir autom\u00e1ticamente : Si este campo est\u00e1 marcado, los nuevos atributos ser\u00e1n a\u00f1adidos autom\u00e1ticamente a la base de datos de migasfree. En caso contrario es el administrador de migasfree el responsable de a\u00f1adir manualmente los atributos para esta f\u00f3rmula. Se pueden a\u00f1adir atributos manualmente accediendo a Datos-Atributos .","title":"Campos de la F\u00f3rmula"},{"location":"part3/system/#formulas-especificas","text":"Existen unas f\u00f3rmulas predefinidas que tienen unos objetivos muy concretos y que no pueden ser eliminadas del sistema. Lo m\u00e1s caracter\u00edstico de ellas es que no son ejecutadas en el cliente sino en el servidor. SET : Esta f\u00f3rmula tiene un atributo llamado SET-ALL SYSTEMS . Todos los ordenadores tendr\u00e1n este atributo sin excepci\u00f3n. Sirve para referirse a todos los ordenadores. Por ejemplo, si en un despliegue asignas este atributo, todos los ordenadores tendr\u00e1n acceso a \u00e9l. Es habitual usarlo tambi\u00e9n en la \u00faltima demora de un calendario. Esta f\u00f3rmula, adem\u00e1s, se usa internamente para definir Conjuntos de Atributos . CID : Computer Identificator . Esta f\u00f3rmula generar\u00e1 un atributo que es igual al campo id de la tabla computer de la Base de Datos de migasfree. Dicho atributo CID es \u00fanico por cada ordenador y se utiliza en lugar de referirse al UUID de la placa base de un ordenador siendo el m\u00e1s recomendado para se\u00f1alar a un ordenador en concreto (procesos como el Reemplazo de ordenadores {.interpreted-text role=\"ref\"} tienen en cuenta este atributo). Por ejemplo, un atributo CID-572 se corresponder\u00eda con el UUID 5FD85780-9BC9-11E3-91B8-F0921CF3678D. El ajuste MIGASFREE_COMPUTER_SEARCH_FIELDS {.interpreted-text role=\"ref\"} del servidor, permite configurar b\u00fasquedas por otros campos del ordenador a la hora de asignar un determinado CID en el servidor migasfree. Cuando un ordenador pasa a un estado Baja o a Disponible todos sus CID asignados en el sistema son eliminados. Ver campo estado de Ordenadores . El CID aparece por defecto en la etiqueta del ordenador que muestra el comando migasfree-label .","title":"F\u00f3rmulas espec\u00edficas"},{"location":"part3/system/#categorias-de-etiquetas","text":"Hasta ahora, has visto que una f\u00f3rmula es un c\u00f3digo que se ejecuta en el cliente para obtener un atributo autom\u00e1ticamente. Ahora bien, pueden existir casos en que no se puede obtener autom\u00e1ticamente estos atributos. Imagina que quieres \"etiquetar\" ciertos equipos seg\u00fan la funcionalidad que van a realizar (tratamiento gr\u00e1fico, administraci\u00f3n, aula, etc.). Esto no es algo que, a priori, se pueda programar. En migasfree existe la posibilidad de crear estas etiquetas y asignarlas manualmente a los equipos tal y como har\u00edas con una etiqueta f\u00edsica que pegas a un ordenador. Una etiqueta no ejecutar\u00e1 ning\u00fan c\u00f3digo en el cliente. Es el propio registro del ordenador en el servidor de migasfree quien lleva asignadas, manualmente, estas etiquetas. A todos los efectos, una etiqueta es un atributo m\u00e1s del sistema y, por tanto, te permitir\u00e1 hacer el despliegue tambi\u00e9n en funci\u00f3n de ellas. Por cada Configuraci\u00f3n-Categor\u00edas de etiquetas , existir\u00e1 un conjunto de etiquetas que manualmente debes a\u00f1adir en Datos-Etiquetas . Una vez a\u00f1adidas, puedes asignarlas a Datos-Ordenadores . Tambi\u00e9n puedes editar Datos-Etiquetas y asignarle un conjunto de ordenadores. Existe en el cliente el comando migasfree-tags que permite consultar y asignar etiquetas desde el propio cliente. Para obtener el conjunto de etiquetas que pueden ser asignadas a un ordenador ejecuta: migasfree-tags --available Para consultar las etiquetas asignadas a un ordenador ejecuta: migasfree-tags --get Para asignar etiquetas al equipo, seleccionando manualmente las etiquetas entre las disponibles en el sistema, ejecuta: migasfree-tags --set Para asignar determinadas etiquetas a un equipo, escribe las etiquetas separadas por espacios: migasfree-tags --set <ETIQUETA1> <ETIQUETA2> ... Para asignar etiquetas en el servidor migasfree pero que no se produzca ning\u00fan cambio de paquetes utiliza: migasfree-tags --communicate <ETIQUETA1> <ETIQUETA2> ... Para quitar todas las etiquetas de un equipo, ejecuta: migasfree-tags --set \"\" Las etiquetas est\u00e1n relacionadas con los campos de los despliegues: Paquetes pre-incluidos por defecto Paquetes incluidos por defecto Paquetes excluidos por defecto ya que al ejecutar el comando migasfre-tags --set se instalar\u00e1n los paquetes definidos en los pre-incluidos e incluidos y se desinstalar\u00e1n los paquetes definidos en el campo excluidos , siempre y cuando los atributos asignados al despliegue coincidan con los del equipo. Esto se utiliza para crear la imagen ISO de los escritorios. nota En AZLinux, usamos migasfree-tags b\u00e1sicamente para, partiendo de una imagen ISO de Ubuntu, desinstalar e instalar los paquetes que componen nuestro escritorio y crear una imagen del disco para clonar. nota En Vitalinux, se emplean las etiquetas para cambiar f\u00e1cilmente de \"sabor\". Cuando se quiere cambiar de \"sabor\" (Infantil, Primaria, Profes, ...), simplemente se eligen las etiquetas mediante el comando migasfree-tag --set , produci\u00e9ndose autom\u00e1ticamente la instalaci\u00f3n y desinstalaci\u00f3n de los paquetes correspondientes. Tambi\u00e9n se utiliza en la creaci\u00f3n del DVD, permitiendo hacer una ISO para cada sabor o conjunto de sabores.","title":"Categor\u00edas de etiquetas"},{"location":"part3/system/#campos-de-categorias-de-etiquetas","text":"Prefijo : Es una combinaci\u00f3n de tres n\u00fameros o letras. Este prefijo se utiliza para agrupar e identificar las etiquetas. Nombre : Denomina el tipo de etiqueta. Habilitado : Si no est\u00e1 marcado, las etiquetas de este tipo no ser\u00e1n funcionales. Clase : El funcionamiento es exactamente igual que en las f\u00f3rmulas . Un valor muy \u00fatil que puede tomar este campo es el de a\u00f1adir por la derecha . Imagina que quieres agrupar los ordenadores por ubicaci\u00f3n para liberar software por distintas zonas. Una forma de hacerlo es crear una Categor\u00eda de etiqueta llamada p.e. UBICACI\u00d3N definada de clase a\u00f1adir por la derecha . Despu\u00e9s, puedes crear las Etiquetas de tipo UBICACION p.e.: UBI-PLANTA-1.SEDE_CENTRAL.MADRID Cuando un equipo con esta etiqueta asignada se conecta al servidor, autom\u00e1ticamente el servidor interpretar\u00e1 que tiene no una, sino tres etiquetas: UBI-MADRID UBI-SEDE_CENTRAL.MADRID UBI-PLANTA-1.SEDE_CENTRAL.MADRID Con lo que finalmente podemos liberar software a todo MADRID , a toda la sede central de Madrid, o solamente a la planta 1\u00aa. nota Observa que el caracter de delimitaci\u00f3n es el punto: .","title":"Campos de categor\u00edas de etiquetas"},{"location":"part3/system/#conjuntos-de-atributos","text":"En ocasiones puedes necesitar agrupar Atributos . Imagina que tienes muchos equipos a los que asignar una cierta Etiqueta y que te resulta pesado tener que hacerlo uno a uno. Puedes entonces crear un Conjunto de Atributos . Sup\u00f3n que tienes subredes con un buen ancho de banda y otras subredes que no, y que necesitas liberar software en funci\u00f3n de esto. Podr\u00edamos crear dos Conjuntos de Atributos : Conjunto 1: Nombre: RED LENTA Atributos asignados: NET-192.168.1.0/24 NET-192.168.8.0/24 Conjunto 2: Nombre: RED RAPIDA Atributos asignados: SET-ALL SYSTEMS Atributos excluidos: SET-RED LENTA De esta manera, cualquier equipo de las subredes 192.168.1.0/24 o 192.168.8.0/24, al ejecutar migasfree -u , se le asignar\u00e1 autom\u00e1ticamente un Atributo: SET-RED LENTA . Al resto de equipos se le asignar\u00e1 el Atributo: SET-RED RAPIDA . Ahora ya podr\u00edamos crear Despliegues y asignarles dichos Atributos . Los Conjuntos de Atributos no ejecutan ning\u00fan c\u00f3digo en el cliente, sino que son evaluados en el servidor. Si un ordenador pertenece a un conjunto, se le asigna un Atributo con el mismo nombre que el Conjunto de Atributos .","title":"Conjuntos de Atributos"},{"location":"part3/system/#campos-de-conjuntos-de-atributos","text":"Nombre : Denomina al conjunto. Habilitado : Indica si el conjunto ser\u00e1 evaluado. Atributos incluidos : Lista de Atributos que formar\u00e1n parte el conjunto. Atributos excluidos : Lista de Atributos a excluir del conjunto.","title":"Campos de Conjuntos de Atributos"},{"location":"part3/system/#definicion-de-fallas","text":"Una falla es un hecho negativo que se produce en un equipo cliente. Por ejemplo que un equipo se quede con poco espacio en la partici\u00f3n de sistema, es algo a lo que se debe prestar atenci\u00f3n y ser solucionado antes de que sea tarde. Migasfree, mediante las fallas, permite lanzar c\u00f3digo en el cliente con este objetivo. F\u00edjate que las posibilidades son inmensas y que facilita la proactividad . En definitiva, una falla es un c\u00f3digo que se ejecuta en el cliente. Si el c\u00f3digo escribe algo por la salida est\u00e1ndar, \u00e9sta ser\u00e1 enviada al servidor como Falla . El servidor entonces a\u00f1adir\u00e1 un registro de Falla , apareciendo en las Alertas de los usuarios de migasfree .","title":"Definici\u00f3n de Fallas"},{"location":"part3/system/#campos-de-definicion-de-falla","text":"Nombre : Denomina a la falla. Habilitado : Activa o desactiva la falla. Descripci\u00f3n : Para detallar lo que hace la falla. Lenguaje de programaci\u00f3n : Especifica en qu\u00e9 lenguaje est\u00e1 escrito el c\u00f3digo . Mi recomendaci\u00f3n es que programes en la medida de lo posible en python . C\u00f3digo : Instrucciones que detectan alguna falla en los equipos y que debe poner en la salida est\u00e1ndar un texto que indique la falla producida. Puede serte \u00fatil en algunos casos poner tambi\u00e9n el procedimiento a seguir. Atributos incluidos : Permite asignar en qu\u00e9 equipos cliente ser\u00e1 efectiva la falla. Por ejemplo si escribes el c\u00f3digo en bash, deber\u00edas asignar la falla s\u00f3lo a los equipos con plataforma Linux PLT-Linux , ya que plataformas Windows no ser\u00e1n capaces de ejecutar bash. Tambi\u00e9n te puede interesar programar una falla s\u00f3lo para obtener informaci\u00f3n de un equipo o de un grupo de equipos. Atributos excluidos : Permite excluir a ciertos equipos de la ejecuci\u00f3n de la falla. Usuarios : Sirve para asignar usuarios de migasfree a los que les aparecer\u00e1n las fallas de este tipo cuando se accede desde las Alertas (s\u00f3lo se muestran las que est\u00e1n pendientes de comprobar por el usuario autenticado). Si una definici\u00f3n de falla no tiene asignado ning\u00fan usuario, las fallas que se produzcan aparecer\u00e1n a cualquier usuario autenticado. nota Poder ejecutar c\u00f3digo en los clientes proporciona una gran potencia para realizar cualquier cosa. Usa esta capacidad con responsabilidad y s\u00e9 meticuloso en las comprobaciones antes de activar cualquier falla.","title":"Campos de Definici\u00f3n de Falla"},{"location":"part3/system/#errores-autocomprobables","text":"Por defecto, los errores producidos por el PMS, se a\u00f1aden al sistema como no comprobados. Ahora bien, en ocasiones puede resultar tedioso tener que marcar como comprobados uno a uno ciertos errores que, m\u00e1s que errores, son \"alertas\". Para automatizar esta tarea puedes crear un error autocomprobable . Simplemente a\u00f1ade un registro con el patr\u00f3n de b\u00fasqueda deseado y los errores que coincidan son ese patr\u00f3n se marcar\u00e1n autom\u00e1ticamente como comprobados. Por ejemplo, si quisieras que todos los errores que llegan del tipo: 2014-10-03 10:44:47 Error: Generic error Info: Curl error: Couldn't resolve host 'myserver' se autocomprobaran, podr\u00edas emplear el siguiente patr\u00f3n: .*\\sError: Generic error\\sInfo: Curl error: Couldn't resolve host 'myserver'","title":"Errores autocomprobables"},{"location":"part3/system/#consultas","text":"Migasfree incorpora un sistema para crear consultas parametrizables. Cada consulta se programa en un registro y podr\u00e1 ser ejecutada accediendo a Consultas . Hay una pocas consultas ya predefinidas, pero puedes programar nuevas o adaptar las que ya existen.","title":"Consultas"},{"location":"part3/system/#campos-de-consulta","text":"Nombre : Denomina la consulta. Descripci\u00f3n : Describe la consulta. C\u00f3digo : Instrucci\u00f3n en Django de la consulta. Mediante la asignaci\u00f3n de unas variables predeterminadas el servidor podr\u00e1 crear la consulta. Las variables en concreto son: query : Conjunto de registros de la consulta. fields : Lista de los campos del QuerySet que se quieren mostrar. titles : Lista de los titulos de los campos que se quieren mostrar. project : Sirve para obtener el proyecto del usuario y poder hacer filtros cuando se requiera. Par\u00e1metros : Permite la petici\u00f3n de par\u00e1metros de consulta. Se debe crear una funci\u00f3n que se llame form_params y que devuelva una clase que herede de ParametersForm . nota Para realizar consultas, necesitar\u00e1s conocer un poco los QuerySet de Django y la Documentaci\u00f3n del modelo de datos . Esta \u00faltima la tienes disponible al final de todas las p\u00e1ginas de la aplicaci\u00f3n, pulsando sobre el icono de base de datos.","title":"Campos de consulta"},{"location":"part3/system/#proyectos","text":"Migasfree puede trabajar con distintos Sistemas Operativos. Un proyecto , en migasfree, representa a un conjunto de ordenadores que comparten un mismo Sistema Operativo base. Por ejemplo, en el Ayto. de Zaragoza contamos con los siguientes proyectos : AZLinux-1 (SLED 10.2) Se migr\u00f3 a AZLinux-2 (ning\u00fan PC). AZLinux-2 (OpenSUSE 11.2) Se migr\u00f3 a AZLinux-12 (ning\u00fan PC). AZLinux-12 (Ubuntu 12.04) En producci\u00f3n (900 PC). En fase de migraci\u00f3n a otros AZLinux. AZLinux-14 (Ubuntu 14.04) En producci\u00f3n (500 PC). AZLinux-16 (Ubuntu 16.04). En producci\u00f3n (100 PC). ZA (Ubuntu 10.04 para escritorios tipo kioskos). Obsoleto. WIN-XP (Windows XP). En producci\u00f3n (1600 PC). AZW-10 (Windows 10). En producci\u00f3n (80 PC). Cada ordenador estar\u00e1 configurado en un \u00fanico proyecto en un momento dado. Cambios de proyecto en un ordenador crean en el sistema un registro de migraci\u00f3n autom\u00e1ticamente. De esta manera, es posible conocer las diferentes migraciones de S.O. que se han ido produciendo en los equipos y en qu\u00e9 momento se han hecho efectivas. Puedes consultar las migraciones accediendo a Datos-Migraciones . Mediante el ajuste MIGASFREE_AUTOREGISTER se permite, o no, a los equipos registrar autom\u00e1ticamente los proyectos. Puedes consultarlo en Ajustes del servidor migasfree .","title":"Proyectos"},{"location":"part3/system/#campos-del-proyecto","text":"Nombre : Denomina al proyecto. Plataforma : a la que pertenece el proyecto. Sistema de gesti\u00f3n de paquetes : El PMS que se utiliza en el sistema operativo de este proyecto. Auto registrar ordenadores : Si est\u00e1 marcado, se permiten registrar ordenadores desde un cliente autom\u00e1ticamente. En este caso, s\u00f3lo con que un equipo est\u00e9 configurado con el proyecto, ser\u00e1 a\u00f1adido autom\u00e1ticamente a la base datos. En caso contrario, s\u00f3lo se podr\u00e1n registrar ordenadores mediante el uso de un usuario que cuente con los permisos adecuados para a\u00f1adir ordenadores al sistema.","title":"Campos del proyecto"},{"location":"part3/system/#sistemas-de-gestion-de-paquetes","text":"Son los distintos PMS predefinidos que vienen con migasfree. nota En versiones futuras de migasfree est\u00e1 previsto su refactorizaci\u00f3n y la eliminaci\u00f3n de este modelo de datos.","title":"Sistemas de gesti\u00f3n de paquetes"},{"location":"part3/system/#plataformas","text":"Los proyectos se clasifican por plataformas. Las plataformas vienen establecidas por la funci\u00f3n python platform.system() y, por tanto, sus valores pueden ser: Linux Unix Windows Darwin (Otras) Esta clasificaci\u00f3n de los proyectos te permite realizar consultas y estad\u00edsticas en funci\u00f3n de la plataforma. Mediante el ajuste MIGASFREE_AUTOREGISTER se permite, o no, a los equipos registrar autom\u00e1ticamente las plataformas. Puedes consultarlo en Ajustes del servidor migasfree .","title":"Plataformas"},{"location":"part3/system/#perfiles-de-usuario-migasfree","text":"En migasfree existen dos tipos de usuarios, los usuarios que administran migasfree y los usuarios que utilizan los ordenadores. Este apartado se refiere a los primeros. Cuando se genera la base de datos de migasfree , se crean 8 usuarios predeterminados y varios authgroup :","title":"Perfiles de usuario Migasfree"},{"location":"part3/system/#usuarios-por-defecto","text":"admin . Tiene permisos de lectura/escritura a todas las tablas. packager . Pertenece a los grupos Reader y Packager . configurator . Pertenece a los grupos Reader y Configurator . installer . Pertenece a los grupos Reader y Device installer . query . Pertenece a los grupos Reader y Query . liberator . Pertenece a los grupos Reader y Liberator . checker . Pertenece a los grupos Reader y Computer Checker . reader . Pertenece al grupo Reader . Estos usuarios tienen por defecto como contrase\u00f1a su nombre, es decir, la contrase\u00f1a de admin es admin , y lo mismo es aplicable al resto de usuarios. Estos usuarios son ficticios para realizar pruebas y conviene que sean eliminados. Se recomienda crear los usuarios reales que usar\u00e1n el servidor migasfree , asign\u00e1ndoles los grupos de usuarios correspondientes. nota Es importante que en un entorno de producci\u00f3n se deshabiliten los usuarios que no se vayan a utilizar o que, al menos, se les cambie la contrase\u00f1a por motivos de seguridad.","title":"Usuarios por defecto"},{"location":"part3/system/#campos-de-perfiles-de-usuarios-migasfree","text":"Nombre de usuario : Nombre de la cuenta de usuario. Nombre : Nombre del usuario. Apellidos : Apellidos del usuario. Direcci\u00f3n de correo electr\u00f3nico : Email. Fecha de alta : Cuando se a\u00f1adi\u00f3 el usuario al sistema. \u00daltimo inicio de sesi\u00f3n : del usuario. Activo : Indica si el usuario debe ser tratado como activo. Desmarca esta opci\u00f3n en lugar de borrar la cuenta. Es superusuario : Indica que este usuario tiene todos los permisos sin asign\u00e1rselos expl\u00edcitamente. Cuando marcamos este campo estamos indicando que es un usuario administrador . Es staff : Indica si el usuario puede entrar en El interfaz de administraci\u00f3n Grupos : Grupos a los que pertenece el usuario. Permisos de usuario : Permisos adicionales. Dominios : Lista de dominios que puede administrar el usuario. Dominio : Dominio que actualmente tiene selecionado el usuario en El interfaz de administraci\u00f3n \u00c1mbito : \u00c1mbito que actualmente tiene selecionado el usuario en El interfaz de administraci\u00f3n","title":"Campos de Perfiles de usuarios migasfree"},{"location":"part3/system/#cambio-de-contrasena","text":"La contrase\u00f1a puede ser cambiada por los usuarios pulsando en su nombre de usuario y que aparece arriba a la derecha en El interfaz de administraci\u00f3n . Tambi\u00e9n puede ser modificada por otro usuario que tenga marcado el campo Es superusuario , accediendo al registro del usuario en cuesti\u00f3n y modificando directamente su campo Contrase\u00f1a . Si un usuario olvida su contrase\u00f1a, y el administrador ha configurado en los ajustes del servidor el email , podr\u00e1 restablecerla.","title":"Cambio de contrase\u00f1a"},{"location":"part3/system/#grupos-de-usuarios","text":"En funci\u00f3n de las tareas que los usuarios de administraci\u00f3n de migasfree pueden realizar, se establecen los siguientes grupos de usuarios. Domain Admin . Cuenta con permisos de lectura/escritura a: Ordenadores Despliegues \u00c1mbitos Configurator con permisos de lectura/escritura a: F\u00f3rmulas Proyectos Sistemas de gesti\u00f3n de paquetes (PMS) Plataformas Comprobaciones Definiciones de fallas Mensajes Sincronizaciones Mensajes del servidor Migraciones Notificaciones Computer Checker tiene permisos de lectura/escritura a: Errores Fallas Mensajes Sincronizaciones Liberator . Permisos de lectura/escritura a: Despliegues Calendarios Packager cuenta con permisos de lectura/escritura a: Paquetes Almacenes Query . Permisos de lectura/escritura a: Consultas Device installer cuenta con permisos de lectura/escritura a: Dispositivos Reader . Permisos de s\u00f3lo lectura a todas las tablas.","title":"Grupos de Usuarios"},{"location":"part3/system/#dominios","text":"En migasfree llamanos dominio a un conjunto de ordenadores. Mientras que un usuario administrador ve a todos y cada uno de los ordenadores del sistema, un usuario administrador de dominio s\u00f3lo va a poder ver y trabajar con los ordenadores del dominio que administra. Un ejemplo t\u00edpico de uso de administrador de dominio ser\u00eda el de una empresa con varias delegaciones donde se requiere que un determinado usuario pueda administrar s\u00f3lo los ordenadores de una de las delegaciones, siendo el resto de ordenadores y sus datos \"invisibles\" para \u00e9l. S\u00f3lo un usuario administrador puede crear y editar dominios asign\u00e1ndoles usuarios administradores de dominio . Un administrador de dominio puede administrar varios dominios .","title":"Dominios"},{"location":"part3/system/#campos-de-dominio","text":"Nombre : Denomina al dominio. Comentario : Describe al dominio. Atributos incluidos : Aqui se establecen mediante atributos los ordenadores que formar\u00e1n parte del dominio. Atributos excluidos : Permite excluir ordenadores. Etiquetas : Especifica que etiquetas ser\u00e1n visibles al ejecutar migasfree-tags -s el el cliente para los ordenadores que pertenezcan al dominio Administradores : Lista de usuarios administradores de dominio que administran el dominio","title":"Campos de dominio"},{"location":"part3/system/#caracteristicas-del-usuario-administrador-de-dominio","text":"Ve s\u00f3lo los datos relativos al dominio que tiene seleccionado en El interfaz de administraci\u00f3n . Pertenece al grupo de usuarios Domain Admin que establece las siguientes restricciones por defecto: Puede crear despliegues en el dominio con objeto de instalar, actualizar o eliminar paquetes en ese dominio, pero no puede subir nuevos paquetes ni modificar despliegues de otros dominios. Puede definir dispositivos pero no modelos de dispositivos. No puede modificar Formulas, Categorias de Etiquetas, ni Definiciones de Fallas. No es un superusuario . Ver serveruserprofile {.interpreted-text role=\"ref\"} El administrador de dominio debe colaborar estrechamente con el administrador para no duplicar configuraciones y crear definiciones generalistas en la medida de lo posible. Piensa que un administrador puede querer p.e. desinstalar obligatoriamente una determinada aplicaci\u00f3n a todos los equipos y entrar en conflicto con un administrador de dominio que desea instalarla, en este caso se instalar\u00e1 y desinstalar\u00e1 continuamente la aplicaci\u00f3n. Ten cuidado con esto.","title":"Caracter\u00edsticas del usuario administrador de dominio"},{"location":"part3/system/#procedimiento-de-creacion-de-un-dominio","text":"Antes de crear el dominio debemos crear las etiquetas que van a estar disponibles en el dominio. Ve a \"datos-etiquetas\" y a\u00f1\u00e1delas. Supongamos que queremos crear el dominio \"INSTITUTO GOYA\" con la siguiente estructura: GOYA AULA A B LABORATORIO ADMINISTRACION SALA PROFESORES las etiquetas que se deben crear son: DMN-GOYA.AULA DMN-GOYA.AULA.A DMN-GOYA.AULA.B DMN-GOYA.AULA.LABORATORIO DMN-GOYA.ADMINISTACION DMN-GOYA.ADMINISTACION.SALA_PROFESORES A\u00f1adir el dominio . Nombre Comentario Atributos: A\u00f1adirlos si se conocen, si no se puede dejar en blanco para a\u00f1adirlos m\u00e1s tarde. Asignar las tags creadas en el paso anterior. Administradores de dominio: Si ya los has dado de alta, a\u00f1\u00e1delos. Registrar los ordenadores al dominio. OPCION A. Cuando eres un usuario administrador . Se a\u00f1ade el equipo al dominio. (Ir al dominio y asignar en atributos incluidos el CID) Se asigna cualquiera de las etiquetas del dominio (o varias) en el ordenador. OPCION B. Cuando eres un usuario administrador de dominio Ejecutar el siguiente comando en el ordenador y autom\u00e1ticamente \u00e9ste se registrar\u00e1 en el dominio que tenga seleccionado en El interfaz de administraci\u00f3n {.interpreted-text role=\"ref\"} en ese momento el administrador de dominio. migasfree -g --user=<user_admin_domain>","title":"Procedimiento de creaci\u00f3n de un dominio"},{"location":"part3/system/#ambitos","text":"Un \u00e1mbito en migasfree es un subconjuto de ordenadores para un determinado dominio. Cada usuario es responsable de programarse a su antojo sus propios \u00e1mbitos que ser\u00e1n s\u00f3lo accesibles por \u00e9l. Cualquier usuario que tenga acceso a El interfaz de administraci\u00f3n va a poder crearse los \u00e1mbitos que desee. No es necesario que sea ni administrador ni admistrador de dominio .","title":"\u00c1mbitos"},{"location":"part3/system/#campos-de-ambitos","text":"Nombre : Indica el nombre del \u00e1mbito. Dominio : Referencia al dominio en el que el \u00e1mbito se enmarca. atributos incluidos : Aqu\u00ed se establecen los atributos que dictar\u00e1n que ordenadores, del dominio seleccionado, pertenecer\u00e1n al \u00e1mbito. atributos excluidos : Permite excluir ordenadores al \u00e1mbito. Los \u00e1mbitos permiten filtrar ordenadores de una manera personalizada, r\u00e1pida y sencilla. Este filtro no tiene efecto s\u00f3lo en los ordenadores, sino en todos los datos relacionados, incluyendo consultas y estad\u00edsticas.","title":"Campos de \u00c1mbitos"}]}